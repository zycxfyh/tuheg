# è´¨é‡ä¿è¯æµç¨‹

## æ¦‚è¿°

Creation Ring é¡¹ç›®é‡‡ç”¨ä¸¥æ ¼çš„è´¨é‡ä¿è¯æµç¨‹ï¼Œç¡®ä¿ä»£ç è´¨é‡ã€æµ‹è¯•è¦†ç›–ç‡å’Œç³»ç»Ÿç¨³å®šæ€§ã€‚æœ¬æ–‡æ¡£å®šä¹‰äº†é¡¹ç›®çš„è´¨é‡æ ‡å‡†å’Œæ‰§è¡Œæµç¨‹ã€‚

## è´¨é‡æ ‡å‡†

### ä»£ç è´¨é‡æŒ‡æ ‡

| æŒ‡æ ‡ | è¦æ±‚ | å·¥å…· | è¯´æ˜ |
|------|------|------|------|
| **æµ‹è¯•è¦†ç›–ç‡** | â‰¥80% | Jest | è¯­å¥ã€åˆ†æ”¯ã€å‡½æ•°ã€è¡Œè¦†ç›–ç‡ |
| **ä»£ç å¤æ‚åº¦** | â‰¤15 | Biome | è®¤çŸ¥å¤æ‚åº¦æ§åˆ¶ |
| **TypeScript ä¸¥æ ¼æ¨¡å¼** | 100% | TypeScript | ä¸¥æ ¼ç±»å‹æ£€æŸ¥ |
| **ä»£ç æ ¼å¼åŒ–** | 100% | Biome | ç»Ÿä¸€ä»£ç é£æ ¼ |
| **å®‰å…¨æ¼æ´** | 0ä¸ªé«˜é£é™© | audit-ci | ä¾èµ–å®‰å…¨å®¡è®¡ |

### æµ‹è¯•è´¨é‡æŒ‡æ ‡

| æŒ‡æ ‡ | è¦æ±‚ | è¯´æ˜ |
|------|------|------|
| **å•å…ƒæµ‹è¯•è¦†ç›–** | â‰¥85% (æ ¸å¿ƒä»£ç ) | å‡½æ•°çº§æµ‹è¯•è¦†ç›– |
| **é›†æˆæµ‹è¯•è¦†ç›–** | â‰¥75% | æ¨¡å—é—´åä½œæµ‹è¯• |
| **E2E æµ‹è¯•è¦†ç›–** | â‰¥70% | ç”¨æˆ·æµç¨‹å®Œæ•´æ€§ |
| **æµ‹è¯•æ‰§è¡Œæ—¶é—´** | <5åˆ†é’Ÿ | CI æµæ°´çº¿æ•ˆç‡ |
| **æµ‹è¯•å¤±è´¥ç‡** | 0% | æ‰€æœ‰æµ‹è¯•å¿…é¡»é€šè¿‡ |

## æ‰§è¡Œæµç¨‹

### å¼€å‘é˜¶æ®µè´¨é‡æ£€æŸ¥

#### 1. æœ¬åœ°å¼€å‘æ£€æŸ¥

```bash
# å®æ—¶ä»£ç è´¨é‡æ£€æŸ¥
pnpm lint:watch        # ç›‘å¬æ¨¡å¼ä»£ç æ£€æŸ¥
pnpm type-check:watch  # ç›‘å¬æ¨¡å¼ç±»å‹æ£€æŸ¥
pnpm test:watch        # ç›‘å¬æ¨¡å¼æµ‹è¯•

# å®Œæ•´è´¨é‡æ£€æŸ¥
pnpm validate          # è¿è¡Œæ‰€æœ‰æ£€æŸ¥
```

#### 2. Pre-commit é’©å­

æ¯æ¬¡æäº¤è‡ªåŠ¨æ‰§è¡Œï¼š

```bash
ğŸ” å¥åº·æ£€æŸ¥ (health-check.js)
ğŸ”§ ä¸¥æ ¼ä»£ç æ£€æŸ¥ (lint:strict)
ğŸ“ æ ¼å¼æ£€æŸ¥ (format:check)
ğŸ”· ä¸¥æ ¼ç±»å‹æ£€æŸ¥ (type-check:strict)
ğŸ§ª å¿«é€Ÿå¤±è´¥æµ‹è¯• (test:fail-fast)
ğŸ”’ å®‰å…¨å®¡è®¡ (audit)
```

### CI/CD è´¨é‡æ£€æŸ¥

#### GitHub Actions æµæ°´çº¿

```yaml
jobs:
  quality:     # ä»£ç è´¨é‡æ£€æŸ¥
  build:       # æ„å»ºéªŒè¯
  docker:      # å®¹å™¨åŒ–æµ‹è¯•
  release:     # è‡ªåŠ¨å‘å¸ƒ
```

#### CI æ£€æŸ¥æ¸…å•

- [ ] **ä»£ç è´¨é‡**: lint:strict, format:check
- [ ] **ç±»å‹å®‰å…¨**: type-check:strict
- [ ] **æµ‹è¯•è¦†ç›–**: test:all (è¦†ç›–ç‡ â‰¥80%)
- [ ] **å®‰å…¨æ£€æŸ¥**: audit (æ— é«˜é£é™©æ¼æ´)
- [ ] **æ„å»ºéªŒè¯**: build:all (æ— æ„å»ºé”™è¯¯)
- [ ] **å®¹å™¨åŒ–**: docker build (é•œåƒæ„å»ºæˆåŠŸ)

## æµ‹è¯•ç­–ç•¥

### åˆ†å±‚æµ‹è¯•æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   E2E Tests         â”‚  ğŸŒ ç”¨æˆ·è§†è§’å®Œæ•´æµç¨‹
â”‚   (Playwright)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Integration Tests   â”‚  ğŸ”— ç»„ä»¶é—´é›†æˆæµ‹è¯•
â”‚   (Jest + Supertest)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Unit Tests        â”‚  ğŸ§ª å•å…ƒé€»è¾‘æµ‹è¯•
â”‚   (Jest + mocks)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Static Analysis     â”‚  ğŸ” é™æ€ä»£ç åˆ†æ
â”‚   (Biome + TSC)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æµ‹è¯•ç±»å‹å®šä¹‰

#### å•å…ƒæµ‹è¯• (Unit Tests)
- **èŒƒå›´**: å•ä¸ªå‡½æ•°/ç±»/æ¨¡å—
- **å·¥å…·**: Jest + jest-mock-extended
- **ç›®æ ‡**: éªŒè¯æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- **è¦†ç›–ç‡è¦æ±‚**: â‰¥85% (æ ¸å¿ƒä»£ç )

```typescript
describe('CreationService', () => {
  it('should create new world', async () => {
    // Arrange - è®¾ç½®æµ‹è¯•æ•°æ®å’Œmock
    // Act - æ‰§è¡Œè¢«æµ‹å‡½æ•°
    // Assert - éªŒè¯ç»“æœ
  })
})
```

#### é›†æˆæµ‹è¯• (Integration Tests)
- **èŒƒå›´**: å¤šä¸ªç»„ä»¶é—´çš„åä½œ
- **å·¥å…·**: Jest + Supertest + TestContainers
- **ç›®æ ‡**: éªŒè¯ç»„ä»¶é—´æ¥å£
- **è¦†ç›–ç‡è¦æ±‚**: â‰¥75%

#### ç«¯åˆ°ç«¯æµ‹è¯• (E2E Tests)
- **èŒƒå›´**: å®Œæ•´ç”¨æˆ·æµç¨‹
- **å·¥å…·**: Playwright
- **ç›®æ ‡**: éªŒè¯ç”¨æˆ·ä½“éªŒ
- **è¦†ç›–ç‡è¦æ±‚**: â‰¥70%

## ä»£ç è´¨é‡å·¥å…·é“¾

### ä¸»è¦å·¥å…·

#### Biome (ä»£ç è´¨é‡)
```json
{
  "linter": {
    "rules": {
      "complexity": {
        "noExcessiveCognitiveComplexity": "warn"
      },
      "correctness": {
        "noUnusedVariables": "warn"
      }
    }
  },
  "formatter": {
    "enabled": true,
    "indentStyle": "space",
    "lineWidth": 100
  }
}
```

#### TypeScript (ç±»å‹å®‰å…¨)
```json
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true
  }
}
```

#### Jest (æµ‹è¯•æ¡†æ¶)
```javascript
module.exports = {
  collectCoverageFrom: ['src/**/*.{ts,tsx}', '!**/*.d.ts'],
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80
    }
  },
  testTimeout: 30000,
  bail: true  // å¿«é€Ÿå¤±è´¥
}
```

## è´¨é‡é—¨ç¦ (Quality Gates)

### æäº¤å‰æ£€æŸ¥ (Pre-commit)
```bash
âœ… å¥åº·æ£€æŸ¥é€šè¿‡
âœ… ä¸¥æ ¼ä»£ç æ£€æŸ¥é€šè¿‡
âœ… ä»£ç æ ¼å¼æ­£ç¡®
âœ… ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€šè¿‡
âœ… å¿«é€Ÿæµ‹è¯•é€šè¿‡
âœ… å®‰å…¨å®¡è®¡é€šè¿‡
```

### åˆå¹¶å‰æ£€æŸ¥ (Pre-merge)
```bash
âœ… CI æµæ°´çº¿é€šè¿‡
âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡
âœ… è¦†ç›–ç‡è¾¾æ ‡
âœ… ä»£ç å®¡æŸ¥é€šè¿‡
âœ… å®‰å…¨æ‰«æé€šè¿‡
```

### å‘å¸ƒå‰æ£€æŸ¥ (Pre-release)
```bash
âœ… æ‰€æœ‰è´¨é‡é—¨ç¦é€šè¿‡
âœ… E2E æµ‹è¯•é€šè¿‡
âœ… æ€§èƒ½æµ‹è¯•é€šè¿‡
âœ… å®‰å…¨æ¸—é€æµ‹è¯•é€šè¿‡
âœ… æ–‡æ¡£æ›´æ–°å®Œæˆ
```

## è´¨é‡ç›‘æ§

### æŒç»­ç›‘æ§æŒ‡æ ‡

#### ä»£ç è´¨é‡æŒ‡æ ‡
- **æŠ€æœ¯å€ºåŠ¡**: SonarQube åˆ†æ
- **ä»£ç é‡å¤ç‡**: <5%
- **å¤æ‚åº¦åˆ†å¸ƒ**: å¹³å‡å¤æ‚åº¦ <10

#### æµ‹è¯•è´¨é‡æŒ‡æ ‡
- **æµ‹è¯•æ‰§è¡Œæ—¶é—´**: è¶‹åŠ¿ç›‘æ§
- **æµ‹è¯•ç¨³å®šæ€§**: æ³¢åŠ¨ç‡ <5%
- **è¦†ç›–ç‡å˜åŒ–**: æ¯å‘¨æŠ¥å‘Š

#### æ€§èƒ½æŒ‡æ ‡
- **æ„å»ºæ—¶é—´**: <10åˆ†é’Ÿ
- **æµ‹è¯•æ—¶é—´**: <5åˆ†é’Ÿ
- **éƒ¨ç½²æ—¶é—´**: <2åˆ†é’Ÿ

### è´¨é‡æŠ¥å‘Š

#### æ—¥æŠ¥
- æµ‹è¯•ç»“æœæ±‡æ€»
- è¦†ç›–ç‡å˜åŒ–
- æ–°å¢æŠ€æœ¯å€ºåŠ¡

#### å‘¨æŠ¥
- è´¨é‡è¶‹åŠ¿åˆ†æ
- çƒ­ç‚¹é—®é¢˜è¯†åˆ«
- æ”¹è¿›æªæ–½å»ºè®®

#### æœˆæŠ¥
- è´¨é‡åº¦é‡å›é¡¾
- æ”¹è¿›æ•ˆæœè¯„ä¼°
- æœªæ¥ä¼˜åŒ–è®¡åˆ’

## æ”¹è¿›æµç¨‹

### é—®é¢˜è¯†åˆ«
1. **è‡ªåŠ¨åŒ–ç›‘æ§**: CI å¤±è´¥ã€è¦†ç›–ç‡ä¸‹é™
2. **äººå·¥å®¡æŸ¥**: ä»£ç å®¡æŸ¥å‘ç°é—®é¢˜
3. **ç”¨æˆ·åé¦ˆ**: ç”Ÿäº§ç¯å¢ƒé—®é¢˜æŠ¥å‘Š

### é—®é¢˜è§£å†³
1. **ä¼˜å…ˆçº§è¯„ä¼°**: å½±å“èŒƒå›´ + ä¸¥é‡ç¨‹åº¦
2. **æ ¹æœ¬åŸå› åˆ†æ**: 5Why åˆ†ææ³•
3. **è§£å†³æ–¹æ¡ˆè®¾è®¡**: å¤šæ–¹æ¡ˆè¯„ä¼°
4. **å®æ–½éªŒè¯**: æµ‹è¯•éªŒè¯ + å›å½’æµ‹è¯•

### æŒç»­æ”¹è¿›
1. **å›é¡¾æ€»ç»“**: é—®é¢˜è§£å†³åçš„å¤ç›˜
2. **æµç¨‹ä¼˜åŒ–**: åŸºäºç»éªŒçš„æµç¨‹æ”¹è¿›
3. **é¢„é˜²æªæ–½**: å»ºç«‹é˜²æŠ¤æœºåˆ¶

## å·¥å…·å’Œèµ„æº

### å¼€å‘å·¥å…·
- **Biome**: ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
- **TypeScript**: ç±»å‹æ£€æŸ¥
- **Jest**: æµ‹è¯•æ¡†æ¶
- **audit-ci**: å®‰å…¨å®¡è®¡

### CI/CD å·¥å…·
- **GitHub Actions**: è‡ªåŠ¨åŒ–æµæ°´çº¿
- **Codecov**: è¦†ç›–ç‡æŠ¥å‘Š
- **SonarQube**: ä»£ç è´¨é‡åˆ†æ

### ç›‘æ§å·¥å…·
- **Sentry**: é”™è¯¯ç›‘æ§
- **DataDog**: æ€§èƒ½ç›‘æ§
- **Grafana**: å¯è§†åŒ–é¢æ¿

## åŸ¹è®­å’Œæ–‡æ¡£

### æ–°æˆå‘˜åŸ¹è®­
1. **è´¨é‡æ„è¯†**: è´¨é‡é‡è¦æ€§è®¤çŸ¥
2. **å·¥å…·ä½¿ç”¨**: å¼€å‘å·¥å…·é“¾åŸ¹è®­
3. **æµç¨‹ç†Ÿæ‚‰**: è´¨é‡ä¿è¯æµç¨‹æ¼”ç»ƒ

### æ–‡æ¡£èµ„æº
- [æµ‹è¯•æ–‡æ¡£](../testing/README.md)
- [ä»£ç è§„èŒƒ](../development/code-standards.md)
- [è´¡çŒ®æŒ‡å—](../../CONTRIBUTING.md)

---

**æœ€åæ›´æ–°**: 2025-11-09
**ç»´æŠ¤è€…**: Quality Assurance Team
