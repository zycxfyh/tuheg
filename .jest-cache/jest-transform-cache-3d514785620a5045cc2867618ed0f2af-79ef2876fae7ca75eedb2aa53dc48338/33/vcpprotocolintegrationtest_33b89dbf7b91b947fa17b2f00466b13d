8259fabd5e481f1f757a019b043364fb
"use strict";
// ============================================================================
// VCP协议核心集成测试
// 验证 VCPToolBox 协议标准的正确集成
// ============================================================================
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@nestjs/testing");
const config_1 = require("@nestjs/config");
const vcp_protocol_service_1 = require("../../../../packages/common-backend/src/vcp/vcp-protocol.service");
describe('VCPProtocolService Integration', () => {
    let service;
    let configService;
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                vcp_protocol_service_1.VCPProtocolService,
                {
                    provide: config_1.ConfigService,
                    useValue: {
                        get: jest.fn((key, defaultValue) => {
                            const config = {
                                AI_PROVIDER: 'openai',
                                AI_MODEL: 'gpt-4'
                            };
                            return config[key] || defaultValue;
                        })
                    }
                }
            ]
        }).compile();
        service = module.get(vcp_protocol_service_1.VCPProtocolService);
        configService = module.get(config_1.ConfigService);
    });
    it('应该能获取协议统计信息', () => {
        const stats = service.getProtocolStats();
        expect(stats).toHaveProperty('pendingRequests');
        expect(stats).toHaveProperty('activeEndpoints');
        expect(stats).toHaveProperty('queuedMessages');
        expect(stats).toHaveProperty('activeSubscriptions');
        expect(typeof stats.pendingRequests).toBe('number');
    });
    it('应该能执行健康检查', async () => {
        const health = await service.healthCheck();
        expect(health).toHaveProperty('status');
        expect(['healthy', 'error']).toContain(health.status);
        if (health.status === 'healthy') {
            expect(health).toHaveProperty('details');
        }
    });
    it('应该能获取可用端点', () => {
        const endpoints = service.getAvailableEndpoints();
        expect(Array.isArray(endpoints)).toBe(true);
        // 系统端点应该已经被注册
        expect(endpoints.length).toBeGreaterThan(0);
        // 检查是否有预期的端点
        const aiService = endpoints.find(ep => ep.id === 'ai-service');
        expect(aiService).toBeDefined();
        expect(aiService?.capabilities).toContain('text-generation');
    });
    it('应该能按能力过滤端点', () => {
        const textGenEndpoints = service.getAvailableEndpoints('text-generation');
        expect(Array.isArray(textGenEndpoints)).toBe(true);
        textGenEndpoints.forEach(endpoint => {
            expect(endpoint.capabilities).toContain('text-generation');
        });
    });
    it('应该能注册自定义端点', () => {
        const customEndpoint = {
            id: 'custom-endpoint',
            type: 'tool',
            url: 'http://custom-tool.com',
            capabilities: ['custom-analysis'],
            status: 'online',
            metadata: {
                version: '1.0.0',
                description: 'Custom analysis tool',
                author: 'test',
                lastSeen: new Date()
            }
        };
        expect(() => {
            service.registerEndpoint(customEndpoint);
        }).not.toThrow();
        const endpoints = service.getAvailableEndpoints('custom-analysis');
        expect(endpoints.some(ep => ep.id === 'custom-endpoint')).toBe(true);
    });
    it('应该能注销端点', () => {
        // 先注册一个端点
        const testEndpoint = {
            id: 'test-endpoint-to-remove',
            type: 'service',
            url: 'http://test.com',
            capabilities: ['test-service'],
            status: 'online',
            metadata: {
                version: '1.0.0',
                description: 'Test endpoint',
                author: 'test',
                lastSeen: new Date()
            }
        };
        service.registerEndpoint(testEndpoint);
        // 确认端点已注册
        let endpoints = service.getAvailableEndpoints('test-service');
        expect(endpoints.some(ep => ep.id === 'test-endpoint-to-remove')).toBe(true);
        // 注销端点
        service.unregisterEndpoint('test-endpoint-to-remove');
        // 确认端点已移除
        endpoints = service.getAvailableEndpoints('test-service');
        expect(endpoints.some(ep => ep.id === 'test-endpoint-to-remove')).toBe(false);
    });
    it('应该能调用AI生成工具（模拟）', async () => {
        const prompt = '写一个简短的故事';
        const options = {
            model: 'gpt-4',
            temperature: 0.7,
            maxTokens: 500
        };
        // 由于没有实际的AI服务，这可能会失败或返回模拟结果
        await expect(service.callAIGenerationTool(prompt, options)).rejects.toThrow();
    });
    it('应该能调用分析工具（模拟）', async () => {
        const content = '这是一个测试文本';
        const analysisType = 'sentiment';
        await expect(service.callAnalysisTool(content, analysisType)).rejects.toThrow();
    });
    it('应该能调用翻译工具（模拟）', async () => {
        const text = 'Hello world';
        const targetLanguage = 'zh-CN';
        const result = await service.callTranslationTool(text, targetLanguage);
        // 当前实现可能返回原文本或模拟结果
        expect(typeof result).toBe('string');
    });
    it('应该能执行记忆操作（模拟）', async () => {
        // 这些操作可能会失败，因为没有实际的后端服务
        await expect(service.readMemory('test-key')).rejects.toThrow();
        await expect(service.writeMemory('test-key', 'test-value')).rejects.toThrow();
    });
    it('应该能执行文件操作（模拟）', async () => {
        const fileData = { content: 'test file content' };
        await expect(service.uploadFile(fileData)).rejects.toThrow();
        await expect(service.downloadFile('test-file-id')).rejects.toThrow();
    });
    it('应该能发送叙事生成请求（模拟）', async () => {
        const storyId = 'test-story-123';
        const prompt = '写一个科幻故事';
        const context = { genre: 'sci-fi', length: 'short' };
        const taskId = await service.requestNarrativeGeneration(storyId, prompt, context);
        expect(typeof taskId).toBe('string');
        expect(taskId.length).toBeGreaterThan(0);
    });
    it('应该能发送Agent协作请求（模拟）', async () => {
        const collaborationId = 'test-collab-123';
        const agentIds = ['agent1', 'agent2'];
        const task = { type: 'story-writing', priority: 'high' };
        const resultId = await service.requestAgentCollaboration(collaborationId, agentIds, task);
        expect(typeof resultId).toBe('string');
    });
    it('应该能广播系统事件（模拟）', async () => {
        const eventType = 'system.maintenance';
        const eventData = { message: 'System maintenance scheduled', time: '2024-01-01T00:00:00Z' };
        // 不应该抛出错误
        await expect(service.broadcastSystemEvent(eventType, eventData)).resolves.not.toThrow();
    });
    it('应该能清理过期任务', async () => {
        // 不应该抛出错误
        await expect(service.cleanupExpiredTasks()).resolves.not.toThrow();
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFwxNjY2M1xcRGVza3RvcFxcdHVoZWdcXGFwcHNcXHZjcHRvb2xib3hcXHNyY1xcaW50ZWdyYXRpb24tdGVzdHNcXHZjcC1wcm90b2NvbC1pbnRlZ3JhdGlvbi50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQSwrRUFBK0U7QUFDL0UsY0FBYztBQUNkLDBCQUEwQjtBQUMxQiwrRUFBK0U7O0FBRS9FLDZDQUFxRDtBQUNyRCwyQ0FBOEM7QUFDOUMsMkdBQXFHO0FBRXJHLFFBQVEsQ0FBQyxnQ0FBZ0MsRUFBRSxHQUFHLEVBQUU7SUFDOUMsSUFBSSxPQUEyQixDQUFBO0lBQy9CLElBQUksYUFBNEIsQ0FBQTtJQUVoQyxVQUFVLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDcEIsTUFBTSxNQUFNLEdBQWtCLE1BQU0sY0FBSSxDQUFDLG1CQUFtQixDQUFDO1lBQzNELFNBQVMsRUFBRTtnQkFDVCx5Q0FBa0I7Z0JBQ2xCO29CQUNFLE9BQU8sRUFBRSxzQkFBYTtvQkFDdEIsUUFBUSxFQUFFO3dCQUNSLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBVyxFQUFFLFlBQWtCLEVBQUUsRUFBRTs0QkFDL0MsTUFBTSxNQUFNLEdBQUc7Z0NBQ2IsV0FBVyxFQUFFLFFBQVE7Z0NBQ3JCLFFBQVEsRUFBRSxPQUFPOzZCQUNsQixDQUFBOzRCQUNELE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLFlBQVksQ0FBQTt3QkFDcEMsQ0FBQyxDQUFDO3FCQUNIO2lCQUNGO2FBQ0Y7U0FDRixDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7UUFFWixPQUFPLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBcUIseUNBQWtCLENBQUMsQ0FBQTtRQUM1RCxhQUFhLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBZ0Isc0JBQWEsQ0FBQyxDQUFBO0lBQzFELENBQUMsQ0FBQyxDQUFBO0lBRUYsRUFBRSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7UUFDckIsTUFBTSxLQUFLLEdBQUcsT0FBTyxD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LE1BQU0sTUFBTSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNwRSxDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUMsQ0FBQyxDQUFBIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcMTY2NjNcXERlc2t0b3BcXHR1aGVnXFxhcHBzXFx2Y3B0b29sYm94XFxzcmNcXGludGVncmF0aW9uLXRlc3RzXFx2Y3AtcHJvdG9jb2wtaW50ZWdyYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbi8vIFZDUOWNj+iuruaguOW/g+mbhuaIkOa1i+ivlVxyXG4vLyDpqozor4EgVkNQVG9vbEJveCDljY/orq7moIflh4bnmoTmraPnoa7pm4bmiJBcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuaW1wb3J0IHsgVGVzdCwgVGVzdGluZ01vZHVsZSB9IGZyb20gJ0BuZXN0anMvdGVzdGluZydcclxuaW1wb3J0IHsgQ29uZmlnU2VydmljZSB9IGZyb20gJ0BuZXN0anMvY29uZmlnJ1xyXG5pbXBvcnQgeyBWQ1BQcm90b2NvbFNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi8uLi9wYWNrYWdlcy9jb21tb24tYmFja2VuZC9zcmMvdmNwL3ZjcC1wcm90b2NvbC5zZXJ2aWNlJ1xyXG5cclxuZGVzY3JpYmUoJ1ZDUFByb3RvY29sU2VydmljZSBJbnRlZ3JhdGlvbicsICgpID0+IHtcclxuICBsZXQgc2VydmljZTogVkNQUHJvdG9jb2xTZXJ2aWNlXHJcbiAgbGV0IGNvbmZpZ1NlcnZpY2U6IENvbmZpZ1NlcnZpY2VcclxuXHJcbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBtb2R1bGU6IFRlc3RpbmdNb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xyXG4gICAgICBwcm92aWRlcnM6IFtcclxuICAgICAgICBWQ1BQcm90b2NvbFNlcnZpY2UsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZTogQ29uZmlnU2VydmljZSxcclxuICAgICAgICAgIHVzZVZhbHVlOiB7XHJcbiAgICAgICAgICAgIGdldDogamVzdC5mbigoa2V5OiBzdHJpbmcsIGRlZmF1bHRWYWx1ZT86IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgIEFJX1BST1ZJREVSOiAnb3BlbmFpJyxcclxuICAgICAgICAgICAgICAgIEFJX01PREVMOiAnZ3B0LTQnXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJldHVybiBjb25maWdba2V5XSB8fCBkZWZhdWx0VmFsdWVcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIF1cclxuICAgIH0pLmNvbXBpbGUoKVxyXG5cclxuICAgIHNlcnZpY2UgPSBtb2R1bGUuZ2V0PFZDUFByb3RvY29sU2VydmljZT4oVkNQUHJvdG9jb2xTZXJ2aWNlKVxyXG4gICAgY29uZmlnU2VydmljZSA9IG1vZHVsZS5nZXQ8Q29uZmlnU2VydmljZT4oQ29uZmlnU2VydmljZSlcclxuICB9KVxyXG5cclxuICBpdCgn5bqU6K+l6IO96I635Y+W5Y2P6K6u57uf6K6h5L+h5oGvJywgKCkgPT4ge1xyXG4gICAgY29uc3Qgc3RhdHMgPSBzZXJ2aWNlLmdldFByb3RvY29sU3RhdHMoKVxyXG5cclxuICAgIGV4cGVjdChzdGF0cykudG9IYXZlUHJvcGVydHkoJ3BlbmRpbmdSZXF1ZXN0cycpXHJcbiAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCdhY3RpdmVFbmRwb2ludHMnKVxyXG4gICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgncXVldWVkTWVzc2FnZXMnKVxyXG4gICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgnYWN0aXZlU3Vic2NyaXB0aW9ucycpXHJcbiAgICBleHBlY3QodHlwZW9mIHN0YXRzLnBlbmRpbmdSZXF1ZXN0cykudG9CZSgnbnVtYmVyJylcclxuICB9KVxyXG5cclxuICBpdCgn5bqU6K+l6IO95omn6KGM5YGl5bq35qOA5p+lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgaGVhbHRoID0gYXdhaXQgc2VydmljZS5oZWFsdGhDaGVjaygpXHJcblxyXG4gICAgZXhwZWN0KGhlYWx0aCkudG9IYXZlUHJvcGVydHkoJ3N0YXR1cycpXHJcbiAgICBleHBlY3QoWydoZWFsdGh5JywgJ2Vycm9yJ10pLnRvQ29udGFpbihoZWFsdGguc3RhdHVzKVxyXG5cclxuICAgIGlmIChoZWFsdGguc3RhdHVzID09PSAnaGVhbHRoeScpIHtcclxuICAgICAgZXhwZWN0KGhlYWx0aCkudG9IYXZlUHJvcGVydHkoJ2RldGFpbHMnKVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIGl0KCflupTor6Xog73ojrflj5blj6/nlKjnq6/ngrknLCAoKSA9PiB7XHJcbiAgICBjb25zdCBlbmRwb2ludHMgPSBzZXJ2aWNlLmdldEF2YWlsYWJsZUVuZHBvaW50cygpXHJcblxyXG4gICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoZW5kcG9pbnRzKSkudG9CZSh0cnVlKVxyXG4gICAgLy8g57O757uf56uv54K55bqU6K+l5bey57uP6KKr5rOo5YaMXHJcbiAgICBleHBlY3QoZW5kcG9pbnRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApXHJcblxyXG4gICAgLy8g5qOA5p+l5piv5ZCm5pyJ6aKE5pyf55qE56uv54K5XHJcbiAgICBjb25zdCBhaVNlcnZpY2UgPSBlbmRwb2ludHMuZmluZChlcCA9PiBlcC5pZCA9PT0gJ2FpLXNlcnZpY2UnKVxyXG4gICAgZXhwZWN0KGFpU2VydmljZSkudG9CZURlZmluZWQoKVxyXG4gICAgZXhwZWN0KGFpU2VydmljZT8uY2FwYWJpbGl0aWVzKS50b0NvbnRhaW4oJ3RleHQtZ2VuZXJhdGlvbicpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ+W6lOivpeiDveaMieiDveWKm+i/h+a7pOerr+eCuScsICgpID0+IHtcclxuICAgIGNvbnN0IHRleHRHZW5FbmRwb2ludHMgPSBzZXJ2aWNlLmdldEF2YWlsYWJsZUVuZHBvaW50cygndGV4dC1nZW5lcmF0aW9uJylcclxuXHJcbiAgICBleHBlY3QoQXJyYXkuaXNBcnJheSh0ZXh0R2VuRW5kcG9pbnRzKSkudG9CZSh0cnVlKVxyXG4gICAgdGV4dEdlbkVuZHBvaW50cy5mb3JFYWNoKGVuZHBvaW50ID0+IHtcclxuICAgICAgZXhwZWN0KGVuZHBvaW50LmNhcGFiaWxpdGllcykudG9Db250YWluKCd0ZXh0LWdlbmVyYXRpb24nKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBpdCgn5bqU6K+l6IO95rOo5YaM6Ieq5a6a5LmJ56uv54K5JywgKCkgPT4ge1xyXG4gICAgY29uc3QgY3VzdG9tRW5kcG9pbnQgPSB7XHJcbiAgICAgIGlkOiAnY3VzdG9tLWVuZHBvaW50JyxcclxuICAgICAgdHlwZTogJ3Rvb2wnIGFzIGNvbnN0LFxyXG4gICAgICB1cmw6ICdodHRwOi8vY3VzdG9tLXRvb2wuY29tJyxcclxuICAgICAgY2FwYWJpbGl0aWVzOiBbJ2N1c3RvbS1hbmFseXNpcyddLFxyXG4gICAgICBzdGF0dXM6ICdvbmxpbmUnIGFzIGNvbnN0LFxyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIHZlcnNpb246ICcxLjAuMCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdDdXN0b20gYW5hbHlzaXMgdG9vbCcsXHJcbiAgICAgICAgYXV0aG9yOiAndGVzdCcsXHJcbiAgICAgICAgbGFzdFNlZW46IG5ldyBEYXRlKClcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgIHNlcnZpY2UucmVnaXN0ZXJFbmRwb2ludChjdXN0b21FbmRwb2ludClcclxuICAgIH0pLm5vdC50b1Rocm93KClcclxuXHJcbiAgICBjb25zdCBlbmRwb2ludHMgPSBzZXJ2aWNlLmdldEF2YWlsYWJsZUVuZHBvaW50cygnY3VzdG9tLWFuYWx5c2lzJylcclxuICAgIGV4cGVjdChlbmRwb2ludHMuc29tZShlcCA9PiBlcC5pZCA9PT0gJ2N1c3RvbS1lbmRwb2ludCcpKS50b0JlKHRydWUpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ+W6lOivpeiDveazqOmUgOerr+eCuScsICgpID0+IHtcclxuICAgIC8vIOWFiOazqOWGjOS4gOS4querr+eCuVxyXG4gICAgY29uc3QgdGVzdEVuZHBvaW50ID0ge1xyXG4gICAgICBpZDogJ3Rlc3QtZW5kcG9pbnQtdG8tcmVtb3ZlJyxcclxuICAgICAgdHlwZTogJ3NlcnZpY2UnIGFzIGNvbnN0LFxyXG4gICAgICB1cmw6ICdodHRwOi8vdGVzdC5jb20nLFxyXG4gICAgICBjYXBhYmlsaXRpZXM6IFsndGVzdC1zZXJ2aWNlJ10sXHJcbiAgICAgIHN0YXR1czogJ29ubGluZScgYXMgY29uc3QsXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3QgZW5kcG9pbnQnLFxyXG4gICAgICAgIGF1dGhvcjogJ3Rlc3QnLFxyXG4gICAgICAgIGxhc3RTZWVuOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXJ2aWNlLnJlZ2lzdGVyRW5kcG9pbnQodGVzdEVuZHBvaW50KVxyXG5cclxuICAgIC8vIOehruiupOerr+eCueW3suazqOWGjFxyXG4gICAgbGV0IGVuZHBvaW50cyA9IHNlcnZpY2UuZ2V0QXZhaWxhYmxlRW5kcG9pbnRzKCd0ZXN0LXNlcnZpY2UnKVxyXG4gICAgZXhwZWN0KGVuZHBvaW50cy5zb21lKGVwID0+IGVwLmlkID09PSAndGVzdC1lbmRwb2ludC10by1yZW1vdmUnKSkudG9CZSh0cnVlKVxyXG5cclxuICAgIC8vIOazqOmUgOerr+eCuVxyXG4gICAgc2VydmljZS51bnJlZ2lzdGVyRW5kcG9pbnQoJ3Rlc3QtZW5kcG9pbnQtdG8tcmVtb3ZlJylcclxuXHJcbiAgICAvLyDnoa7orqTnq6/ngrnlt7Lnp7vpmaRcclxuICAgIGVuZHBvaW50cyA9IHNlcnZpY2UuZ2V0QXZhaWxhYmxlRW5kcG9pbnRzKCd0ZXN0LXNlcnZpY2UnKVxyXG4gICAgZXhwZWN0KGVuZHBvaW50cy5zb21lKGVwID0+IGVwLmlkID09PSAndGVzdC1lbmRwb2ludC10by1yZW1vdmUnKSkudG9CZShmYWxzZSlcclxuICB9KVxyXG5cclxuICBpdCgn5bqU6K+l6IO96LCD55SoQUnnlJ/miJDlt6XlhbfvvIjmqKHmi5/vvIknLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBwcm9tcHQgPSAn5YaZ5LiA5Liq566A55+t55qE5pWF5LqLJ1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgbW9kZWw6ICdncHQtNCcsXHJcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXHJcbiAgICAgIG1heFRva2VuczogNTAwXHJcbiAgICB9XHJcblxyXG4gICAgLy8g55Sx5LqO5rKh5pyJ5a6e6ZmF55qEQUnmnI3liqHvvIzov5nlj6/og73kvJrlpLHotKXmiJbov5Tlm57mqKHmi5/nu5PmnpxcclxuICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmNhbGxBSUdlbmVyYXRpb25Ub29sKHByb21wdCwgb3B0aW9ucykpLnJlamVjdHMudG9UaHJvdygpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ+W6lOivpeiDveiwg+eUqOWIhuaekOW3peWFt++8iOaooeaLn++8iScsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IGNvbnRlbnQgPSAn6L+Z5piv5LiA5Liq5rWL6K+V5paH5pysJ1xyXG4gICAgY29uc3QgYW5hbHlzaXNUeXBlID0gJ3NlbnRpbWVudCdcclxuXHJcbiAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5jYWxsQW5hbHlzaXNUb29sKGNvbnRlbnQsIGFuYWx5c2lzVHlwZSkpLnJlamVjdHMudG9UaHJvdygpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ+W6lOivpeiDveiwg+eUqOe/u+ivkeW3peWFt++8iOaooeaLn++8iScsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHRleHQgPSAnSGVsbG8gd29ybGQnXHJcbiAgICBjb25zdCB0YXJnZXRMYW5ndWFnZSA9ICd6aC1DTidcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmNhbGxUcmFuc2xhdGlvblRvb2wodGV4dCwgdGFyZ2V0TGFuZ3VhZ2UpXHJcbiAgICAvLyDlvZPliY3lrp7njrDlj6/og73ov5Tlm57ljp/mlofmnKzmiJbmqKHmi5/nu5PmnpxcclxuICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0KS50b0JlKCdzdHJpbmcnKVxyXG4gIH0pXHJcblxyXG4gIGl0KCflupTor6Xog73miafooYzorrDlv4bmk43kvZzvvIjmqKHmi5/vvIknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAvLyDov5nkupvmk43kvZzlj6/og73kvJrlpLHotKXvvIzlm6DkuLrmsqHmnInlrp7pmYXnmoTlkI7nq6/mnI3liqFcclxuICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLnJlYWRNZW1vcnkoJ3Rlc3Qta2V5JykpLnJlamVjdHMudG9UaHJvdygpXHJcbiAgICBhd2FpdCBleHBlY3Qoc2VydmljZS53cml0ZU1lbW9yeSgndGVzdC1rZXknLCAndGVzdC12YWx1ZScpKS5yZWplY3RzLnRvVGhyb3coKVxyXG4gIH0pXHJcblxyXG4gIGl0KCflupTor6Xog73miafooYzmlofku7bmk43kvZzvvIjmqKHmi5/vvIknLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBmaWxlRGF0YSA9IHsgY29udGVudDogJ3Rlc3QgZmlsZSBjb250ZW50JyB9XHJcblxyXG4gICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UudXBsb2FkRmlsZShmaWxlRGF0YSkpLnJlamVjdHMudG9UaHJvdygpXHJcbiAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5kb3dubG9hZEZpbGUoJ3Rlc3QtZmlsZS1pZCcpKS5yZWplY3RzLnRvVGhyb3coKVxyXG4gIH0pXHJcblxyXG4gIGl0KCflupTor6Xog73lj5HpgIHlj5nkuovnlJ/miJDor7fmsYLvvIjmqKHmi5/vvIknLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBzdG9yeUlkID0gJ3Rlc3Qtc3RvcnktMTIzJ1xyXG4gICAgY29uc3QgcHJvbXB0ID0gJ+WGmeS4gOS4quenkeW5u+aVheS6iydcclxuICAgIGNvbnN0IGNvbnRleHQgPSB7IGdlbnJlOiAnc2NpLWZpJywgbGVuZ3RoOiAnc2hvcnQnIH1cclxuXHJcbiAgICBjb25zdCB0YXNrSWQgPSBhd2FpdCBzZXJ2aWNlLnJlcXVlc3ROYXJyYXRpdmVHZW5lcmF0aW9uKHN0b3J5SWQsIHByb21wdCwgY29udGV4dClcclxuICAgIGV4cGVjdCh0eXBlb2YgdGFza0lkKS50b0JlKCdzdHJpbmcnKVxyXG4gICAgZXhwZWN0KHRhc2tJZC5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKVxyXG4gIH0pXHJcblxyXG4gIGl0KCflupTor6Xog73lj5HpgIFBZ2VudOWNj+S9nOivt+axgu+8iOaooeaLn++8iScsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IGNvbGxhYm9yYXRpb25JZCA9ICd0ZXN0LWNvbGxhYi0xMjMnXHJcbiAgICBjb25zdCBhZ2VudElkcyA9IFsnYWdlbnQxJywgJ2FnZW50MiddXHJcbiAgICBjb25zdCB0YXNrID0geyB0eXBlOiAnc3Rvcnktd3JpdGluZycsIHByaW9yaXR5OiAnaGlnaCcgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdElkID0gYXdhaXQgc2VydmljZS5yZXF1ZXN0QWdlbnRDb2xsYWJvcmF0aW9uKGNvbGxhYm9yYXRpb25JZCwgYWdlbnRJZHMsIHRhc2spXHJcbiAgICBleHBlY3QodHlwZW9mIHJlc3VsdElkKS50b0JlKCdzdHJpbmcnKVxyXG4gIH0pXHJcblxyXG4gIGl0KCflupTor6Xog73lub/mkq3ns7vnu5/kuovku7bvvIjmqKHmi5/vvIknLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBldmVudFR5cGUgPSAnc3lzdGVtLm1haW50ZW5hbmNlJ1xyXG4gICAgY29uc3QgZXZlbnREYXRhID0geyBtZXNzYWdlOiAnU3lzdGVtIG1haW50ZW5hbmNlIHNjaGVkdWxlZCcsIHRpbWU6ICcyMDI0LTAxLTAxVDAwOjAwOjAwWicgfVxyXG5cclxuICAgIC8vIOS4jeW6lOivpeaKm+WHuumUmeivr1xyXG4gICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuYnJvYWRjYXN0U3lzdGVtRXZlbnQoZXZlbnRUeXBlLCBldmVudERhdGEpKS5yZXNvbHZlcy5ub3QudG9UaHJvdygpXHJcbiAgfSlcclxuXHJcbiAgaXQoJ+W6lOivpeiDvea4heeQhui/h+acn+S7u+WKoScsIGFzeW5jICgpID0+IHtcclxuICAgIC8vIOS4jeW6lOivpeaKm+WHuumUmeivr1xyXG4gICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuY2xlYW51cEV4cGlyZWRUYXNrcygpKS5yZXNvbHZlcy5ub3QudG9UaHJvdygpXHJcbiAgfSlcclxufSlcclxuIl0sInZlcnNpb24iOjN9