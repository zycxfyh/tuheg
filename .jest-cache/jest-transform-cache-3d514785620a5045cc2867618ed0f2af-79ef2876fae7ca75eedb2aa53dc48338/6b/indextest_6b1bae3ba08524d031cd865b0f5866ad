02c4defc5bff09345a2facd14d21b422
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const index_1 = require("./index");
describe('MyTestPluginPlugin', () => {
    let plugin;
    let mockContext;
    beforeEach(() => {
        mockContext = {
            pluginId: 'my-test-plugin',
            config: {},
            logger: {
                info: jest.fn(),
                warn: jest.fn(),
                error: jest.fn(),
                debug: jest.fn(),
            },
        };
        plugin = new index_1.MyTestPluginPlugin();
    });
    describe('manifest', () => {
        it('should have correct plugin metadata', () => {
            expect(plugin.manifest.id).toBe('my-test-plugin');
            expect(plugin.manifest.name).toBe('my-test-plugin');
            expect(plugin.manifest.version).toBe('1.0.0');
            expect(plugin.manifest.description).toBe('A test plugin for VCPToolBox');
            expect(plugin.manifest.author).toBe('Test Author');
        });
        it('should contribute AI tools', () => {
            expect(plugin.manifest.contributes?.aiTools).toHaveLength(1);
            expect(plugin.manifest.contributes?.aiTools?.[0].id).toBe('my-test-plugin');
            expect(plugin.manifest.contributes?.aiTools?.[0].name).toBe('my-test-plugin Tool');
        });
    });
    describe('activate', () => {
        it('should activate successfully', async () => {
            await plugin.activate(mockContext);
            expect(mockContext.logger.info).toHaveBeenCalledWith('my-test-plugin plugin activated');
        });
    });
    describe('deactivate', () => {
        it('should deactivate successfully', async () => {
            await plugin.deactivate();
            // Add assertions for cleanup logic if any
        });
    });
    describe('tool execution', () => {
        it('should execute my-test-plugin tool successfully', async () => {
            const input = { input: 'test input' };
            const result = await (plugin.manifest.contributes?.aiTools?.[0].execute)(input);
            expect(result).toHaveProperty('result');
            expect(result.result).toContain('Processed input: test input');
        });
        it('should handle tool execution errors', async () => {
            // Test error handling by mocking internal functions or providing invalid input
            // This depends on the actual implementation logic
        });
    });
    describe('factory function', () => {
        it('should create plugin instance', () => {
            const instance = (0, index_1.createMyTestPluginPlugin)(mockContext);
            expect(instance).toBeInstanceOf(index_1.MyTestPluginPlugin);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFwxNjY2M1xcRGVza3RvcFxcdHVoZWdcXHRvb2xzXFxwbHVnaW4tZ2VuZXJhdG9yXFxteS10ZXN0LXBsdWdpblxcc3JjXFxpbmRleC50ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsbUNBQXNFO0FBRXRFLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7SUFDbEMsSUFBSSxNQUEwQixDQUFBO0lBQzlCLElBQUksV0FBZ0IsQ0FBQTtJQUVwQixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2QsV0FBVyxHQUFHO1lBQ1osUUFBUSxFQUFFLGdCQUFnQjtZQUMxQixNQUFNLEVBQUUsRUFBRTtZQUNWLE1BQU0sRUFBRTtnQkFDTixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDZixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDZixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtnQkFDaEIsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7YUFDakI7U0FDRixDQUFBO1FBRUQsTUFBTSxHQUFHLElBQUksMEJBQWtCLEVBQUUsQ0FBQTtJQUNuQyxDQUFDLENBQUMsQ0FBQTtJQUVGLFFBQVEsQ0FBQyxVQUFVLEVBQUUsR0FBRyxFQUFFO1FBQ3hCLEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxHQUFHLEVBQUU7WUFDN0MsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUE7WUFDakQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUE7WUFDbkQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBQzdDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxDQUFBO1lBQ3hFLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQTtRQUNwRCxDQUFDLENBQUMsQ0FBQTtRQUVGLEVBQUUsQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUU7WUFDcEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQTtZQUM1RCxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUE7WUFDM0UsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO1FBQ3BGLENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7SUFFRixRQUFRLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtRQUN4QixFQUFFLENBQUMsOEJBQThCLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDNUMsTUFBTSxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFBO1lBQ2xDLE1BQU0sQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLG9CQUFvQixDQUFDLGlDQUFpQyxDQUFDLENBQUE7UUFDekYsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDLENBQUMsQ0FBQTtJQUVGLFFBQVEsQ0FBQyxZQUFZLEVBQUUsR0FBRyxFQUFFO1FBQzFCLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM5QyxNQUFNLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQTtZQUN6QiwwQ0FBMEM7UUFDNUMsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDLENBQUMsQ0FBQTtJQUVGLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxHQUFHLEVBQUU7UUFDOUIsRUFBRSxDQUFDLGlEQUFpRCxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQy9ELE1BQU0sS0FBSyxHQUFHLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxDQUFBO1lBQ3JDLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFlLENBQUEsQ0FBQyxLQUFLLENBQUMsQ0FBQTtZQUV0RixNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1lBQ3ZDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLDZCQUE2QixDQUFDLENBQUE7UUFDaEUsQ0FBQyxDQUFDLENBQUE7UUFFRixFQUFFLENBQUMscUNBQXFDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDbkQsK0VBQStFO1lBQy9FLGtEQUFrRDtRQUNwRCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsUUFBUSxDQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRTtRQUNoQyxFQUFFLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFO1lBQ3ZDLE1BQU0sUUFBUSxHQUFHLElBQUEsZ0NBQXdCLEVBQUMsV0FBVyxDQUFDLENBQUE7WUFDdEQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLGNBQWMsQ0FBQywwQkFBa0IsQ0FBQyxDQUFBO1FBQ3JELENBQUMsQ0FBQyxDQUFBO0lBQ0osQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXDE2NjYzXFxEZXNrdG9wXFx0dWhlZ1xcdG9vbHNcXHBsdWdpbi1nZW5lcmF0b3JcXG15LXRlc3QtcGx1Z2luXFxzcmNcXGluZGV4LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlTXlUZXN0UGx1Z2luUGx1Z2luLCBNeVRlc3RQbHVnaW5QbHVnaW4gfSBmcm9tICcuL2luZGV4J1xuXG5kZXNjcmliZSgnTXlUZXN0UGx1Z2luUGx1Z2luJywgKCkgPT4ge1xuICBsZXQgcGx1Z2luOiBNeVRlc3RQbHVnaW5QbHVnaW5cbiAgbGV0IG1vY2tDb250ZXh0OiBhbnlcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBtb2NrQ29udGV4dCA9IHtcbiAgICAgIHBsdWdpbklkOiAnbXktdGVzdC1wbHVnaW4nLFxuICAgICAgY29uZmlnOiB7fSxcbiAgICAgIGxvZ2dlcjoge1xuICAgICAgICBpbmZvOiBqZXN0LmZuKCksXG4gICAgICAgIHdhcm46IGplc3QuZm4oKSxcbiAgICAgICAgZXJyb3I6IGplc3QuZm4oKSxcbiAgICAgICAgZGVidWc6IGplc3QuZm4oKSxcbiAgICAgIH0sXG4gICAgfVxuXG4gICAgcGx1Z2luID0gbmV3IE15VGVzdFBsdWdpblBsdWdpbigpXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ21hbmlmZXN0JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBjb3JyZWN0IHBsdWdpbiBtZXRhZGF0YScsICgpID0+IHtcbiAgICAgIGV4cGVjdChwbHVnaW4ubWFuaWZlc3QuaWQpLnRvQmUoJ215LXRlc3QtcGx1Z2luJylcbiAgICAgIGV4cGVjdChwbHVnaW4ubWFuaWZlc3QubmFtZSkudG9CZSgnbXktdGVzdC1wbHVnaW4nKVxuICAgICAgZXhwZWN0KHBsdWdpbi5tYW5pZmVzdC52ZXJzaW9uKS50b0JlKCcxLjAuMCcpXG4gICAgICBleHBlY3QocGx1Z2luLm1hbmlmZXN0LmRlc2NyaXB0aW9uKS50b0JlKCdBIHRlc3QgcGx1Z2luIGZvciBWQ1BUb29sQm94JylcbiAgICAgIGV4cGVjdChwbHVnaW4ubWFuaWZlc3QuYXV0aG9yKS50b0JlKCdUZXN0IEF1dGhvcicpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgY29udHJpYnV0ZSBBSSB0b29scycsICgpID0+IHtcbiAgICAgIGV4cGVjdChwbHVnaW4ubWFuaWZlc3QuY29udHJpYnV0ZXM/LmFpVG9vbHMpLnRvSGF2ZUxlbmd0aCgxKVxuICAgICAgZXhwZWN0KHBsdWdpbi5tYW5pZmVzdC5jb250cmlidXRlcz8uYWlUb29scz8uWzBdLmlkKS50b0JlKCdteS10ZXN0LXBsdWdpbicpXG4gICAgICBleHBlY3QocGx1Z2luLm1hbmlmZXN0LmNvbnRyaWJ1dGVzPy5haVRvb2xzPy5bMF0ubmFtZSkudG9CZSgnbXktdGVzdC1wbHVnaW4gVG9vbCcpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnYWN0aXZhdGUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhY3RpdmF0ZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBwbHVnaW4uYWN0aXZhdGUobW9ja0NvbnRleHQpXG4gICAgICBleHBlY3QobW9ja0NvbnRleHQubG9nZ2VyLmluZm8pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdteS10ZXN0LXBsdWdpbiBwbHVnaW4gYWN0aXZhdGVkJylcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdkZWFjdGl2YXRlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGVhY3RpdmF0ZSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBwbHVnaW4uZGVhY3RpdmF0ZSgpXG4gICAgICAvLyBBZGQgYXNzZXJ0aW9ucyBmb3IgY2xlYW51cCBsb2dpYyBpZiBhbnlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCd0b29sIGV4ZWN1dGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGV4ZWN1dGUgbXktdGVzdC1wbHVnaW4gdG9vbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnB1dCA9IHsgaW5wdXQ6ICd0ZXN0IGlucHV0JyB9XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAocGx1Z2luLm1hbmlmZXN0LmNvbnRyaWJ1dGVzPy5haVRvb2xzPy5bMF0uZXhlY3V0ZSBhcyBhbnkpKGlucHV0KVxuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgncmVzdWx0JylcbiAgICAgIGV4cGVjdChyZXN1bHQucmVzdWx0KS50b0NvbnRhaW4oJ1Byb2Nlc3NlZCBpbnB1dDogdGVzdCBpbnB1dCcpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHRvb2wgZXhlY3V0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgZXJyb3IgaGFuZGxpbmcgYnkgbW9ja2luZyBpbnRlcm5hbCBmdW5jdGlvbnMgb3IgcHJvdmlkaW5nIGludmFsaWQgaW5wdXRcbiAgICAgIC8vIFRoaXMgZGVwZW5kcyBvbiB0aGUgYWN0dWFsIGltcGxlbWVudGF0aW9uIGxvZ2ljXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnZmFjdG9yeSBmdW5jdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBwbHVnaW4gaW5zdGFuY2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnN0YW5jZSA9IGNyZWF0ZU15VGVzdFBsdWdpblBsdWdpbihtb2NrQ29udGV4dClcbiAgICAgIGV4cGVjdChpbnN0YW5jZSkudG9CZUluc3RhbmNlT2YoTXlUZXN0UGx1Z2luUGx1Z2luKVxuICAgIH0pXG4gIH0pXG59KVxuIl0sInZlcnNpb24iOjN9