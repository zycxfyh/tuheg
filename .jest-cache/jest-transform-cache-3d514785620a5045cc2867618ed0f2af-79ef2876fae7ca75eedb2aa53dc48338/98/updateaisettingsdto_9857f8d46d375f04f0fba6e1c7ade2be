66a47fb346ba20e50084f10553a17ea4
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.testAiConnectionSchema = exports.updateAiSettingsSchema = void 0;
// apps/backend/apps/nexus-engine/src/settings/dto/update-ai-settings.dto.ts
const zod_1 = require("zod");
const create_ai_settings_dto_1 = require("./create-ai-settings.dto");
exports.updateAiSettingsSchema = zod_1.z.object({
    provider: create_ai_settings_dto_1.providerSchema.optional(),
    apiKey: create_ai_settings_dto_1.apiKeySchema.optional(),
    modelId: create_ai_settings_dto_1.modelIdSchema.optional(),
    baseUrl: create_ai_settings_dto_1.baseUrlSchema.optional().nullable(),
    roles: zod_1.z
        .array(create_ai_settings_dto_1.roleNameSchema)
        .max(20, {
        message: 'No more than 20 roles can be assigned to a configuration.',
    })
        .optional(),
});
exports.testAiConnectionSchema = zod_1.z.object({
    provider: create_ai_settings_dto_1.providerSchema,
    apiKey: create_ai_settings_dto_1.apiKeySchema,
    baseUrl: create_ai_settings_dto_1.baseUrlSchema.optional().nullable(),
    // modelId 可以可选，用于特定 provider 的探测
    modelId: create_ai_settings_dto_1.modelIdSchema.optional(),
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFwxNjY2M1xcRGVza3RvcFxcdHVoZWdcXHBhY2thZ2VzXFxuYXJyYXRpdmUtZG9tYWluXFxzcmNcXGR0b1xcdXBkYXRlLWFpLXNldHRpbmdzLmR0by50cyIsIm1hcHBpbmdzIjoiOzs7QUFBQSw0RUFBNEU7QUFDNUUsNkJBQXVCO0FBQ3ZCLHFFQU1pQztBQUVwQixRQUFBLHNCQUFzQixHQUFHLE9BQUMsQ0FBQyxNQUFNLENBQUM7SUFDN0MsUUFBUSxFQUFFLHVDQUFjLENBQUMsUUFBUSxFQUFFO0lBQ25DLE1BQU0sRUFBRSxxQ0FBWSxDQUFDLFFBQVEsRUFBRTtJQUMvQixPQUFPLEVBQUUsc0NBQWEsQ0FBQyxRQUFRLEVBQUU7SUFDakMsT0FBTyxFQUFFLHNDQUFhLENBQUMsUUFBUSxFQUFFLENBQUMsUUFBUSxFQUFFO0lBQzVDLEtBQUssRUFBRSxPQUFDO1NBQ0wsS0FBSyxDQUFDLHVDQUFjLENBQUM7U0FDckIsR0FBRyxDQUFDLEVBQUUsRUFBRTtRQUNQLE9BQU8sRUFBRSwyREFBMkQ7S0FDckUsQ0FBQztTQUNELFFBQVEsRUFBRTtDQUNkLENBQUMsQ0FBQTtBQUVXLFFBQUEsc0JBQXNCLEdBQUcsT0FBQyxDQUFDLE1BQU0sQ0FBQztJQUM3QyxRQUFRLEVBQUUsdUNBQWM7SUFDeEIsTUFBTSxFQUFFLHFDQUFZO0lBQ3BCLE9BQU8sRUFBRSxzQ0FBYSxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsRUFBRTtJQUM1QyxpQ0FBaUM7SUFDakMsT0FBTyxFQUFFLHNDQUFhLENBQUMsUUFBUSxFQUFFO0NBQ2xDLENBQUMsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXDE2NjYzXFxEZXNrdG9wXFx0dWhlZ1xccGFja2FnZXNcXG5hcnJhdGl2ZS1kb21haW5cXHNyY1xcZHRvXFx1cGRhdGUtYWktc2V0dGluZ3MuZHRvLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGFwcHMvYmFja2VuZC9hcHBzL25leHVzLWVuZ2luZS9zcmMvc2V0dGluZ3MvZHRvL3VwZGF0ZS1haS1zZXR0aW5ncy5kdG8udHNcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5pbXBvcnQge1xuICBhcGlLZXlTY2hlbWEsXG4gIGJhc2VVcmxTY2hlbWEsXG4gIG1vZGVsSWRTY2hlbWEsXG4gIHByb3ZpZGVyU2NoZW1hLFxuICByb2xlTmFtZVNjaGVtYSxcbn0gZnJvbSAnLi9jcmVhdGUtYWktc2V0dGluZ3MuZHRvJ1xuXG5leHBvcnQgY29uc3QgdXBkYXRlQWlTZXR0aW5nc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgcHJvdmlkZXI6IHByb3ZpZGVyU2NoZW1hLm9wdGlvbmFsKCksXG4gIGFwaUtleTogYXBpS2V5U2NoZW1hLm9wdGlvbmFsKCksXG4gIG1vZGVsSWQ6IG1vZGVsSWRTY2hlbWEub3B0aW9uYWwoKSxcbiAgYmFzZVVybDogYmFzZVVybFNjaGVtYS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gIHJvbGVzOiB6XG4gICAgLmFycmF5KHJvbGVOYW1lU2NoZW1hKVxuICAgIC5tYXgoMjAsIHtcbiAgICAgIG1lc3NhZ2U6ICdObyBtb3JlIHRoYW4gMjAgcm9sZXMgY2FuIGJlIGFzc2lnbmVkIHRvIGEgY29uZmlndXJhdGlvbi4nLFxuICAgIH0pXG4gICAgLm9wdGlvbmFsKCksXG59KVxuXG5leHBvcnQgY29uc3QgdGVzdEFpQ29ubmVjdGlvblNjaGVtYSA9IHoub2JqZWN0KHtcbiAgcHJvdmlkZXI6IHByb3ZpZGVyU2NoZW1hLFxuICBhcGlLZXk6IGFwaUtleVNjaGVtYSxcbiAgYmFzZVVybDogYmFzZVVybFNjaGVtYS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gIC8vIG1vZGVsSWQg5Y+v5Lul5Y+v6YCJ77yM55So5LqO54m55a6aIHByb3ZpZGVyIOeahOaOoua1i1xuICBtb2RlbElkOiBtb2RlbElkU2NoZW1hLm9wdGlvbmFsKCksXG59KVxuXG5leHBvcnQgdHlwZSBVcGRhdGVBaVNldHRpbmdzRHRvID0gei5pbmZlcjx0eXBlb2YgdXBkYXRlQWlTZXR0aW5nc1NjaGVtYT5cbmV4cG9ydCB0eXBlIFRlc3RBaUNvbm5lY3Rpb25EdG8gPSB6LmluZmVyPHR5cGVvZiB0ZXN0QWlDb25uZWN0aW9uU2NoZW1hPlxuIl0sInZlcnNpb24iOjN9