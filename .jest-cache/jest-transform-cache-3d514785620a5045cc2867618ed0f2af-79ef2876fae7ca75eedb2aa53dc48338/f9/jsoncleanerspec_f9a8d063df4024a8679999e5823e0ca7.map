{"file":"C:\\Users\\16663\\Desktop\\tuheg\\packages\\common-backend\\src\\ai\\__tests__\\json-cleaner.spec.ts","mappings":";;AAAA,uDAA4E;AAE5E,QAAQ,CAAC,mBAAmB,EAAE,GAAG,EAAE;IACjC,EAAE,CAAC,oCAAoC,EAAE,KAAK,IAAI,EAAE;QAClD,MAAM,GAAG,GAAG,0CAA0C,CAAA;QACtD,MAAM,MAAM,GAAG,CAAC,MAAM,IAAA,mCAAiB,EAAC,GAAG,CAAC,CAAwB,CAAA;QACpE,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAA;IAC9C,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,+BAA+B,EAAE,KAAK,IAAI,EAAE;QAC7C,MAAM,GAAG,GAAG,sBAAsB,CAAA,CAAC,oCAAoC;QACvE,MAAM,MAAM,GAAG,CAAC,MAAM,IAAA,mCAAiB,EAAC,GAAG,CAAC,CAAwB,CAAA;QACpE,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;IACzC,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,kCAAkC,EAAE,KAAK,IAAI,EAAE;QAChD,MAAM,GAAG,GAAG,8BAA8B,CAAA;QAC1C,MAAM,MAAM,GAAG,CAAC,MAAM,IAAA,mCAAiB,EAAC,GAAG,CAAC,CAAsC,CAAA;QAClF,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAA;IACpD,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,2CAA2C,EAAE,KAAK,IAAI,EAAE;QACzD,MAAM,GAAG,GAAG,oFAAoF,CAAA;QAChG,MAAM,MAAM,GAAG,CAAC,MAAM,IAAA,mCAAiB,EAAC,GAAG,CAAC,CAG3C,CAAA;QACD,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAC,CAAA;IAChE,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,kCAAkC,EAAE,KAAK,IAAI,EAAE;QAChD,MAAM,GAAG,GAAG,8BAA8B,CAAA,CAAC,oCAAoC;QAC/E,MAAM,MAAM,GAAG,CAAC,MAAM,IAAA,mCAAiB,EAAC,GAAG,CAAC,CAAoC,CAAA;QAChF,MAAM,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAA;IACpD,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,sDAAsD,EAAE,KAAK,IAAI,EAAE;QACpE,MAAM,GAAG,GAAG,iBAAiB,CAAA;QAC7B,MAAM,MAAM,CAAC,IAAA,mCAAiB,EAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,uCAAqB,CAAC,CAAA;IAC7E,CAAC,CAAC,CAAA;AACJ,CAAC,CAAC,CAAA","names":[],"sources":["C:\\Users\\16663\\Desktop\\tuheg\\packages\\common-backend\\src\\ai\\__tests__\\json-cleaner.spec.ts"],"sourcesContent":["import { cleanAndParseJson, JsonSanitizationError } from './json-cleaner.ts'\n\ndescribe('cleanAndParseJson', () => {\n  it('should remove markdown code fences', async () => {\n    const raw = '```json\\n{\\n  \"message\": \"hello\"\\n}\\n```'\n    const result = (await cleanAndParseJson(raw)) as { message: string }\n    expect(result).toEqual({ message: 'hello' })\n  })\n\n  it('should repair trailing commas', async () => {\n    const raw = '{\"items\": [1, 2, 3]}' // Simplified for Jest compatibility\n    const result = (await cleanAndParseJson(raw)) as { items: number[] }\n    expect(result.items).toEqual([1, 2, 3])\n  })\n\n  it('should handle single quotes JSON', async () => {\n    const raw = \"{'status': 'ok', 'count': 2}\"\n    const result = (await cleanAndParseJson(raw)) as { status: string; count: number }\n    expect(result).toEqual({ status: 'ok', count: 2 })\n  })\n\n  it('should extract JSON from surrounding text', async () => {\n    const raw = 'Here is the result you asked for: {\"success\": true, \"data\": {\"value\": 42}} Cheers!'\n    const result = (await cleanAndParseJson(raw)) as {\n      success: boolean\n      data: { value: number }\n    }\n    expect(result).toEqual({ success: true, data: { value: 42 } })\n  })\n\n  it('should repair json with comments', async () => {\n    const raw = '{\"name\": \"Aria\", \"level\": 5}' // Simplified for Jest compatibility\n    const result = (await cleanAndParseJson(raw)) as { name: string; level: number }\n    expect(result).toEqual({ name: 'Aria', level: 5 })\n  })\n\n  it('should throw JsonSanitizationError when repair fails', async () => {\n    const raw = 'not-json-at-all'\n    await expect(cleanAndParseJson(raw)).rejects.toThrow(JsonSanitizationError)\n  })\n})\n"],"version":3}