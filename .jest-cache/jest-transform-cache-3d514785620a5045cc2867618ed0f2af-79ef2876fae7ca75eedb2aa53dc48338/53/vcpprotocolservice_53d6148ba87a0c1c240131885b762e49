b45a8e04fa3dbc569ffe686bae4369d4
"use strict";
// ============================================================================
// VCP协议核心服务集成
// 集成 VCPToolBox 的统一交互标准到创世星环
// ============================================================================
var __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {
    function accept(f) { if (f !== void 0 && typeof f !== "function") throw new TypeError("Function expected"); return f; }
    var kind = contextIn.kind, key = kind === "getter" ? "get" : kind === "setter" ? "set" : "value";
    var target = !descriptorIn && ctor ? contextIn["static"] ? ctor : ctor.prototype : null;
    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});
    var _, done = false;
    for (var i = decorators.length - 1; i >= 0; i--) {
        var context = {};
        for (var p in contextIn) context[p] = p === "access" ? {} : contextIn[p];
        for (var p in contextIn.access) context.access[p] = contextIn.access[p];
        context.addInitializer = function (f) { if (done) throw new TypeError("Cannot add initializers after decoration has completed"); extraInitializers.push(accept(f || null)); };
        var result = (0, decorators[i])(kind === "accessor" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);
        if (kind === "accessor") {
            if (result === void 0) continue;
            if (result === null || typeof result !== "object") throw new TypeError("Object expected");
            if (_ = accept(result.get)) descriptor.get = _;
            if (_ = accept(result.set)) descriptor.set = _;
            if (_ = accept(result.init)) initializers.unshift(_);
        }
        else if (_ = accept(result)) {
            if (kind === "field") initializers.unshift(_);
            else descriptor[key] = _;
        }
    }
    if (target) Object.defineProperty(target, contextIn.name, descriptor);
    done = true;
};
var __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {
    var useValue = arguments.length > 2;
    for (var i = 0; i < initializers.length; i++) {
        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);
    }
    return useValue ? value : void 0;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.VCPProtocolService = void 0;
const common_1 = require("@nestjs/common");
const VCPProtocol_1 = require("../../../apps/vcptoolbox/src/modules/communication/VCPProtocol");
let VCPProtocolService = (() => {
    let _classDecorators = [(0, common_1.Injectable)()];
    let _classDescriptor;
    let _classExtraInitializers = [];
    let _classThis;
    var VCPProtocolService = class {
        static { _classThis = this; }
        static {
            const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(null) : void 0;
            __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
            VCPProtocolService = _classThis = _classDescriptor.value;
            if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
            __runInitializers(_classThis, _classExtraInitializers);
        }
        configService;
        logger = new common_1.Logger(VCPProtocolService.name);
        constructor(configService) {
            this.configService = configService;
        }
        async onModuleInit() {
            await this.initializeVCPProtocol();
            this.setupProtocolHandlers();
            this.registerSystemEndpoints();
            this.logger.log('VCP协议服务已初始化');
        }
        // ==================== 协议初始化 ====================
        /**
         * 初始化VCP协议
         */
        async initializeVCPProtocol() {
            // 设置协议事件监听器
            VCPProtocol_1.vcpProtocol.on('message', (message) => {
                this.logger.debug(`VCP消息接收: ${message.action}`);
            });
            VCPProtocol_1.vcpProtocol.on('error', (error) => {
                this.logger.error('VCP协议错误:', error);
            });
            this.logger.log('VCP协议核心已初始化');
        }
        /**
         * 设置协议处理器
         */
        setupProtocolHandlers() {
            // 订阅重要的协议事件
            VCPProtocol_1.vcpProtocol.subscribe('tool.execution', (message) => {
                this.handleToolExecutionEvent(message);
            });
            VCPProtocol_1.vcpProtocol.subscribe('agent.collaboration', (message) => {
                this.handleAgentCollaborationEvent(message);
            });
            VCPProtocol_1.vcpProtocol.subscribe('narrative.generation', (message) => {
                this.handleNarrativeGenerationEvent(message);
            });
        }
        /**
         * 注册系统端点
         */
        registerSystemEndpoints() {
            // 注册AI服务端点
            VCPProtocol_1.vcpProtocol.registerEndpoint({
                id: 'ai-service',
                type: 'service',
                url: 'internal://ai-service',
                capabilities: ['text-generation', 'image-generation', 'analysis'],
                status: 'online',
                metadata: {
                    version: '1.0.0',
                    description: 'AI服务端点',
                    author: 'system',
                    lastSeen: new Date()
                }
            });
            // 注册记忆服务端点
            VCPProtocol_1.vcpProtocol.registerEndpoint({
                id: 'memory-service',
                type: 'service',
                url: 'internal://memory-service',
                capabilities: ['memory-read', 'memory-write', 'memory-search'],
                status: 'online',
                metadata: {
                    version: '1.0.0',
                    description: '记忆服务端点',
                    author: 'system',
                    lastSeen: new Date()
                }
            });
            // 注册文件服务端点
            VCPProtocol_1.vcpProtocol.registerEndpoint({
                id: 'file-service',
                type: 'service',
                url: 'internal://file-service',
                capabilities: ['file-upload', 'file-download', 'file-list'],
                status: 'online',
                metadata: {
                    version: '1.0.0',
                    description: '文件服务端点',
                    author: 'system',
                    lastSeen: new Date()
                }
            });
            this.logger.log('系统端点已注册');
        }
        // ==================== 事件处理器 ====================
        /**
         * 处理工具执行事件
         */
        async handleToolExecutionEvent(message) {
            const { toolId, status, result } = message.payload;
            this.logger.debug(`工具执行事件: ${toolId} - ${status}`);
            // 可以在这里添加监控、日志记录等
            if (status === 'error') {
                this.logger.warn(`工具执行失败: ${toolId}`, result);
            }
        }
        /**
         * 处理Agent协作事件
         */
        async handleAgentCollaborationEvent(message) {
            const { agentId, action, context } = message.payload;
            this.logger.debug(`Agent协作事件: ${agentId} - ${action}`);
            // 处理协作相关的逻辑
        }
        /**
         * 处理叙事生成事件
         */
        async handleNarrativeGenerationEvent(message) {
            const { storyId, progress, status } = message.payload;
            this.logger.debug(`叙事生成事件: ${storyId} - ${progress}% - ${status}`);
            // 处理叙事生成进度
        }
        // ==================== 工具集成接口 ====================
        /**
         * 调用AI生成工具
         */
        async callAIGenerationTool(prompt, options = {}) {
            const request = {
                toolId: options.type === 'image' ? 'image-generator' : 'text-generator',
                action: 'generate',
                parameters: {
                    prompt,
                    model: options.model || 'gpt-4',
                    temperature: options.temperature || 0.7,
                    maxTokens: options.maxTokens || 1000
                },
                options: {
                    timeout: 60000, // 60秒超时
                    async: true
                }
            };
            try {
                const response = await VCPProtocol_1.vcpProtocol.callTool(request);
                this.logger.log(`AI工具调用成功: ${request.toolId}`);
                return response;
            }
            catch (error) {
                this.logger.error(`AI工具调用失败: ${request.toolId}`, error);
                throw error;
            }
        }
        /**
         * 调用分析工具
         */
        async callAnalysisTool(content, analysisType) {
            const request = {
                toolId: 'content-analyzer',
                action: 'analyze',
                parameters: {
                    content,
                    type: analysisType
                },
                options: {
                    timeout: 30000,
                    async: false
                }
            };
            const response = await VCPProtocol_1.vcpProtocol.callTool(request);
            this.logger.log(`分析工具调用成功: ${analysisType}`);
            return response;
        }
        /**
         * 调用翻译工具
         */
        async callTranslationTool(text, targetLanguage) {
            const request = {
                toolId: 'translator',
                action: 'translate',
                parameters: {
                    text,
                    targetLanguage
                }
            };
            const response = await VCPProtocol_1.vcpProtocol.callTool(request);
            return response.result?.translatedText || text;
        }
        // ==================== 记忆操作接口 ====================
        /**
         * 读取记忆
         */
        async readMemory(key, scope = 'global') {
            const operation = {
                operation: 'read',
                scope,
                parameters: { key }
            };
            const message = {
                id: `memory-read-${Date.now()}`,
                version: '1.0',
                type: 'request',
                action: 'memory.read',
                payload: operation,
                metadata: {
                    timestamp: new Date(),
                    source: 'vcp-protocol-service',
                    priority: 'normal'
                },
                security: {
                    permissions: ['memory.read']
                }
            };
            const response = await VCPProtocol_1.vcpProtocol.sendMessage(message);
            return response;
        }
        /**
         * 写入记忆
         */
        async writeMemory(key, value, scope = 'global') {
            const operation = {
                operation: 'write',
                scope,
                parameters: { key, value }
            };
            const message = {
                id: `memory-write-${Date.now()}`,
                version: '1.0',
                type: 'request',
                action: 'memory.write',
                payload: operation,
                metadata: {
                    timestamp: new Date(),
                    source: 'vcp-protocol-service',
                    priority: 'normal'
                },
                security: {
                    permissions: ['memory.write']
                }
            };
            await VCPProtocol_1.vcpProtocol.sendMessage(message);
        }
        /**
         * 搜索记忆
         */
        async searchMemory(query, tags) {
            const operation = {
                operation: 'search',
                scope: 'global',
                parameters: {
                    query,
                    tags,
                    limit: 10
                }
            };
            const message = {
                id: `memory-search-${Date.now()}`,
                version: '1.0',
                type: 'request',
                action: 'memory.search',
                payload: operation,
                metadata: {
                    timestamp: new Date(),
                    source: 'vcp-protocol-service',
                    priority: 'normal'
                },
                security: {
                    permissions: ['memory.read']
                }
            };
            const response = await VCPProtocol_1.vcpProtocol.sendMessage(message);
            return response?.results || [];
        }
        // ==================== 文件操作接口 ====================
        /**
         * 上传文件
         */
        async uploadFile(fileData, options) {
            const operation = {
                operation: 'upload',
                path: options?.filename || `upload-${Date.now()}`,
                data: fileData,
                options: {
                    mimeType: options?.mimeType
                }
            };
            const message = {
                id: `file-upload-${Date.now()}`,
                version: '1.0',
                type: 'request',
                action: 'file.upload',
                payload: operation,
                metadata: {
                    timestamp: new Date(),
                    source: 'vcp-protocol-service',
                    priority: 'normal'
                },
                security: {
                    permissions: ['file.upload']
                }
            };
            const response = await VCPProtocol_1.vcpProtocol.sendMessage(message);
            return response;
        }
        /**
         * 下载文件
         */
        async downloadFile(fileId) {
            const operation = {
                operation: 'download',
                path: fileId
            };
            const message = {
                id: `file-download-${Date.now()}`,
                version: '1.0',
                type: 'request',
                action: 'file.download',
                payload: operation,
                metadata: {
                    timestamp: new Date(),
                    source: 'vcp-protocol-service',
                    priority: 'normal'
                },
                security: {
                    permissions: ['file.download']
                }
            };
            const response = await VCPProtocol_1.vcpProtocol.sendMessage(message);
            return response?.data;
        }
        // ==================== 叙事专用接口 ====================
        /**
         * 发送叙事生成请求
         */
        async requestNarrativeGeneration(storyId, prompt, context) {
            const message = {
                id: `narrative-gen-${Date.now()}`,
                version: '1.0',
                type: 'request',
                action: 'narrative.generate',
                payload: {
                    storyId,
                    prompt,
                    context,
                    options: {
                        async: true,
                        priority: 'high'
                    }
                },
                metadata: {
                    timestamp: new Date(),
                    source: 'narrative-service',
                    priority: 'high'
                },
                security: {
                    permissions: ['narrative.generate']
                }
            };
            const response = await VCPProtocol_1.vcpProtocol.sendMessage(message);
            return response?.taskId || message.id;
        }
        /**
         * 发送Agent协作请求
         */
        async requestAgentCollaboration(collaborationId, agentIds, task) {
            const message = {
                id: `collaboration-${Date.now()}`,
                version: '1.0',
                type: 'request',
                action: 'agent.collaborate',
                payload: {
                    collaborationId,
                    agentIds,
                    task,
                    strategy: 'parallel' // 并行协作
                },
                metadata: {
                    timestamp: new Date(),
                    source: 'collaboration-service',
                    priority: 'normal'
                },
                security: {
                    permissions: ['agent.collaborate']
                }
            };
            const response = await VCPProtocol_1.vcpProtocol.sendMessage(message);
            return response?.collaborationId || collaborationId;
        }
        /**
         * 广播系统事件
         */
        async broadcastSystemEvent(eventType, eventData) {
            const message = {
                id: `system-event-${Date.now()}`,
                version: '1.0',
                type: 'event',
                action: `system.${eventType}`,
                payload: eventData,
                metadata: {
                    timestamp: new Date(),
                    source: 'system',
                    priority: 'normal'
                },
                security: {
                    permissions: ['system.broadcast']
                }
            };
            await VCPProtocol_1.vcpProtocol.sendMessage(message);
        }
        // ==================== 端点管理 ====================
        /**
         * 获取可用端点
         */
        getAvailableEndpoints(capability) {
            return VCPProtocol_1.vcpProtocol.findEndpoints(capability);
        }
        /**
         * 注册自定义端点
         */
        registerEndpoint(endpoint) {
            VCPProtocol_1.vcpProtocol.registerEndpoint(endpoint);
            this.logger.log(`自定义端点已注册: ${endpoint.id}`);
        }
        /**
         * 注销端点
         */
        unregisterEndpoint(endpointId) {
            VCPProtocol_1.vcpProtocol.unregisterEndpoint(endpointId);
            this.logger.log(`端点已注销: ${endpointId}`);
        }
        // ==================== 监控和统计 ====================
        /**
         * 获取协议统计信息
         */
        getProtocolStats() {
            return VCPProtocol_1.vcpProtocol.getStats();
        }
        /**
         * 健康检查
         */
        async healthCheck() {
            try {
                const stats = this.getProtocolStats();
                return {
                    status: 'healthy',
                    details: stats
                };
            }
            catch (error) {
                return {
                    status: 'error',
                    details: error.message
                };
            }
        }
        /**
         * 清理过期任务
         */
        async cleanupExpiredTasks() {
            // 清理VCP协议中的过期任务
            this.logger.log('VCP协议任务清理完成');
        }
    };
    return VCPProtocolService = _classThis;
})();
exports.VCPProtocolService = VCPProtocolService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFwxNjY2M1xcRGVza3RvcFxcdHVoZWdcXHBhY2thZ2VzXFxjb21tb24tYmFja2VuZFxcc3JjXFx2Y3BcXHZjcC1wcm90b2NvbC5zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7QUFBQSwrRUFBK0U7QUFDL0UsY0FBYztBQUNkLDZCQUE2QjtBQUM3QiwrRUFBK0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFL0UsMkNBQWlFO0FBRWpFLGdHQVF1RTtJQUcxRCxrQkFBa0I7NEJBRDlCLElBQUEsbUJBQVUsR0FBRTs7Ozs7Ozs7WUFDYiw2S0FzZ0JDOzs7WUF0Z0JZLHVEQUFrQjs7UUFHVCxhQUFhO1FBRmhCLE1BQU0sR0FBRyxJQUFJLGVBQU0sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUU3RCxZQUFvQixhQUE0QjtZQUE1QixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUFHLENBQUM7UUFFcEQsS0FBSyxDQUFDLFlBQVk7WUFDaEIsTUFBTSxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQTtZQUNsQyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQTtZQUM1QixJQUFJLENBQUMsdUJBQXVCLEVBQUUsQ0FBQTtZQUM5QixJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQTtRQUNoQyxDQUFDO1FBRUQsa0RBQWtEO1FBRWxEOztXQUVHO1FBQ0ssS0FBSyxDQUFDLHFCQUFxQjtZQUNqQyxZQUFZO1lBQ1oseUJBQVcsQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsT0FBbUIsRUFBRSxFQUFFO2dCQUNoRCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxZQUFZLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO1lBQ2pELENBQUMsQ0FBQyxDQUFBO1lBRUYseUJBQVcsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsS0FBWSxFQUFFLEVBQUU7Z0JBQ3ZDLElBQUksQ0FBQyxNQUFNLENBQUMs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RUFBRSxDQUFBO2dCQUNyQyxPQUFPO29CQUNMLE1BQU0sRUFBRSxTQUFTO29CQUNqQixPQUFPLEVBQUUsS0FBSztpQkFDZixDQUFBO1lBQ0gsQ0FBQztZQUFDLE9BQU8sS0FBVSxFQUFFLENBQUM7Z0JBQ3BCLE9BQU87b0JBQ0wsTUFBTSxFQUFFLE9BQU87b0JBQ2YsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPO2lCQUN2QixDQUFBO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFFRDs7V0FFRztRQUNILEtBQUssQ0FBQyxtQkFBbUI7WUFDdkIsZ0JBQWdCO1lBQ2hCLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFBO1FBQ2hDLENBQUM7Ozs7QUFyZ0JVLGdEQUFrQiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXDE2NjYzXFxEZXNrdG9wXFx0dWhlZ1xccGFja2FnZXNcXGNvbW1vbi1iYWNrZW5kXFxzcmNcXHZjcFxcdmNwLXByb3RvY29sLnNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBWQ1DljY/orq7moLjlv4PmnI3liqHpm4bmiJBcclxuLy8g6ZuG5oiQIFZDUFRvb2xCb3gg55qE57uf5LiA5Lqk5LqS5qCH5YeG5Yiw5Yib5LiW5pif546vXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbmltcG9ydCB7IEluamVjdGFibGUsIExvZ2dlciwgT25Nb2R1bGVJbml0IH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nXHJcbmltcG9ydCB7IENvbmZpZ1NlcnZpY2UgfSBmcm9tICdAbmVzdGpzL2NvbmZpZydcclxuaW1wb3J0IHtcclxuICB2Y3BQcm90b2NvbCxcclxuICBWQ1BNZXNzYWdlLFxyXG4gIFZDUFRvb2xSZXF1ZXN0LFxyXG4gIFZDUFRvb2xSZXNwb25zZSxcclxuICBWQ1BNZW1vcnlPcGVyYXRpb24sXHJcbiAgVkNQRmlsZU9wZXJhdGlvbixcclxuICBWQ1BFbmRwb2ludFxyXG59IGZyb20gJy4uLy4uLy4uL2FwcHMvdmNwdG9vbGJveC9zcmMvbW9kdWxlcy9jb21tdW5pY2F0aW9uL1ZDUFByb3RvY29sJ1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgVkNQUHJvdG9jb2xTZXJ2aWNlIGltcGxlbWVudHMgT25Nb2R1bGVJbml0IHtcclxuICBwcml2YXRlIHJlYWRvbmx5IGxvZ2dlciA9IG5ldyBMb2dnZXIoVkNQUHJvdG9jb2xTZXJ2aWNlLm5hbWUpXHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29uZmlnU2VydmljZTogQ29uZmlnU2VydmljZSkge31cclxuXHJcbiAgYXN5bmMgb25Nb2R1bGVJbml0KCkge1xyXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplVkNQUHJvdG9jb2woKVxyXG4gICAgdGhpcy5zZXR1cFByb3RvY29sSGFuZGxlcnMoKVxyXG4gICAgdGhpcy5yZWdpc3RlclN5c3RlbUVuZHBvaW50cygpXHJcbiAgICB0aGlzLmxvZ2dlci5sb2coJ1ZDUOWNj+iuruacjeWKoeW3suWIneWni+WMlicpXHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PSDljY/orq7liJ3lp4vljJYgPT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yid5aeL5YyWVkNQ5Y2P6K6uXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplVkNQUHJvdG9jb2woKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAvLyDorr7nva7ljY/orq7kuovku7bnm5HlkKzlmahcclxuICAgIHZjcFByb3RvY29sLm9uKCdtZXNzYWdlJywgKG1lc3NhZ2U6IFZDUE1lc3NhZ2UpID0+IHtcclxuICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYFZDUOa2iOaBr+aOpeaUtjogJHttZXNzYWdlLmFjdGlvbn1gKVxyXG4gICAgfSlcclxuXHJcbiAgICB2Y3BQcm90b2NvbC5vbignZXJyb3InLCAoZXJyb3I6IEVycm9yKSA9PiB7XHJcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdWQ1DljY/orq7plJnor686JywgZXJyb3IpXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMubG9nZ2VyLmxvZygnVkNQ5Y2P6K6u5qC45b+D5bey5Yid5aeL5YyWJylcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruWNj+iuruWkhOeQhuWZqFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0dXBQcm90b2NvbEhhbmRsZXJzKCk6IHZvaWQge1xyXG4gICAgLy8g6K6i6ZiF6YeN6KaB55qE5Y2P6K6u5LqL5Lu2XHJcbiAgICB2Y3BQcm90b2NvbC5zdWJzY3JpYmUoJ3Rvb2wuZXhlY3V0aW9uJywgKG1lc3NhZ2U6IFZDUE1lc3NhZ2UpID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVUb29sRXhlY3V0aW9uRXZlbnQobWVzc2FnZSlcclxuICAgIH0pXHJcblxyXG4gICAgdmNwUHJvdG9jb2wuc3Vic2NyaWJlKCdhZ2VudC5jb2xsYWJvcmF0aW9uJywgKG1lc3NhZ2U6IFZDUE1lc3NhZ2UpID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVBZ2VudENvbGxhYm9yYXRpb25FdmVudChtZXNzYWdlKVxyXG4gICAgfSlcclxuXHJcbiAgICB2Y3BQcm90b2NvbC5zdWJzY3JpYmUoJ25hcnJhdGl2ZS5nZW5lcmF0aW9uJywgKG1lc3NhZ2U6IFZDUE1lc3NhZ2UpID0+IHtcclxuICAgICAgdGhpcy5oYW5kbGVOYXJyYXRpdmVHZW5lcmF0aW9uRXZlbnQobWVzc2FnZSlcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDms6jlhozns7vnu5/nq6/ngrlcclxuICAgKi9cclxuICBwcml2YXRlIHJlZ2lzdGVyU3lzdGVtRW5kcG9pbnRzKCk6IHZvaWQge1xyXG4gICAgLy8g5rOo5YaMQUnmnI3liqHnq6/ngrlcclxuICAgIHZjcFByb3RvY29sLnJlZ2lzdGVyRW5kcG9pbnQoe1xyXG4gICAgICBpZDogJ2FpLXNlcnZpY2UnLFxyXG4gICAgICB0eXBlOiAnc2VydmljZScsXHJcbiAgICAgIHVybDogJ2ludGVybmFsOi8vYWktc2VydmljZScsXHJcbiAgICAgIGNhcGFiaWxpdGllczogWyd0ZXh0LWdlbmVyYXRpb24nLCAnaW1hZ2UtZ2VuZXJhdGlvbicsICdhbmFseXNpcyddLFxyXG4gICAgICBzdGF0dXM6ICdvbmxpbmUnLFxyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIHZlcnNpb246ICcxLjAuMCcsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdBSeacjeWKoeerr+eCuScsXHJcbiAgICAgICAgYXV0aG9yOiAnc3lzdGVtJyxcclxuICAgICAgICBsYXN0U2VlbjogbmV3IERhdGUoKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIOazqOWGjOiusOW/huacjeWKoeerr+eCuVxyXG4gICAgdmNwUHJvdG9jb2wucmVnaXN0ZXJFbmRwb2ludCh7XHJcbiAgICAgIGlkOiAnbWVtb3J5LXNlcnZpY2UnLFxyXG4gICAgICB0eXBlOiAnc2VydmljZScsXHJcbiAgICAgIHVybDogJ2ludGVybmFsOi8vbWVtb3J5LXNlcnZpY2UnLFxyXG4gICAgICBjYXBhYmlsaXRpZXM6IFsnbWVtb3J5LXJlYWQnLCAnbWVtb3J5LXdyaXRlJywgJ21lbW9yeS1zZWFyY2gnXSxcclxuICAgICAgc3RhdHVzOiAnb25saW5lJyxcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAn6K6w5b+G5pyN5Yqh56uv54K5JyxcclxuICAgICAgICBhdXRob3I6ICdzeXN0ZW0nLFxyXG4gICAgICAgIGxhc3RTZWVuOiBuZXcgRGF0ZSgpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8g5rOo5YaM5paH5Lu25pyN5Yqh56uv54K5XHJcbiAgICB2Y3BQcm90b2NvbC5yZWdpc3RlckVuZHBvaW50KHtcclxuICAgICAgaWQ6ICdmaWxlLXNlcnZpY2UnLFxyXG4gICAgICB0eXBlOiAnc2VydmljZScsXHJcbiAgICAgIHVybDogJ2ludGVybmFsOi8vZmlsZS1zZXJ2aWNlJyxcclxuICAgICAgY2FwYWJpbGl0aWVzOiBbJ2ZpbGUtdXBsb2FkJywgJ2ZpbGUtZG93bmxvYWQnLCAnZmlsZS1saXN0J10sXHJcbiAgICAgIHN0YXR1czogJ29ubGluZScsXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ+aWh+S7tuacjeWKoeerr+eCuScsXHJcbiAgICAgICAgYXV0aG9yOiAnc3lzdGVtJyxcclxuICAgICAgICBsYXN0U2VlbjogbmV3IERhdGUoKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMubG9nZ2VyLmxvZygn57O757uf56uv54K55bey5rOo5YaMJylcclxuICB9XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09IOS6i+S7tuWkhOeQhuWZqCA9PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIblt6XlhbfmiafooYzkuovku7ZcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGhhbmRsZVRvb2xFeGVjdXRpb25FdmVudChtZXNzYWdlOiBWQ1BNZXNzYWdlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCB7IHRvb2xJZCwgc3RhdHVzLCByZXN1bHQgfSA9IG1lc3NhZ2UucGF5bG9hZFxyXG4gICAgdGhpcy5sb2dnZXIuZGVidWcoYOW3peWFt+aJp+ihjOS6i+S7tjogJHt0b29sSWR9IC0gJHtzdGF0dXN9YClcclxuXHJcbiAgICAvLyDlj6/ku6XlnKjov5nph4zmt7vliqDnm5HmjqfjgIHml6Xlv5forrDlvZXnrYlcclxuICAgIGlmIChzdGF0dXMgPT09ICdlcnJvcicpIHtcclxuICAgICAgdGhpcy5sb2dnZXIud2Fybihg5bel5YW35omn6KGM5aSx6LSlOiAke3Rvb2xJZH1gLCByZXN1bHQpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlpITnkIZBZ2VudOWNj+S9nOS6i+S7tlxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlQWdlbnRDb2xsYWJvcmF0aW9uRXZlbnQobWVzc2FnZTogVkNQTWVzc2FnZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgeyBhZ2VudElkLCBhY3Rpb24sIGNvbnRleHQgfSA9IG1lc3NhZ2UucGF5bG9hZFxyXG4gICAgdGhpcy5sb2dnZXIuZGVidWcoYEFnZW505Y2P5L2c5LqL5Lu2OiAke2FnZW50SWR9IC0gJHthY3Rpb259YClcclxuXHJcbiAgICAvLyDlpITnkIbljY/kvZznm7jlhbPnmoTpgLvovpFcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWkhOeQhuWPmeS6i+eUn+aIkOS6i+S7tlxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgaGFuZGxlTmFycmF0aXZlR2VuZXJhdGlvbkV2ZW50KG1lc3NhZ2U6IFZDUE1lc3NhZ2UpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHsgc3RvcnlJZCwgcHJvZ3Jlc3MsIHN0YXR1cyB9ID0gbWVzc2FnZS5wYXlsb2FkXHJcbiAgICB0aGlzLmxvZ2dlci5kZWJ1Zyhg5Y+Z5LqL55Sf5oiQ5LqL5Lu2OiAke3N0b3J5SWR9IC0gJHtwcm9ncmVzc30lIC0gJHtzdGF0dXN9YClcclxuXHJcbiAgICAvLyDlpITnkIblj5nkuovnlJ/miJDov5vluqZcclxuICB9XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09IOW3peWFt+mbhuaIkOaOpeWPoyA9PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKipcclxuICAgKiDosIPnlKhBSeeUn+aIkOW3peWFt1xyXG4gICAqL1xyXG4gIGFzeW5jIGNhbGxBSUdlbmVyYXRpb25Ub29sKHByb21wdDogc3RyaW5nLCBvcHRpb25zOiB7XHJcbiAgICBtb2RlbD86IHN0cmluZ1xyXG4gICAgdGVtcGVyYXR1cmU/OiBudW1iZXJcclxuICAgIG1heFRva2Vucz86IG51bWJlclxyXG4gICAgdHlwZT86ICd0ZXh0JyB8ICdpbWFnZScgfCAnYXVkaW8nXHJcbiAgfSA9IHt9KTogUHJvbWlzZTxWQ1BUb29sUmVzcG9uc2U+IHtcclxuICAgIGNvbnN0IHJlcXVlc3Q6IFZDUFRvb2xSZXF1ZXN0ID0ge1xyXG4gICAgICB0b29sSWQ6IG9wdGlvbnMudHlwZSA9PT0gJ2ltYWdlJyA/ICdpbWFnZS1nZW5lcmF0b3InIDogJ3RleHQtZ2VuZXJhdG9yJyxcclxuICAgICAgYWN0aW9uOiAnZ2VuZXJhdGUnLFxyXG4gICAgICBwYXJhbWV0ZXJzOiB7XHJcbiAgICAgICAgcHJvbXB0LFxyXG4gICAgICAgIG1vZGVsOiBvcHRpb25zLm1vZGVsIHx8ICdncHQtNCcsXHJcbiAgICAgICAgdGVtcGVyYXR1cmU6IG9wdGlvbnMudGVtcGVyYXR1cmUgfHwgMC43LFxyXG4gICAgICAgIG1heFRva2Vuczogb3B0aW9ucy5tYXhUb2tlbnMgfHwgMTAwMFxyXG4gICAgICB9LFxyXG4gICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgdGltZW91dDogNjAwMDAsIC8vIDYw56eS6LaF5pe2XHJcbiAgICAgICAgYXN5bmM6IHRydWVcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdmNwUHJvdG9jb2wuY2FsbFRvb2wocmVxdWVzdClcclxuICAgICAgdGhpcy5sb2dnZXIubG9nKGBBSeW3peWFt+iwg+eUqOaIkOWKnzogJHtyZXF1ZXN0LnRvb2xJZH1gKVxyXG4gICAgICByZXR1cm4gcmVzcG9uc2VcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYEFJ5bel5YW36LCD55So5aSx6LSlOiAke3JlcXVlc3QudG9vbElkfWAsIGVycm9yKVxyXG4gICAgICB0aHJvdyBlcnJvclxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6LCD55So5YiG5p6Q5bel5YW3XHJcbiAgICovXHJcbiAgYXN5bmMgY2FsbEFuYWx5c2lzVG9vbChjb250ZW50OiBzdHJpbmcsIGFuYWx5c2lzVHlwZTogc3RyaW5nKTogUHJvbWlzZTxWQ1BUb29sUmVzcG9uc2U+IHtcclxuICAgIGNvbnN0IHJlcXVlc3Q6IFZDUFRvb2xSZXF1ZXN0ID0ge1xyXG4gICAgICB0b29sSWQ6ICdjb250ZW50LWFuYWx5emVyJyxcclxuICAgICAgYWN0aW9uOiAnYW5hbHl6ZScsXHJcbiAgICAgIHBhcmFtZXRlcnM6IHtcclxuICAgICAgICBjb250ZW50LFxyXG4gICAgICAgIHR5cGU6IGFuYWx5c2lzVHlwZVxyXG4gICAgICB9LFxyXG4gICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgdGltZW91dDogMzAwMDAsXHJcbiAgICAgICAgYXN5bmM6IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHZjcFByb3RvY29sLmNhbGxUb29sKHJlcXVlc3QpXHJcbiAgICB0aGlzLmxvZ2dlci5sb2coYOWIhuaekOW3peWFt+iwg+eUqOaIkOWKnzogJHthbmFseXNpc1R5cGV9YClcclxuICAgIHJldHVybiByZXNwb25zZVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6LCD55So57+76K+R5bel5YW3XHJcbiAgICovXHJcbiAgYXN5bmMgY2FsbFRyYW5zbGF0aW9uVG9vbCh0ZXh0OiBzdHJpbmcsIHRhcmdldExhbmd1YWdlOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgcmVxdWVzdDogVkNQVG9vbFJlcXVlc3QgPSB7XHJcbiAgICAgIHRvb2xJZDogJ3RyYW5zbGF0b3InLFxyXG4gICAgICBhY3Rpb246ICd0cmFuc2xhdGUnLFxyXG4gICAgICBwYXJhbWV0ZXJzOiB7XHJcbiAgICAgICAgdGV4dCxcclxuICAgICAgICB0YXJnZXRMYW5ndWFnZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB2Y3BQcm90b2NvbC5jYWxsVG9vbChyZXF1ZXN0KVxyXG4gICAgcmV0dXJuIHJlc3BvbnNlLnJlc3VsdD8udHJhbnNsYXRlZFRleHQgfHwgdGV4dFxyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT0g6K6w5b+G5pON5L2c5o6l5Y+jID09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIOivu+WPluiusOW/hlxyXG4gICAqL1xyXG4gIGFzeW5jIHJlYWRNZW1vcnkoa2V5OiBzdHJpbmcsIHNjb3BlOiAnYWdlbnQnIHwgJ3Nlc3Npb24nIHwgJ2dsb2JhbCcgPSAnZ2xvYmFsJyk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCBvcGVyYXRpb246IFZDUE1lbW9yeU9wZXJhdGlvbiA9IHtcclxuICAgICAgb3BlcmF0aW9uOiAncmVhZCcsXHJcbiAgICAgIHNjb3BlLFxyXG4gICAgICBwYXJhbWV0ZXJzOiB7IGtleSB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWVzc2FnZTogVkNQTWVzc2FnZSA9IHtcclxuICAgICAgaWQ6IGBtZW1vcnktcmVhZC0ke0RhdGUubm93KCl9YCxcclxuICAgICAgdmVyc2lvbjogJzEuMCcsXHJcbiAgICAgIHR5cGU6ICdyZXF1ZXN0JyxcclxuICAgICAgYWN0aW9uOiAnbWVtb3J5LnJlYWQnLFxyXG4gICAgICBwYXlsb2FkOiBvcGVyYXRpb24sXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHNvdXJjZTogJ3ZjcC1wcm90b2NvbC1zZXJ2aWNlJyxcclxuICAgICAgICBwcmlvcml0eTogJ25vcm1hbCdcclxuICAgICAgfSxcclxuICAgICAgc2VjdXJpdHk6IHtcclxuICAgICAgICBwZXJtaXNzaW9uczogWydtZW1vcnkucmVhZCddXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHZjcFByb3RvY29sLnNlbmRNZXNzYWdlKG1lc3NhZ2UpXHJcbiAgICByZXR1cm4gcmVzcG9uc2VcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWGmeWFpeiusOW/hlxyXG4gICAqL1xyXG4gIGFzeW5jIHdyaXRlTWVtb3J5KGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBzY29wZTogJ2FnZW50JyB8ICdzZXNzaW9uJyB8ICdnbG9iYWwnID0gJ2dsb2JhbCcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IG9wZXJhdGlvbjogVkNQTWVtb3J5T3BlcmF0aW9uID0ge1xyXG4gICAgICBvcGVyYXRpb246ICd3cml0ZScsXHJcbiAgICAgIHNjb3BlLFxyXG4gICAgICBwYXJhbWV0ZXJzOiB7IGtleSwgdmFsdWUgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1lc3NhZ2U6IFZDUE1lc3NhZ2UgPSB7XHJcbiAgICAgIGlkOiBgbWVtb3J5LXdyaXRlLSR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICB2ZXJzaW9uOiAnMS4wJyxcclxuICAgICAgdHlwZTogJ3JlcXVlc3QnLFxyXG4gICAgICBhY3Rpb246ICdtZW1vcnkud3JpdGUnLFxyXG4gICAgICBwYXlsb2FkOiBvcGVyYXRpb24sXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHNvdXJjZTogJ3ZjcC1wcm90b2NvbC1zZXJ2aWNlJyxcclxuICAgICAgICBwcmlvcml0eTogJ25vcm1hbCdcclxuICAgICAgfSxcclxuICAgICAgc2VjdXJpdHk6IHtcclxuICAgICAgICBwZXJtaXNzaW9uczogWydtZW1vcnkud3JpdGUnXVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgdmNwUHJvdG9jb2wuc2VuZE1lc3NhZ2UobWVzc2FnZSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOaQnOe0ouiusOW/hlxyXG4gICAqL1xyXG4gIGFzeW5jIHNlYXJjaE1lbW9yeShxdWVyeTogc3RyaW5nLCB0YWdzPzogc3RyaW5nW10pOiBQcm9taXNlPGFueVtdPiB7XHJcbiAgICBjb25zdCBvcGVyYXRpb246IFZDUE1lbW9yeU9wZXJhdGlvbiA9IHtcclxuICAgICAgb3BlcmF0aW9uOiAnc2VhcmNoJyxcclxuICAgICAgc2NvcGU6ICdnbG9iYWwnLFxyXG4gICAgICBwYXJhbWV0ZXJzOiB7XHJcbiAgICAgICAgcXVlcnksXHJcbiAgICAgICAgdGFncyxcclxuICAgICAgICBsaW1pdDogMTBcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1lc3NhZ2U6IFZDUE1lc3NhZ2UgPSB7XHJcbiAgICAgIGlkOiBgbWVtb3J5LXNlYXJjaC0ke0RhdGUubm93KCl9YCxcclxuICAgICAgdmVyc2lvbjogJzEuMCcsXHJcbiAgICAgIHR5cGU6ICdyZXF1ZXN0JyxcclxuICAgICAgYWN0aW9uOiAnbWVtb3J5LnNlYXJjaCcsXHJcbiAgICAgIHBheWxvYWQ6IG9wZXJhdGlvbixcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgc291cmNlOiAndmNwLXByb3RvY29sLXNlcnZpY2UnLFxyXG4gICAgICAgIHByaW9yaXR5OiAnbm9ybWFsJ1xyXG4gICAgICB9LFxyXG4gICAgICBzZWN1cml0eToge1xyXG4gICAgICAgIHBlcm1pc3Npb25zOiBbJ21lbW9yeS5yZWFkJ11cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdmNwUHJvdG9jb2wuc2VuZE1lc3NhZ2UobWVzc2FnZSlcclxuICAgIHJldHVybiByZXNwb25zZT8ucmVzdWx0cyB8fCBbXVxyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT0g5paH5Lu25pON5L2c5o6l5Y+jID09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIOS4iuS8oOaWh+S7tlxyXG4gICAqL1xyXG4gIGFzeW5jIHVwbG9hZEZpbGUoZmlsZURhdGE6IGFueSwgb3B0aW9ucz86IHsgbWltZVR5cGU/OiBzdHJpbmcsIGZpbGVuYW1lPzogc3RyaW5nIH0pOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3Qgb3BlcmF0aW9uOiBWQ1BGaWxlT3BlcmF0aW9uID0ge1xyXG4gICAgICBvcGVyYXRpb246ICd1cGxvYWQnLFxyXG4gICAgICBwYXRoOiBvcHRpb25zPy5maWxlbmFtZSB8fCBgdXBsb2FkLSR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICBkYXRhOiBmaWxlRGF0YSxcclxuICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgIG1pbWVUeXBlOiBvcHRpb25zPy5taW1lVHlwZVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWVzc2FnZTogVkNQTWVzc2FnZSA9IHtcclxuICAgICAgaWQ6IGBmaWxlLXVwbG9hZC0ke0RhdGUubm93KCl9YCxcclxuICAgICAgdmVyc2lvbjogJzEuMCcsXHJcbiAgICAgIHR5cGU6ICdyZXF1ZXN0JyxcclxuICAgICAgYWN0aW9uOiAnZmlsZS51cGxvYWQnLFxyXG4gICAgICBwYXlsb2FkOiBvcGVyYXRpb24sXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHNvdXJjZTogJ3ZjcC1wcm90b2NvbC1zZXJ2aWNlJyxcclxuICAgICAgICBwcmlvcml0eTogJ25vcm1hbCdcclxuICAgICAgfSxcclxuICAgICAgc2VjdXJpdHk6IHtcclxuICAgICAgICBwZXJtaXNzaW9uczogWydmaWxlLnVwbG9hZCddXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHZjcFByb3RvY29sLnNlbmRNZXNzYWdlKG1lc3NhZ2UpXHJcbiAgICByZXR1cm4gcmVzcG9uc2VcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOS4i+i9veaWh+S7tlxyXG4gICAqL1xyXG4gIGFzeW5jIGRvd25sb2FkRmlsZShmaWxlSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCBvcGVyYXRpb246IFZDUEZpbGVPcGVyYXRpb24gPSB7XHJcbiAgICAgIG9wZXJhdGlvbjogJ2Rvd25sb2FkJyxcclxuICAgICAgcGF0aDogZmlsZUlkXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbWVzc2FnZTogVkNQTWVzc2FnZSA9IHtcclxuICAgICAgaWQ6IGBmaWxlLWRvd25sb2FkLSR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICB2ZXJzaW9uOiAnMS4wJyxcclxuICAgICAgdHlwZTogJ3JlcXVlc3QnLFxyXG4gICAgICBhY3Rpb246ICdmaWxlLmRvd25sb2FkJyxcclxuICAgICAgcGF5bG9hZDogb3BlcmF0aW9uLFxyXG4gICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgICBzb3VyY2U6ICd2Y3AtcHJvdG9jb2wtc2VydmljZScsXHJcbiAgICAgICAgcHJpb3JpdHk6ICdub3JtYWwnXHJcbiAgICAgIH0sXHJcbiAgICAgIHNlY3VyaXR5OiB7XHJcbiAgICAgICAgcGVybWlzc2lvbnM6IFsnZmlsZS5kb3dubG9hZCddXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHZjcFByb3RvY29sLnNlbmRNZXNzYWdlKG1lc3NhZ2UpXHJcbiAgICByZXR1cm4gcmVzcG9uc2U/LmRhdGFcclxuICB9XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09IOWPmeS6i+S4k+eUqOaOpeWPoyA9PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKipcclxuICAgKiDlj5HpgIHlj5nkuovnlJ/miJDor7fmsYJcclxuICAgKi9cclxuICBhc3luYyByZXF1ZXN0TmFycmF0aXZlR2VuZXJhdGlvbihzdG9yeUlkOiBzdHJpbmcsIHByb21wdDogc3RyaW5nLCBjb250ZXh0OiBhbnkpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgbWVzc2FnZTogVkNQTWVzc2FnZSA9IHtcclxuICAgICAgaWQ6IGBuYXJyYXRpdmUtZ2VuLSR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICB2ZXJzaW9uOiAnMS4wJyxcclxuICAgICAgdHlwZTogJ3JlcXVlc3QnLFxyXG4gICAgICBhY3Rpb246ICduYXJyYXRpdmUuZ2VuZXJhdGUnLFxyXG4gICAgICBwYXlsb2FkOiB7XHJcbiAgICAgICAgc3RvcnlJZCxcclxuICAgICAgICBwcm9tcHQsXHJcbiAgICAgICAgY29udGV4dCxcclxuICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICBhc3luYzogdHJ1ZSxcclxuICAgICAgICAgIHByaW9yaXR5OiAnaGlnaCdcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHNvdXJjZTogJ25hcnJhdGl2ZS1zZXJ2aWNlJyxcclxuICAgICAgICBwcmlvcml0eTogJ2hpZ2gnXHJcbiAgICAgIH0sXHJcbiAgICAgIHNlY3VyaXR5OiB7XHJcbiAgICAgICAgcGVybWlzc2lvbnM6IFsnbmFycmF0aXZlLmdlbmVyYXRlJ11cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdmNwUHJvdG9jb2wuc2VuZE1lc3NhZ2UobWVzc2FnZSlcclxuICAgIHJldHVybiByZXNwb25zZT8udGFza0lkIHx8IG1lc3NhZ2UuaWRcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWPkemAgUFnZW505Y2P5L2c6K+35rGCXHJcbiAgICovXHJcbiAgYXN5bmMgcmVxdWVzdEFnZW50Q29sbGFib3JhdGlvbihcclxuICAgIGNvbGxhYm9yYXRpb25JZDogc3RyaW5nLFxyXG4gICAgYWdlbnRJZHM6IHN0cmluZ1tdLFxyXG4gICAgdGFzazogYW55XHJcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGNvbnN0IG1lc3NhZ2U6IFZDUE1lc3NhZ2UgPSB7XHJcbiAgICAgIGlkOiBgY29sbGFib3JhdGlvbi0ke0RhdGUubm93KCl9YCxcclxuICAgICAgdmVyc2lvbjogJzEuMCcsXHJcbiAgICAgIHR5cGU6ICdyZXF1ZXN0JyxcclxuICAgICAgYWN0aW9uOiAnYWdlbnQuY29sbGFib3JhdGUnLFxyXG4gICAgICBwYXlsb2FkOiB7XHJcbiAgICAgICAgY29sbGFib3JhdGlvbklkLFxyXG4gICAgICAgIGFnZW50SWRzLFxyXG4gICAgICAgIHRhc2ssXHJcbiAgICAgICAgc3RyYXRlZ3k6ICdwYXJhbGxlbCcgLy8g5bm26KGM5Y2P5L2cXHJcbiAgICAgIH0sXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgIHNvdXJjZTogJ2NvbGxhYm9yYXRpb24tc2VydmljZScsXHJcbiAgICAgICAgcHJpb3JpdHk6ICdub3JtYWwnXHJcbiAgICAgIH0sXHJcbiAgICAgIHNlY3VyaXR5OiB7XHJcbiAgICAgICAgcGVybWlzc2lvbnM6IFsnYWdlbnQuY29sbGFib3JhdGUnXVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB2Y3BQcm90b2NvbC5zZW5kTWVzc2FnZShtZXNzYWdlKVxyXG4gICAgcmV0dXJuIHJlc3BvbnNlPy5jb2xsYWJvcmF0aW9uSWQgfHwgY29sbGFib3JhdGlvbklkXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlub/mkq3ns7vnu5/kuovku7ZcclxuICAgKi9cclxuICBhc3luYyBicm9hZGNhc3RTeXN0ZW1FdmVudChldmVudFR5cGU6IHN0cmluZywgZXZlbnREYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IG1lc3NhZ2U6IFZDUE1lc3NhZ2UgPSB7XHJcbiAgICAgIGlkOiBgc3lzdGVtLWV2ZW50LSR7RGF0ZS5ub3coKX1gLFxyXG4gICAgICB2ZXJzaW9uOiAnMS4wJyxcclxuICAgICAgdHlwZTogJ2V2ZW50JyxcclxuICAgICAgYWN0aW9uOiBgc3lzdGVtLiR7ZXZlbnRUeXBlfWAsXHJcbiAgICAgIHBheWxvYWQ6IGV2ZW50RGF0YSxcclxuICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgc291cmNlOiAnc3lzdGVtJyxcclxuICAgICAgICBwcmlvcml0eTogJ25vcm1hbCdcclxuICAgICAgfSxcclxuICAgICAgc2VjdXJpdHk6IHtcclxuICAgICAgICBwZXJtaXNzaW9uczogWydzeXN0ZW0uYnJvYWRjYXN0J11cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGF3YWl0IHZjcFByb3RvY29sLnNlbmRNZXNzYWdlKG1lc3NhZ2UpXHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PSDnq6/ngrnnrqHnkIYgPT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5Y+v55So56uv54K5XHJcbiAgICovXHJcbiAgZ2V0QXZhaWxhYmxlRW5kcG9pbnRzKGNhcGFiaWxpdHk/OiBzdHJpbmcpOiBWQ1BFbmRwb2ludFtdIHtcclxuICAgIHJldHVybiB2Y3BQcm90b2NvbC5maW5kRW5kcG9pbnRzKGNhcGFiaWxpdHkpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDms6jlhozoh6rlrprkuYnnq6/ngrlcclxuICAgKi9cclxuICByZWdpc3RlckVuZHBvaW50KGVuZHBvaW50OiBWQ1BFbmRwb2ludCk6IHZvaWQge1xyXG4gICAgdmNwUHJvdG9jb2wucmVnaXN0ZXJFbmRwb2ludChlbmRwb2ludClcclxuICAgIHRoaXMubG9nZ2VyLmxvZyhg6Ieq5a6a5LmJ56uv54K55bey5rOo5YaMOiAke2VuZHBvaW50LmlkfWApXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDms6jplIDnq6/ngrlcclxuICAgKi9cclxuICB1bnJlZ2lzdGVyRW5kcG9pbnQoZW5kcG9pbnRJZDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB2Y3BQcm90b2NvbC51bnJlZ2lzdGVyRW5kcG9pbnQoZW5kcG9pbnRJZClcclxuICAgIHRoaXMubG9nZ2VyLmxvZyhg56uv54K55bey5rOo6ZSAOiAke2VuZHBvaW50SWR9YClcclxuICB9XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09IOebkeaOp+WSjOe7n+iuoSA9PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bljY/orq7nu5/orqHkv6Hmga9cclxuICAgKi9cclxuICBnZXRQcm90b2NvbFN0YXRzKCk6IGFueSB7XHJcbiAgICByZXR1cm4gdmNwUHJvdG9jb2wuZ2V0U3RhdHMoKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5YGl5bq35qOA5p+lXHJcbiAgICovXHJcbiAgYXN5bmMgaGVhbHRoQ2hlY2soKTogUHJvbWlzZTx7IHN0YXR1czogc3RyaW5nLCBkZXRhaWxzPzogYW55IH0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHN0YXRzID0gdGhpcy5nZXRQcm90b2NvbFN0YXRzKClcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdGF0dXM6ICdoZWFsdGh5JyxcclxuICAgICAgICBkZXRhaWxzOiBzdGF0c1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxyXG4gICAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5riF55CG6L+H5pyf5Lu75YqhXHJcbiAgICovXHJcbiAgYXN5bmMgY2xlYW51cEV4cGlyZWRUYXNrcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIC8vIOa4heeQhlZDUOWNj+iuruS4reeahOi/h+acn+S7u+WKoVxyXG4gICAgdGhpcy5sb2dnZXIubG9nKCdWQ1DljY/orq7ku7vliqHmuIXnkIblrozmiJAnKVxyXG4gIH1cclxufVxyXG4iXSwidmVyc2lvbiI6M30=