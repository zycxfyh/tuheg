{"file":"C:\\Users\\16663\\Desktop\\tuheg\\apps\\backend-gateway\\src\\auth\\auth.controller.ts","mappings":";AAAA,yDAAyD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEzD,2CAAkG;AAClG,iDAA4C;AAC5C,yDAAyD;AACzD,0DAAyD;AAIzD,+CAA6C;AAG7C,qDAAmD;AACnD,4DAAsD;IAGzC,cAAc;4BAD1B,IAAA,mBAAU,EAAC,MAAM,CAAC;;;;;;;;;;;;oCAIhB,IAAA,aAAI,EAAC,UAAU,CAAC;iCAKhB,IAAA,oBAAQ,EAAC,EAAE,OAAO,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,CAAC,EAChD,IAAA,iBAAQ,EAAC,mBAAU,CAAC,EAAE,CAAC,EACvB,IAAA,aAAI,EAAC,OAAO,CAAC;sCAKb,IAAA,kBAAS,EAAC,6BAAY,CAAC,EACvB,IAAA,YAAG,EAAC,SAAS,CAAC;YAZf,2KAAa,QAAQ,6DAEpB;YAKD,kKAAa,KAAK,6DAEjB;YAID,iLAAO,UAAU,6DAEhB;YAnBH,6KAoBC;;;YApBY,uDAAc;;QACI,WAAW,GAD7B,mDAAc;QACzB,YAA6B,WAAwB;YAAxB,gBAAW,GAAX,WAAW,CAAa;QAAG,CAAC;QAGlD,KAAK,CAAC,QAAQ,CAA8C,WAAwB;YACzF,OAAO,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAA;QAC/C,CAAC;QAKM,KAAK,CAAC,KAAK,CAA2C,QAAkB;YAC7E,OAAO,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAA;QACzC,CAAC;QAIM,UAAU,CAAQ,GAAY;YACnC,OAAO,GAAG,CAAC,IAAI,CAAA;QACjB,CAAC;;;;AAnBU,wCAAc","names":[],"sources":["C:\\Users\\16663\\Desktop\\tuheg\\apps\\backend-gateway\\src\\auth\\auth.controller.ts"],"sourcesContent":["// 文件路径: apps/backend-gateway/src/auth/auth.controller.ts\n\nimport { Body, Controller, Get, HttpCode, HttpStatus, Post, Req, UseGuards } from '@nestjs/common'\nimport { Throttle } from '@nestjs/throttler'\n// [核心修正] 从 @tuheg/common-backend 导入共享的 ZodValidationPipe\nimport { ZodValidationPipe } from '@tuheg/common-backend'\nimport type { Request } from 'express'\nimport type { AuthService } from './auth.service'\nimport type { LoginDto } from './dto/login.dto'\nimport { loginSchema } from './dto/login.dto'\n// 导入DTO类型和Zod schema\nimport type { RegisterDto } from './dto/register.dto'\nimport { registerSchema } from './dto/register.dto'\nimport { JwtAuthGuard } from './guards/jwt-auth.guard'\n\n@Controller('auth')\nexport class AuthController {\n  constructor(private readonly authService: AuthService) {}\n\n  @Post('register')\n  public async register(@Body(new ZodValidationPipe(registerSchema)) registerDto: RegisterDto) {\n    return this.authService.register(registerDto)\n  }\n\n  @Throttle({ default: { limit: 5, ttl: 300000 } }) // 5次/5分钟\n  @HttpCode(HttpStatus.OK)\n  @Post('login')\n  public async login(@Body(new ZodValidationPipe(loginSchema)) loginDto: LoginDto) {\n    return this.authService.login(loginDto)\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @Get('profile')\n  public getProfile(@Req() req: Request) {\n    return req.user\n  }\n}\n"],"version":3}