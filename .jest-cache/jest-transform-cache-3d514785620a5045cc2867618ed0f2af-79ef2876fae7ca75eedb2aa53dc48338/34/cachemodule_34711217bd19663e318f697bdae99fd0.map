{"file":"C:\\Users\\16663\\Desktop\\tuheg\\packages\\common-backend\\src\\cache\\cache.module.ts","mappings":";AAAA,0DAA0D;AAC1D,6BAA6B;;;;;;;;;AAE7B,yDAAsE;AACtE,2CAAuC;AACvC,2CAA8C;AAC9C,yEAAsD;AACtD,mDAA8C;AAE9C;;;;GAIG;AA6BI,IAAM,WAAW,GAAjB,MAAM,WAAW;CAAG,CAAA;AAAd,kCAAW;sBAAX,WAAW;IA5BvB,IAAA,eAAM,EAAC;QACN,OAAO,EAAE;YACP,2BAAe,CAAC,aAAa,CAAC;gBAC5B,MAAM,EAAE,CAAC,sBAAa,CAAC;gBACvB,UAAU,EAAE,KAAK,EAAE,aAA4B,EAAE,EAAE;oBACjD,MAAM,QAAQ,GAAG,aAAa,CAAC,GAAG,CAAS,WAAW,CAAC,CAAA;oBAEvD,IAAI,CAAC,QAAQ,EAAE,CAAC;wBACd,MAAM,IAAI,KAAK,CAAC,uEAAuE,CAAC,CAAA;oBAC1F,CAAC;oBAED,MAAM,GAAG,GAAG,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAA;oBAE7B,uBAAuB;oBACvB,OAAO;wBACL,KAAK,EAAE,sCAAU;wBACjB,IAAI,EAAE,GAAG,CAAC,QAAQ;wBAClB,IAAI,EAAE,QAAQ,CAAC,GAAG,CAAC,IAAI,IAAI,MAAM,EAAE,EAAE,CAAC;wBACtC,QAAQ,EAAE,GAAG,CAAC,QAAQ,IAAI,SAAS;wBACnC,GAAG,EAAE,IAAI,EAAE,UAAU;wBACrB,GAAG,EAAE,IAAI,EAAE,iBAAiB;qBACtB,CAAA;gBACV,CAAC;aACF,CAAC;SACH;QACD,SAAS,EAAE,CAAC,4BAAY,CAAC;QACzB,OAAO,EAAE,CAAC,4BAAY,EAAE,2BAAe,CAAC;KACzC,CAAC;GACW,WAAW,CAAG","names":[],"sources":["C:\\Users\\16663\\Desktop\\tuheg\\packages\\common-backend\\src\\cache\\cache.module.ts"],"sourcesContent":["// 文件路径: packages/common-backend/src/cache/cache.module.ts\n// 核心理念: 统一使用Redis缓存，确保分布式一致性\n\nimport { CacheModule as NestCacheModule } from '@nestjs/cache-manager'\nimport { Module } from '@nestjs/common'\nimport { ConfigService } from '@nestjs/config'\nimport { redisStore } from 'cache-manager-redis-store'\nimport { CacheService } from './cache.service'\n\n/**\n * @module CacheModule\n * @description 缓存模块\n * 统一使用Redis缓存，确保分布式一致性和高性能\n */\n@Module({\n  imports: [\n    NestCacheModule.registerAsync({\n      inject: [ConfigService],\n      useFactory: async (configService: ConfigService) => {\n        const redisUrl = configService.get<string>('REDIS_URL')\n\n        if (!redisUrl) {\n          throw new Error('REDIS_URL is required for caching. Please configure Redis connection.')\n        }\n\n        const url = new URL(redisUrl)\n\n        // 统一使用Redis存储，确保分布式一致性\n        return {\n          store: redisStore,\n          host: url.hostname,\n          port: parseInt(url.port || '6379', 10),\n          password: url.password || undefined,\n          ttl: 3600, // 默认 1 小时\n          max: 1000, // Redis可以处理更多缓存项\n        } as any\n      },\n    }),\n  ],\n  providers: [CacheService],\n  exports: [CacheService, NestCacheModule],\n})\nexport class CacheModule {}\n"],"version":3}