{"file":"C:\\Users\\16663\\Desktop\\tuheg\\packages\\common-backend\\src\\event-bus\\event-bus.module.ts","mappings":";AAAA,+DAA+D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE/D,2CAAuC;AACvC,2CAA4D;AAC5D,yDAAgE;AAChE,2DAAqD;AAExC,QAAA,eAAe,GAAG,iBAAiB,CAAA;IAwBnC,cAAc;4BAtB1B,IAAA,eAAM,EAAC;YACN,OAAO,EAAE;gBACP,sDAAsD;gBACtD,6BAAa,CAAC,aAAa,CAAC;oBAC1B;wBACE,IAAI,EAAE,uBAAe;wBACrB,OAAO,EAAE,CAAC,qBAAY,CAAC;wBACvB,UAAU,EAAE,CAAC,aAA4B,EAAE,EAAE,CAAC,CAAC;4BAC7C,SAAS,EAAE,yBAAS,CAAC,GAAG;4BACxB,OAAO,EAAE;gCACP,IAAI,EAAE,CAAC,aAAa,CAAC,GAAG,CAAS,cAAc,EAAE,uBAAuB,CAAC,CAAC;gCAC1E,KAAK,EAAE,qBAAqB;6BAC7B;yBACF,CAAC;wBACF,MAAM,EAAE,CAAC,sBAAa,CAAC;qBACxB;iBACF,CAAC;aACH;YACD,SAAS,EAAE,CAAC,mCAAe,CAAC;YAC5B,wCAAwC;YACxC,OAAO,EAAE,CAAC,mCAAe,CAAC;SAC3B,CAAC;;;;;;;;YACF,6KAA8B;;;YAAjB,uDAAc;;;;;AAAd,wCAAc","names":[],"sources":["C:\\Users\\16663\\Desktop\\tuheg\\packages\\common-backend\\src\\event-bus\\event-bus.module.ts"],"sourcesContent":["// 文件路径: libs/common/src/event-bus/event-bus.module.ts (自包含最终版)\n\nimport { Module } from '@nestjs/common'\nimport { ConfigModule, ConfigService } from '@nestjs/config'\nimport { ClientsModule, Transport } from '@nestjs/microservices'\nimport { EventBusService } from './event-bus.service'\n\nexport const NEXUS_EVENT_BUS = 'NEXUS_EVENT_BUS'\n\n@Module({\n  imports: [\n    // [核心] 在模块内部导入 ClientsModule，为本模块提供 ClientProxy 的创建能力\n    ClientsModule.registerAsync([\n      {\n        name: NEXUS_EVENT_BUS,\n        imports: [ConfigModule],\n        useFactory: (configService: ConfigService) => ({\n          transport: Transport.RMQ,\n          options: {\n            urls: [configService.get<string>('RABBITMQ_URL', 'amqp://localhost:5672')],\n            queue: 'nexus_gateway_queue',\n          },\n        }),\n        inject: [ConfigService],\n      },\n    ]),\n  ],\n  providers: [EventBusService],\n  // [核心] 将 EventBusService 导出，以便其他模块可以使用它\n  exports: [EventBusService],\n})\nexport class EventBusModule {}\n"],"version":3}