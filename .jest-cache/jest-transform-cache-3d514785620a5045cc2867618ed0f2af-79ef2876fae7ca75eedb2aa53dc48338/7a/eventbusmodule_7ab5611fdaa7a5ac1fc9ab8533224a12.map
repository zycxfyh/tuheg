{"file":"C:\\Users\\16663\\Desktop\\tuheg\\packages\\common-backend\\src\\event-bus\\event-bus.module.ts","mappings":";AAAA,+DAA+D;;;;;;;;;AAE/D,2CAAuC;AACvC,2CAA4D;AAC5D,yDAAgE;AAChE,2DAAqD;AAExC,QAAA,eAAe,GAAG,iBAAiB,CAAA;AAwBzC,IAAM,cAAc,GAApB,MAAM,cAAc;CAAG,CAAA;AAAjB,wCAAc;yBAAd,cAAc;IAtB1B,IAAA,eAAM,EAAC;QACN,OAAO,EAAE;YACP,sDAAsD;YACtD,6BAAa,CAAC,aAAa,CAAC;gBAC1B;oBACE,IAAI,EAAE,uBAAe;oBACrB,OAAO,EAAE,CAAC,qBAAY,CAAC;oBACvB,UAAU,EAAE,CAAC,aAA4B,EAAE,EAAE,CAAC,CAAC;wBAC7C,SAAS,EAAE,yBAAS,CAAC,GAAG;wBACxB,OAAO,EAAE;4BACP,IAAI,EAAE,CAAC,aAAa,CAAC,GAAG,CAAS,cAAc,EAAE,uBAAuB,CAAC,CAAC;4BAC1E,KAAK,EAAE,qBAAqB;yBAC7B;qBACF,CAAC;oBACF,MAAM,EAAE,CAAC,sBAAa,CAAC;iBACxB;aACF,CAAC;SACH;QACD,SAAS,EAAE,CAAC,mCAAe,CAAC;QAC5B,wCAAwC;QACxC,OAAO,EAAE,CAAC,mCAAe,CAAC;KAC3B,CAAC;GACW,cAAc,CAAG","names":[],"sources":["C:\\Users\\16663\\Desktop\\tuheg\\packages\\common-backend\\src\\event-bus\\event-bus.module.ts"],"sourcesContent":["// 文件路径: libs/common/src/event-bus/event-bus.module.ts (自包含最终版)\n\nimport { Module } from '@nestjs/common'\nimport { ConfigModule, ConfigService } from '@nestjs/config'\nimport { ClientsModule, Transport } from '@nestjs/microservices'\nimport { EventBusService } from './event-bus.service'\n\nexport const NEXUS_EVENT_BUS = 'NEXUS_EVENT_BUS'\n\n@Module({\n  imports: [\n    // [核心] 在模块内部导入 ClientsModule，为本模块提供 ClientProxy 的创建能力\n    ClientsModule.registerAsync([\n      {\n        name: NEXUS_EVENT_BUS,\n        imports: [ConfigModule],\n        useFactory: (configService: ConfigService) => ({\n          transport: Transport.RMQ,\n          options: {\n            urls: [configService.get<string>('RABBITMQ_URL', 'amqp://localhost:5672')],\n            queue: 'nexus_gateway_queue',\n          },\n        }),\n        inject: [ConfigService],\n      },\n    ]),\n  ],\n  providers: [EventBusService],\n  // [核心] 将 EventBusService 导出，以便其他模块可以使用它\n  exports: [EventBusService],\n})\nexport class EventBusModule {}\n"],"version":3}