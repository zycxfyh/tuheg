bdfdd2d9184d846a43e21716366be24e
"use strict";
// ============================================================================
// 跨记忆网络服务集成
// 集成 VCPToolBox 的智能记忆共享和联想能力
// ============================================================================
var __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {
    function accept(f) { if (f !== void 0 && typeof f !== "function") throw new TypeError("Function expected"); return f; }
    var kind = contextIn.kind, key = kind === "getter" ? "get" : kind === "setter" ? "set" : "value";
    var target = !descriptorIn && ctor ? contextIn["static"] ? ctor : ctor.prototype : null;
    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});
    var _, done = false;
    for (var i = decorators.length - 1; i >= 0; i--) {
        var context = {};
        for (var p in contextIn) context[p] = p === "access" ? {} : contextIn[p];
        for (var p in contextIn.access) context.access[p] = contextIn.access[p];
        context.addInitializer = function (f) { if (done) throw new TypeError("Cannot add initializers after decoration has completed"); extraInitializers.push(accept(f || null)); };
        var result = (0, decorators[i])(kind === "accessor" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);
        if (kind === "accessor") {
            if (result === void 0) continue;
            if (result === null || typeof result !== "object") throw new TypeError("Object expected");
            if (_ = accept(result.get)) descriptor.get = _;
            if (_ = accept(result.set)) descriptor.set = _;
            if (_ = accept(result.init)) initializers.unshift(_);
        }
        else if (_ = accept(result)) {
            if (kind === "field") initializers.unshift(_);
            else descriptor[key] = _;
        }
    }
    if (target) Object.defineProperty(target, contextIn.name, descriptor);
    done = true;
};
var __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {
    var useValue = arguments.length > 2;
    for (var i = 0; i < initializers.length; i++) {
        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);
    }
    return useValue ? value : void 0;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.CrossMemoryService = void 0;
const common_1 = require("@nestjs/common");
const CrossMemoryNetwork_1 = require("../../../apps/vcptoolbox/src/modules/storage/CrossMemoryNetwork");
let CrossMemoryService = (() => {
    let _classDecorators = [(0, common_1.Injectable)()];
    let _classDescriptor;
    let _classExtraInitializers = [];
    let _classThis;
    var CrossMemoryService = class {
        static { _classThis = this; }
        static {
            const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(null) : void 0;
            __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
            CrossMemoryService = _classThis = _classDescriptor.value;
            if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
            __runInitializers(_classThis, _classExtraInitializers);
        }
        configService;
        logger = new common_1.Logger(CrossMemoryService.name);
        constructor(configService) {
            this.configService = configService;
        }
        async onModuleInit() {
            await this.initializeMemorySystem();
            this.setupMemoryMaintenance();
            this.logger.log('跨记忆网络服务已初始化');
        }
        // ==================== 记忆系统初始化 ====================
        /**
         * 初始化记忆系统
         */
        async initializeMemorySystem() {
            // 设置记忆网络参数
            const similarityThreshold = this.configService.get('MEMORY_SIMILARITY_THRESHOLD', 0.7);
            const maxConnections = this.configService.get('MEMORY_MAX_CONNECTIONS', 10);
            const decayRate = this.configService.get('MEMORY_DECAY_RATE', 0.95);
            // 重新配置记忆网络（如果需要）
            // 注意：crossMemoryNetwork 已经在模块中初始化，这里可以设置参数
            // 创建系统初始记忆
            await this.createSystemMemories();
            this.logger.log('记忆系统参数已配置');
        }
        /**
         * 创建系统初始记忆
         */
        async createSystemMemories() {
            const systemMemories = [
                {
                    agentId: 'system',
                    type: 'knowledge',
                    content: {
                        topic: 'narrative_basics',
                        information: '叙事创作的基本要素包括人物、情节、设定和主题'
                    },
                    tags: ['narrative', 'basics', 'knowledge', 'system'],
                    importance: 0.9,
                    connections: []
                },
                {
                    agentId: 'system',
                    type: 'experience',
                    content: {
                        event: 'system_initialization',
                        outcome: '记忆系统成功初始化',
                        lessons: '记忆系统对于AI创作至关重要'
                    },
                    tags: ['system', 'initialization', 'experience'],
                    importance: 0.8,
                    connections: []
                },
                {
                    agentId: 'system',
                    type: 'knowledge',
                    content: {
                        topic: 'collaboration_patterns',
                        information: '有效的Agent协作需要明确的角色分工和通信协议'
                    },
                    tags: ['collaboration', 'patterns', 'knowledge', 'system'],
                    importance: 0.85,
                    connections: []
                }
            ];
            for (const memory of systemMemories) {
                try {
                    await CrossMemoryNetwork_1.crossMemoryNetwork.addMemory(memory);
                }
                catch (error) {
                    this.logger.warn(`创建系统记忆失败: ${memory.content}`, error);
                }
            }
            this.logger.log('系统初始记忆已创建');
        }
        /**
         * 设置记忆维护任务
         */
        setupMemoryMaintenance() {
            // 定期应用记忆衰减
            setInterval(() => {
                try {
                    CrossMemoryNetwork_1.crossMemoryNetwork.applyMemoryDecay();
                }
                catch (error) {
                    this.logger.error('记忆衰减应用失败:', error);
                }
            }, 60 * 60 * 1000); // 每小时执行一次
            // 定期清理和优化记忆网络
            setInterval(() => {
                this.optimizeMemoryNetwork();
            }, 24 * 60 * 60 * 1000); // 每天执行一次
        }
        // ==================== 记忆管理接口 ====================
        /**
         * 添加记忆
         */
        async addMemory(memoryData) {
            try {
                const memoryId = await CrossMemoryNetwork_1.crossMemoryNetwork.addMemory(memoryData);
                this.logger.debug(`记忆已添加: ${memoryId}`);
                return memoryId;
            }
            catch (error) {
                this.logger.error('添加记忆失败:', error);
                throw error;
            }
        }
        /**
         * 获取记忆
         */
        async getMemory(memoryId) {
            try {
                return CrossMemoryNetwork_1.crossMemoryNetwork.getMemory(memoryId);
            }
            catch (error) {
                this.logger.warn(`获取记忆失败 ${memoryId}:`, error);
                return null;
            }
        }
        /**
         * 更新记忆
         */
        async updateMemory(memoryId, updates) {
            try {
                const success = CrossMemoryNetwork_1.crossMemoryNetwork.updateMemory(memoryId, updates);
                if (success) {
                    this.logger.debug(`记忆已更新: ${memoryId}`);
                }
                return success;
            }
            catch (error) {
                this.logger.error(`更新记忆失败 ${memoryId}:`, error);
                return false;
            }
        }
        /**
         * 删除记忆
         */
        async deleteMemory(memoryId) {
            try {
                const success = CrossMemoryNetwork_1.crossMemoryNetwork.deleteMemory(memoryId);
                if (success) {
                    this.logger.debug(`记忆已删除: ${memoryId}`);
                }
                return success;
            }
            catch (error) {
                this.logger.error(`删除记忆失败 ${memoryId}:`, error);
                return false;
            }
        }
        /**
         * 查询记忆
         */
        async queryMemories(query) {
            try {
                return await CrossMemoryNetwork_1.crossMemoryNetwork.queryMemories(query);
            }
            catch (error) {
                this.logger.error('查询记忆失败:', error);
                return [];
            }
        }
        /**
         * 更新记忆重要性
         */
        async updateMemoryImportance(memoryId, importance) {
            try {
                const success = CrossMemoryNetwork_1.crossMemoryNetwork.updateMemoryImportance(memoryId, importance);
                if (success) {
                    this.logger.debug(`记忆重要性已更新: ${memoryId} = ${importance}`);
                }
                return success;
            }
            catch (error) {
                this.logger.error(`更新记忆重要性失败 ${memoryId}:`, error);
                return false;
            }
        }
        // ==================== 叙事专用记忆接口 ====================
        /**
         * 添加故事记忆
         */
        async addStoryMemory(storyId, agentId, content, type = 'experience') {
            const memoryData = {
                agentId,
                type,
                content: {
                    storyId,
                    ...content
                },
                tags: ['story', storyId, type, agentId],
                importance: this.calculateStoryMemoryImportance(content, type),
                connections: []
            };
            return await this.addMemory(memoryData);
        }
        /**
         * 查询故事相关记忆
         */
        async queryStoryMemories(storyId, agentId, limit = 20) {
            const query = {
                tags: ['story', storyId],
                limit,
                sortBy: 'recency'
            };
            if (agentId) {
                query.agentId = agentId;
            }
            return await this.queryMemories(query);
        }
        /**
         * 添加角色记忆
         */
        async addCharacterMemory(characterId, agentId, content) {
            const memoryData = {
                agentId,
                type: 'experience',
                content: {
                    characterId,
                    ...content
                },
                tags: ['character', characterId, 'development', agentId],
                importance: this.calculateCharacterMemoryImportance(content),
                connections: []
            };
            return await this.addMemory(memoryData);
        }
        /**
         * 查询角色相关记忆
         */
        async queryCharacterMemories(characterId, limit = 15) {
            return await this.queryMemories({
                tags: ['character', characterId],
                limit,
                sortBy: 'importance'
            });
        }
        /**
         * 添加创作模式记忆
         */
        async addCreativePattern(patternType, agentId, pattern, success) {
            const memoryData = {
                agentId,
                type: success ? 'experience' : 'knowledge',
                content: {
                    patternType,
                    pattern,
                    success,
                    lessons: success ? '有效的创作模式' : '需要改进的创作模式'
                },
                tags: ['creative-pattern', patternType, success ? 'success' : 'failure', agentId],
                importance: success ? 0.8 : 0.6,
                connections: []
            };
            return await this.addMemory(memoryData);
        }
        /**
         * 查找相似创作模式
         */
        async findSimilarCreativePatterns(patternType, currentPattern, limit = 5) {
            // 简化的模式匹配，实际应该使用更复杂的相似度算法
            const query = {
                tags: ['creative-pattern', patternType, 'success'],
                limit,
                sortBy: 'importance'
            };
            const results = await this.queryMemories(query);
            // 进一步过滤相似模式
            return results.filter(result => {
                const pattern = result.memory.content.pattern;
                return this.calculatePatternSimilarity(currentPattern, pattern) > 0.7;
            });
        }
        /**
         * 添加用户偏好记忆
         */
        async addUserPreference(userId, preferenceType, preference) {
            const memoryData = {
                agentId: 'user-preference-agent',
                type: 'knowledge',
                content: {
                    userId,
                    preferenceType,
                    preference,
                    context: 'user_preference'
                },
                tags: ['user-preference', userId, preferenceType],
                importance: 0.9, // 用户偏好很重要
                connections: []
            };
            return await this.addMemory(memoryData);
        }
        /**
         * 获取用户偏好
         */
        async getUserPreferences(userId, preferenceType) {
            const query = {
                tags: ['user-preference', userId],
                sortBy: 'recency',
                limit: 50
            };
            if (preferenceType) {
                query.tags.push(preferenceType);
            }
            const results = await this.queryMemories(query);
            return results.map(result => ({
                type: result.memory.content.preferenceType,
                preference: result.memory.content.preference,
                timestamp: result.memory.metadata.createdAt,
                confidence: result.memory.metadata.confidence
            }));
        }
        // ==================== 智能联想接口 ====================
        /**
         * 查找相关记忆
         */
        async findRelatedMemories(memoryId, limit = 10) {
            try {
                return await CrossMemoryNetwork_1.crossMemoryNetwork.findRelatedMemories(memoryId, limit);
            }
            catch (error) {
                this.logger.warn(`查找相关记忆失败 ${memoryId}:`, error);
                return [];
            }
        }
        /**
         * 基于内容的智能搜索
         */
        async intelligentSearch(query, context = {}, limit = 20) {
            const searchQuery = {
                content: query,
                fuzzy: true,
                limit,
                sortBy: 'relevance'
            };
            // 添加上下文过滤
            if (context.userId) {
                searchQuery.tags = (searchQuery.tags || []).concat(['user', context.userId]);
            }
            if (context.storyId) {
                searchQuery.tags = (searchQuery.tags || []).concat(['story', context.storyId]);
            }
            if (context.agentId) {
                searchQuery.agentId = context.agentId;
            }
            if (context.tags) {
                searchQuery.tags = (searchQuery.tags || []).concat(context.tags);
            }
            return await this.queryMemories(searchQuery);
        }
        /**
         * 获取创作灵感
         */
        async getCreativeInspiration(storyId, theme, limit = 10) {
            // 查找与主题相关的成功创作经验
            const inspirationQuery = {
                tags: ['creative-pattern', 'success'],
                content: theme,
                fuzzy: true,
                limit,
                sortBy: 'importance'
            };
            const results = await this.queryMemories(inspirationQuery);
            // 补充一些通用的创作知识
            const generalKnowledge = await this.queryMemories({
                tags: ['narrative', 'knowledge'],
                limit: 5
            });
            return [...results, ...generalKnowledge].slice(0, limit);
        }
        // ==================== Agent协作记忆 ====================
        /**
         * 记录Agent协作经验
         */
        async recordCollaborationExperience(collaborationId, agents, outcome) {
            const memoryData = {
                agentId: 'collaboration-agent',
                type: 'experience',
                content: {
                    collaborationId,
                    agents,
                    outcome,
                    effectiveness: this.evaluateCollaborationEffectiveness(outcome),
                    lessons: this.extractCollaborationLessons(outcome)
                },
                tags: ['collaboration', 'experience', collaborationId, ...agents],
                importance: 0.7,
                connections: []
            };
            return await this.addMemory(memoryData);
        }
        /**
         * 获取Agent协作历史
         */
        async getCollaborationHistory(agentId, limit = 10) {
            return await this.queryMemories({
                tags: ['collaboration', agentId],
                limit,
                sortBy: 'recency'
            });
        }
        /**
         * 学习最优协作模式
         */
        async learnOptimalCollaborationPatterns() {
            const successfulCollaborations = await this.queryMemories({
                tags: ['collaboration', 'experience'],
                content: 'success',
                fuzzy: true,
                limit: 50
            });
            // 分析协作模式
            const patterns = this.analyzeCollaborationPatterns(successfulCollaborations);
            return patterns;
        }
        // ==================== 辅助方法 ====================
        /**
         * 计算故事记忆重要性
         */
        calculateStoryMemoryImportance(content, type) {
            let importance = 0.5;
            switch (type) {
                case 'experience':
                    importance = 0.7;
                    break;
                case 'knowledge':
                    importance = 0.8;
                    break;
                case 'event':
                    importance = 0.6;
                    break;
            }
            // 根据内容调整重要性
            if (content.keyMoment)
                importance += 0.2;
            if (content.conflict)
                importance += 0.1;
            if (content.resolution)
                importance += 0.1;
            return Math.min(1, importance);
        }
        /**
         * 计算角色记忆重要性
         */
        calculateCharacterMemoryImportance(content) {
            let importance = 0.6;
            if (content.personalityChange)
                importance += 0.2;
            if (content.relationshipChange)
                importance += 0.15;
            if (content.keyDecision)
                importance += 0.1;
            return Math.min(1, importance);
        }
        /**
         * 计算模式相似度
         */
        calculatePatternSimilarity(pattern1, pattern2) {
            // 简化的相似度计算
            if (JSON.stringify(pattern1) === JSON.stringify(pattern2))
                return 1.0;
            // 检查共同属性
            const keys1 = Object.keys(pattern1);
            const keys2 = Object.keys(pattern2);
            const commonKeys = keys1.filter(key => keys2.includes(key));
            if (commonKeys.length === 0)
                return 0;
            let similarity = commonKeys.length / Math.max(keys1.length, keys2.length);
            // 检查共同值
            for (const key of commonKeys) {
                if (pattern1[key] === pattern2[key]) {
                    similarity += 0.1;
                }
            }
            return Math.min(1, similarity);
        }
        /**
         * 评估协作有效性
         */
        evaluateCollaborationEffectiveness(outcome) {
            // 简化的有效性评估
            let effectiveness = 0.5;
            if (outcome.success)
                effectiveness += 0.3;
            if (outcome.quality > 0.8)
                effectiveness += 0.2;
            if (outcome.timeEfficiency > 0.7)
                effectiveness += 0.1;
            return Math.min(1, effectiveness);
        }
        /**
         * 提取协作经验教训
         */
        extractCollaborationLessons(outcome) {
            const lessons = [];
            if (outcome.communicationIssues) {
                lessons.push('改善沟通机制');
            }
            if (outcome.roleConflicts) {
                lessons.push('明确角色分工');
            }
            if (outcome.timeDelays) {
                lessons.push('优化时间管理');
            }
            return lessons;
        }
        /**
         * 分析协作模式
         */
        analyzeCollaborationPatterns(collaborations) {
            // 简化的模式分析
            const patterns = [];
            for (const collab of collaborations) {
                const pattern = {
                    agentCount: collab.memory.content.agents?.length || 0,
                    effectiveness: collab.memory.content.effectiveness || 0.5,
                    keyFactors: collab.memory.content.lessons || []
                };
                patterns.push(pattern);
            }
            return patterns.sort((a, b) => b.effectiveness - a.effectiveness);
        }
        /**
         * 优化记忆网络
         */
        async optimizeMemoryNetwork() {
            try {
                // 清理低重要性记忆
                const stats = CrossMemoryNetwork_1.crossMemoryNetwork.getStats();
                this.logger.debug(`记忆网络状态: ${stats.totalMemories} 记忆, ${stats.totalConnections} 连接`);
                // 这里可以添加更复杂的优化逻辑
                // 比如合并相似记忆、重建连接等
            }
            catch (error) {
                this.logger.error('记忆网络优化失败:', error);
            }
        }
        // ==================== 统计和监控 ====================
        /**
         * 获取记忆统计信息
         */
        getMemoryStats() {
            try {
                return CrossMemoryNetwork_1.crossMemoryNetwork.getStats();
            }
            catch (error) {
                this.logger.error('获取记忆统计失败:', error);
                return {
                    totalMemories: 0,
                    totalConnections: 0,
                    agentCount: 0,
                    memoryTypes: {},
                    averageImportance: 0
                };
            }
        }
        /**
         * 健康检查
         */
        async healthCheck() {
            try {
                const stats = this.getMemoryStats();
                return {
                    status: 'healthy',
                    details: stats
                };
            }
            catch (error) {
                return {
                    status: 'error',
                    details: error.message
                };
            }
        }
        /**
         * 导出记忆数据
         */
        async exportMemoryData() {
            try {
                return CrossMemoryNetwork_1.crossMemoryNetwork.exportMemoryNetwork();
            }
            catch (error) {
                this.logger.error('导出记忆数据失败:', error);
                return { memories: [], connections: {} };
            }
        }
        /**
         * 导入记忆数据
         */
        async importMemoryData(data) {
            try {
                CrossMemoryNetwork_1.crossMemoryNetwork.importMemoryNetwork(data);
                this.logger.log('记忆数据导入成功');
            }
            catch (error) {
                this.logger.error('导入记忆数据失败:', error);
                throw error;
            }
        }
    };
    return CrossMemoryService = _classThis;
})();
exports.CrossMemoryService = CrossMemoryService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFwxNjY2M1xcRGVza3RvcFxcdHVoZWdcXHBhY2thZ2VzXFxjb21tb24tYmFja2VuZFxcc3JjXFx2Y3BcXGNyb3NzLW1lbW9yeS5zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7QUFBQSwrRUFBK0U7QUFDL0UsWUFBWTtBQUNaLDZCQUE2QjtBQUM3QiwrRUFBK0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFL0UsMkNBQWlFO0FBRWpFLHdHQUt3RTtJQUczRCxrQkFBa0I7NEJBRDlCLElBQUEsbUJBQVUsR0FBRTs7Ozs7Ozs7WUFDYiw2S0F1cEJDOzs7WUF2cEJZLHVEQUFrQjs7UUFHVCxhQUFhO1FBRmhCLE1BQU0sR0FBRyxJQUFJLGVBQU0sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUU3RCxZQUFvQixhQUE0QjtZQUE1QixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtRQUFHLENBQUM7UUFFcEQsS0FBSyxDQUFDLFlBQVk7WUFDaEIsTUFBTSxJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQTtZQUNuQyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQTtZQUM3QixJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQTtRQUNoQyxDQUFDO1FBRUQsb0RBQW9EO1FBRXBEOztXQUVHO1FBQ0ssS0FBSyxDQUFDLHNCQUFzQjtZQUNsQyxXQUFXO1lBQ1gsTUFBTSxtQkFBbUIsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyw2QkFBNkIsRUFBRSxHQUFHLENBQUMsQ0FBQTtZQUN0RixNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsRUFBRSxFQUFFLENBQUMsQ0FBQTtZQUMzRSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsQ0FBQTtZQUVuRSxpQkFBaUI7WUFDakIsMkNBQTJDO1lBRTND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WUFDakQsQ0FBQztZQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7Z0JBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFBO2dCQUNyQyxPQUFPLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxXQUFXLEVBQUUsRUFBRSxFQUFFLENBQUE7WUFDMUMsQ0FBQztRQUNILENBQUM7UUFFRDs7V0FFRztRQUNILEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFTO1lBQzlCLElBQUksQ0FBQztnQkFDSCx1Q0FBa0IsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsQ0FBQTtnQkFDNUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUE7WUFDN0IsQ0FBQztZQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7Z0JBQ2YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFBO2dCQUNyQyxNQUFNLEtBQUssQ0FBQTtZQUNiLENBQUM7UUFDSCxDQUFDOzs7O0FBdHBCVSxnREFBa0IiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFwxNjY2M1xcRGVza3RvcFxcdHVoZWdcXHBhY2thZ2VzXFxjb21tb24tYmFja2VuZFxcc3JjXFx2Y3BcXGNyb3NzLW1lbW9yeS5zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8g6Leo6K6w5b+G572R57uc5pyN5Yqh6ZuG5oiQXHJcbi8vIOmbhuaIkCBWQ1BUb29sQm94IOeahOaZuuiDveiusOW/huWFseS6q+WSjOiBlOaDs+iDveWKm1xyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5pbXBvcnQgeyBJbmplY3RhYmxlLCBMb2dnZXIsIE9uTW9kdWxlSW5pdCB9IGZyb20gJ0BuZXN0anMvY29tbW9uJ1xyXG5pbXBvcnQgeyBDb25maWdTZXJ2aWNlIH0gZnJvbSAnQG5lc3Rqcy9jb25maWcnXHJcbmltcG9ydCB7XHJcbiAgY3Jvc3NNZW1vcnlOZXR3b3JrLFxyXG4gIE1lbW9yeUVudHJ5LFxyXG4gIE1lbW9yeVF1ZXJ5LFxyXG4gIE1lbW9yeVNlYXJjaFJlc3VsdFxyXG59IGZyb20gJy4uLy4uLy4uL2FwcHMvdmNwdG9vbGJveC9zcmMvbW9kdWxlcy9zdG9yYWdlL0Nyb3NzTWVtb3J5TmV0d29yaydcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIENyb3NzTWVtb3J5U2VydmljZSBpbXBsZW1lbnRzIE9uTW9kdWxlSW5pdCB7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBsb2dnZXIgPSBuZXcgTG9nZ2VyKENyb3NzTWVtb3J5U2VydmljZS5uYW1lKVxyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbmZpZ1NlcnZpY2U6IENvbmZpZ1NlcnZpY2UpIHt9XHJcblxyXG4gIGFzeW5jIG9uTW9kdWxlSW5pdCgpIHtcclxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZU1lbW9yeVN5c3RlbSgpXHJcbiAgICB0aGlzLnNldHVwTWVtb3J5TWFpbnRlbmFuY2UoKVxyXG4gICAgdGhpcy5sb2dnZXIubG9nKCfot6jorrDlv4bnvZHnu5zmnI3liqHlt7LliJ3lp4vljJYnKVxyXG4gIH1cclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT0g6K6w5b+G57O757uf5Yid5aeL5YyWID09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIneWni+WMluiusOW/huezu+e7n1xyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZU1lbW9yeVN5c3RlbSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIC8vIOiuvue9ruiusOW/hue9kee7nOWPguaVsFxyXG4gICAgY29uc3Qgc2ltaWxhcml0eVRocmVzaG9sZCA9IHRoaXMuY29uZmlnU2VydmljZS5nZXQoJ01FTU9SWV9TSU1JTEFSSVRZX1RIUkVTSE9MRCcsIDAuNylcclxuICAgIGNvbnN0IG1heENvbm5lY3Rpb25zID0gdGhpcy5jb25maWdTZXJ2aWNlLmdldCgnTUVNT1JZX01BWF9DT05ORUNUSU9OUycsIDEwKVxyXG4gICAgY29uc3QgZGVjYXlSYXRlID0gdGhpcy5jb25maWdTZXJ2aWNlLmdldCgnTUVNT1JZX0RFQ0FZX1JBVEUnLCAwLjk1KVxyXG5cclxuICAgIC8vIOmHjeaWsOmFjee9ruiusOW/hue9kee7nO+8iOWmguaenOmcgOimge+8iVxyXG4gICAgLy8g5rOo5oSP77yaY3Jvc3NNZW1vcnlOZXR3b3JrIOW3sue7j+WcqOaooeWdl+S4reWIneWni+WMlu+8jOi/memHjOWPr+S7peiuvue9ruWPguaVsFxyXG5cclxuICAgIC8vIOWIm+W7uuezu+e7n+WIneWni+iusOW/hlxyXG4gICAgYXdhaXQgdGhpcy5jcmVhdGVTeXN0ZW1NZW1vcmllcygpXHJcblxyXG4gICAgdGhpcy5sb2dnZXIubG9nKCforrDlv4bns7vnu5/lj4LmlbDlt7LphY3nva4nKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yib5bu657O757uf5Yid5aeL6K6w5b+GXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVTeXN0ZW1NZW1vcmllcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHN5c3RlbU1lbW9yaWVzOiBPbWl0PE1lbW9yeUVudHJ5LCAnaWQnIHwgJ2ZpbmdlcnByaW50JyB8ICdtZXRhZGF0YSc+W10gPSBbXHJcbiAgICAgIHtcclxuICAgICAgICBhZ2VudElkOiAnc3lzdGVtJyxcclxuICAgICAgICB0eXBlOiAna25vd2xlZGdlJyxcclxuICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICB0b3BpYzogJ25hcnJhdGl2ZV9iYXNpY3MnLFxyXG4gICAgICAgICAgaW5mb3JtYXRpb246ICflj5nkuovliJvkvZznmoTln7rmnKzopoHntKDljIXmi6zkurrnianjgIHmg4XoioLjgIHorr7lrprlkozkuLvpopgnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0YWdzOiBbJ25hcnJhdGl2ZScsICdiYXNpY3MnLCAna25vd2xlZGdlJywgJ3N5c3RlbSddLFxyXG4gICAgICAgIGltcG9ydGFuY2U6IDAuOSxcclxuICAgICAgICBjb25uZWN0aW9uczogW11cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGFnZW50SWQ6ICdzeXN0ZW0nLFxyXG4gICAgICAgIHR5cGU6ICdleHBlcmllbmNlJyxcclxuICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICBldmVudDogJ3N5c3RlbV9pbml0aWFsaXphdGlvbicsXHJcbiAgICAgICAgICBvdXRjb21lOiAn6K6w5b+G57O757uf5oiQ5Yqf5Yid5aeL5YyWJyxcclxuICAgICAgICAgIGxlc3NvbnM6ICforrDlv4bns7vnu5/lr7nkuo5BSeWIm+S9nOiHs+WFs+mHjeimgSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRhZ3M6IFsnc3lzdGVtJywgJ2luaXRpYWxpemF0aW9uJywgJ2V4cGVyaWVuY2UnXSxcclxuICAgICAgICBpbXBvcnRhbmNlOiAwLjgsXHJcbiAgICAgICAgY29ubmVjdGlvbnM6IFtdXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBhZ2VudElkOiAnc3lzdGVtJyxcclxuICAgICAgICB0eXBlOiAna25vd2xlZGdlJyxcclxuICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICB0b3BpYzogJ2NvbGxhYm9yYXRpb25fcGF0dGVybnMnLFxyXG4gICAgICAgICAgaW5mb3JtYXRpb246ICfmnInmlYjnmoRBZ2VudOWNj+S9nOmcgOimgeaYjuehrueahOinkuiJsuWIhuW3peWSjOmAmuS/oeWNj+iuridcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRhZ3M6IFsnY29sbGFib3JhdGlvbicsICdwYXR0ZXJucycsICdrbm93bGVkZ2UnLCAnc3lzdGVtJ10sXHJcbiAgICAgICAgaW1wb3J0YW5jZTogMC44NSxcclxuICAgICAgICBjb25uZWN0aW9uczogW11cclxuICAgICAgfVxyXG4gICAgXVxyXG5cclxuICAgIGZvciAoY29uc3QgbWVtb3J5IG9mIHN5c3RlbU1lbW9yaWVzKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgY3Jvc3NNZW1vcnlOZXR3b3JrLmFkZE1lbW9yeShtZW1vcnkpXHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5sb2dnZXIud2Fybihg5Yib5bu657O757uf6K6w5b+G5aSx6LSlOiAke21lbW9yeS5jb250ZW50fWAsIGVycm9yKVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5sb2dnZXIubG9nKCfns7vnu5/liJ3lp4vorrDlv4blt7LliJvlu7onKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6+572u6K6w5b+G57u05oqk5Lu75YqhXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzZXR1cE1lbW9yeU1haW50ZW5hbmNlKCk6IHZvaWQge1xyXG4gICAgLy8g5a6a5pyf5bqU55So6K6w5b+G6KGw5YePXHJcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY3Jvc3NNZW1vcnlOZXR3b3JrLmFwcGx5TWVtb3J5RGVjYXkoKVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCforrDlv4boobDlh4/lupTnlKjlpLHotKU6JywgZXJyb3IpXHJcbiAgICAgIH1cclxuICAgIH0sIDYwICogNjAgKiAxMDAwKSAvLyDmr4/lsI/ml7bmiafooYzkuIDmrKFcclxuXHJcbiAgICAvLyDlrprmnJ/muIXnkIblkozkvJjljJborrDlv4bnvZHnu5xcclxuICAgIHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgdGhpcy5vcHRpbWl6ZU1lbW9yeU5ldHdvcmsoKVxyXG4gICAgfSwgMjQgKiA2MCAqIDYwICogMTAwMCkgLy8g5q+P5aSp5omn6KGM5LiA5qyhXHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PSDorrDlv4bnrqHnkIbmjqXlj6MgPT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLyoqXHJcbiAgICog5re75Yqg6K6w5b+GXHJcbiAgICovXHJcbiAgYXN5bmMgYWRkTWVtb3J5KG1lbW9yeURhdGE6IE9taXQ8TWVtb3J5RW50cnksICdpZCcgfCAnZmluZ2VycHJpbnQnIHwgJ21ldGFkYXRhJz4pOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgbWVtb3J5SWQgPSBhd2FpdCBjcm9zc01lbW9yeU5ldHdvcmsuYWRkTWVtb3J5KG1lbW9yeURhdGEpXHJcbiAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGDorrDlv4blt7Lmt7vliqA6ICR7bWVtb3J5SWR9YClcclxuICAgICAgcmV0dXJuIG1lbW9yeUlkXHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCfmt7vliqDorrDlv4blpLHotKU6JywgZXJyb3IpXHJcbiAgICAgIHRocm93IGVycm9yXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5borrDlv4ZcclxuICAgKi9cclxuICBhc3luYyBnZXRNZW1vcnkobWVtb3J5SWQ6IHN0cmluZyk6IFByb21pc2U8TWVtb3J5RW50cnkgfCBudWxsPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gY3Jvc3NNZW1vcnlOZXR3b3JrLmdldE1lbW9yeShtZW1vcnlJZClcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgdGhpcy5sb2dnZXIud2Fybihg6I635Y+W6K6w5b+G5aSx6LSlICR7bWVtb3J5SWR9OmAsIGVycm9yKVxyXG4gICAgICByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pu05paw6K6w5b+GXHJcbiAgICovXHJcbiAgYXN5bmMgdXBkYXRlTWVtb3J5KG1lbW9yeUlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8T21pdDxNZW1vcnlFbnRyeSwgJ2lkJyB8ICdmaW5nZXJwcmludCcgfCAnbWV0YWRhdGEnPj4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBjcm9zc01lbW9yeU5ldHdvcmsudXBkYXRlTWVtb3J5KG1lbW9yeUlkLCB1cGRhdGVzKVxyXG4gICAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGDorrDlv4blt7Lmm7TmlrA6ICR7bWVtb3J5SWR9YClcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc3VjY2Vzc1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihg5pu05paw6K6w5b+G5aSx6LSlICR7bWVtb3J5SWR9OmAsIGVycm9yKVxyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIoOmZpOiusOW/hlxyXG4gICAqL1xyXG4gIGFzeW5jIGRlbGV0ZU1lbW9yeShtZW1vcnlJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzdWNjZXNzID0gY3Jvc3NNZW1vcnlOZXR3b3JrLmRlbGV0ZU1lbW9yeShtZW1vcnlJZClcclxuICAgICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1Zyhg6K6w5b+G5bey5Yig6ZmkOiAke21lbW9yeUlkfWApXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHN1Y2Nlc3NcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYOWIoOmZpOiusOW/huWksei0pSAke21lbW9yeUlkfTpgLCBlcnJvcilcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmn6Xor6LorrDlv4ZcclxuICAgKi9cclxuICBhc3luYyBxdWVyeU1lbW9yaWVzKHF1ZXJ5OiBNZW1vcnlRdWVyeSk6IFByb21pc2U8TWVtb3J5U2VhcmNoUmVzdWx0W10+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCBjcm9zc01lbW9yeU5ldHdvcmsucXVlcnlNZW1vcmllcyhxdWVyeSlcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ+afpeivouiusOW/huWksei0pTonLCBlcnJvcilcclxuICAgICAgcmV0dXJuIFtdXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmm7TmlrDorrDlv4bph43opoHmgKdcclxuICAgKi9cclxuICBhc3luYyB1cGRhdGVNZW1vcnlJbXBvcnRhbmNlKG1lbW9yeUlkOiBzdHJpbmcsIGltcG9ydGFuY2U6IG51bWJlcik6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc3VjY2VzcyA9IGNyb3NzTWVtb3J5TmV0d29yay51cGRhdGVNZW1vcnlJbXBvcnRhbmNlKG1lbW9yeUlkLCBpbXBvcnRhbmNlKVxyXG4gICAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGDorrDlv4bph43opoHmgKflt7Lmm7TmlrA6ICR7bWVtb3J5SWR9ID0gJHtpbXBvcnRhbmNlfWApXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHN1Y2Nlc3NcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoYOabtOaWsOiusOW/humHjeimgeaAp+Wksei0pSAke21lbW9yeUlkfTpgLCBlcnJvcilcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PSDlj5nkuovkuJPnlKjorrDlv4bmjqXlj6MgPT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLyoqXHJcbiAgICog5re75Yqg5pWF5LqL6K6w5b+GXHJcbiAgICovXHJcbiAgYXN5bmMgYWRkU3RvcnlNZW1vcnkoc3RvcnlJZDogc3RyaW5nLCBhZ2VudElkOiBzdHJpbmcsIGNvbnRlbnQ6IGFueSwgdHlwZTogTWVtb3J5RW50cnlbJ3R5cGUnXSA9ICdleHBlcmllbmNlJyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCBtZW1vcnlEYXRhID0ge1xyXG4gICAgICBhZ2VudElkLFxyXG4gICAgICB0eXBlLFxyXG4gICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgc3RvcnlJZCxcclxuICAgICAgICAuLi5jb250ZW50XHJcbiAgICAgIH0sXHJcbiAgICAgIHRhZ3M6IFsnc3RvcnknLCBzdG9yeUlkLCB0eXBlLCBhZ2VudElkXSxcclxuICAgICAgaW1wb3J0YW5jZTogdGhpcy5jYWxjdWxhdGVTdG9yeU1lbW9yeUltcG9ydGFuY2UoY29udGVudCwgdHlwZSksXHJcbiAgICAgIGNvbm5lY3Rpb25zOiBbXVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhd2FpdCB0aGlzLmFkZE1lbW9yeShtZW1vcnlEYXRhKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5p+l6K+i5pWF5LqL55u45YWz6K6w5b+GXHJcbiAgICovXHJcbiAgYXN5bmMgcXVlcnlTdG9yeU1lbW9yaWVzKHN0b3J5SWQ6IHN0cmluZywgYWdlbnRJZD86IHN0cmluZywgbGltaXQ6IG51bWJlciA9IDIwKTogUHJvbWlzZTxNZW1vcnlTZWFyY2hSZXN1bHRbXT4ge1xyXG4gICAgY29uc3QgcXVlcnk6IE1lbW9yeVF1ZXJ5ID0ge1xyXG4gICAgICB0YWdzOiBbJ3N0b3J5Jywgc3RvcnlJZF0sXHJcbiAgICAgIGxpbWl0LFxyXG4gICAgICBzb3J0Qnk6ICdyZWNlbmN5J1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChhZ2VudElkKSB7XHJcbiAgICAgIHF1ZXJ5LmFnZW50SWQgPSBhZ2VudElkXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucXVlcnlNZW1vcmllcyhxdWVyeSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa3u+WKoOinkuiJsuiusOW/hlxyXG4gICAqL1xyXG4gIGFzeW5jIGFkZENoYXJhY3Rlck1lbW9yeShjaGFyYWN0ZXJJZDogc3RyaW5nLCBhZ2VudElkOiBzdHJpbmcsIGNvbnRlbnQ6IGFueSk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCBtZW1vcnlEYXRhID0ge1xyXG4gICAgICBhZ2VudElkLFxyXG4gICAgICB0eXBlOiAnZXhwZXJpZW5jZScsXHJcbiAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICBjaGFyYWN0ZXJJZCxcclxuICAgICAgICAuLi5jb250ZW50XHJcbiAgICAgIH0sXHJcbiAgICAgIHRhZ3M6IFsnY2hhcmFjdGVyJywgY2hhcmFjdGVySWQsICdkZXZlbG9wbWVudCcsIGFnZW50SWRdLFxyXG4gICAgICBpbXBvcnRhbmNlOiB0aGlzLmNhbGN1bGF0ZUNoYXJhY3Rlck1lbW9yeUltcG9ydGFuY2UoY29udGVudCksXHJcbiAgICAgIGNvbm5lY3Rpb25zOiBbXVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhd2FpdCB0aGlzLmFkZE1lbW9yeShtZW1vcnlEYXRhKVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5p+l6K+i6KeS6Imy55u45YWz6K6w5b+GXHJcbiAgICovXHJcbiAgYXN5bmMgcXVlcnlDaGFyYWN0ZXJNZW1vcmllcyhjaGFyYWN0ZXJJZDogc3RyaW5nLCBsaW1pdDogbnVtYmVyID0gMTUpOiBQcm9taXNlPE1lbW9yeVNlYXJjaFJlc3VsdFtdPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5xdWVyeU1lbW9yaWVzKHtcclxuICAgICAgdGFnczogWydjaGFyYWN0ZXInLCBjaGFyYWN0ZXJJZF0sXHJcbiAgICAgIGxpbWl0LFxyXG4gICAgICBzb3J0Qnk6ICdpbXBvcnRhbmNlJ1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOa3u+WKoOWIm+S9nOaooeW8j+iusOW/hlxyXG4gICAqL1xyXG4gIGFzeW5jIGFkZENyZWF0aXZlUGF0dGVybihwYXR0ZXJuVHlwZTogc3RyaW5nLCBhZ2VudElkOiBzdHJpbmcsIHBhdHRlcm46IGFueSwgc3VjY2VzczogYm9vbGVhbik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCBtZW1vcnlEYXRhID0ge1xyXG4gICAgICBhZ2VudElkLFxyXG4gICAgICB0eXBlOiBzdWNjZXNzID8gJ2V4cGVyaWVuY2UnIDogJ2tub3dsZWRnZScsXHJcbiAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICBwYXR0ZXJuVHlwZSxcclxuICAgICAgICBwYXR0ZXJuLFxyXG4gICAgICAgIHN1Y2Nlc3MsXHJcbiAgICAgICAgbGVzc29uczogc3VjY2VzcyA/ICfmnInmlYjnmoTliJvkvZzmqKHlvI8nIDogJ+mcgOimgeaUuei/m+eahOWIm+S9nOaooeW8jydcclxuICAgICAgfSxcclxuICAgICAgdGFnczogWydjcmVhdGl2ZS1wYXR0ZXJuJywgcGF0dGVyblR5cGUsIHN1Y2Nlc3MgPyAnc3VjY2VzcycgOiAnZmFpbHVyZScsIGFnZW50SWRdLFxyXG4gICAgICBpbXBvcnRhbmNlOiBzdWNjZXNzID8gMC44IDogMC42LFxyXG4gICAgICBjb25uZWN0aW9uczogW11cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5hZGRNZW1vcnkobWVtb3J5RGF0YSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOafpeaJvuebuOS8vOWIm+S9nOaooeW8j1xyXG4gICAqL1xyXG4gIGFzeW5jIGZpbmRTaW1pbGFyQ3JlYXRpdmVQYXR0ZXJucyhwYXR0ZXJuVHlwZTogc3RyaW5nLCBjdXJyZW50UGF0dGVybjogYW55LCBsaW1pdDogbnVtYmVyID0gNSk6IFByb21pc2U8TWVtb3J5U2VhcmNoUmVzdWx0W10+IHtcclxuICAgIC8vIOeugOWMlueahOaooeW8j+WMuemFje+8jOWunumZheW6lOivpeS9v+eUqOabtOWkjeadgueahOebuOS8vOW6pueul+azlVxyXG4gICAgY29uc3QgcXVlcnk6IE1lbW9yeVF1ZXJ5ID0ge1xyXG4gICAgICB0YWdzOiBbJ2NyZWF0aXZlLXBhdHRlcm4nLCBwYXR0ZXJuVHlwZSwgJ3N1Y2Nlc3MnXSxcclxuICAgICAgbGltaXQsXHJcbiAgICAgIHNvcnRCeTogJ2ltcG9ydGFuY2UnXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMucXVlcnlNZW1vcmllcyhxdWVyeSlcclxuXHJcbiAgICAvLyDov5vkuIDmraXov4fmu6Tnm7jkvLzmqKHlvI9cclxuICAgIHJldHVybiByZXN1bHRzLmZpbHRlcihyZXN1bHQgPT4ge1xyXG4gICAgICBjb25zdCBwYXR0ZXJuID0gcmVzdWx0Lm1lbW9yeS5jb250ZW50LnBhdHRlcm5cclxuICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlUGF0dGVyblNpbWlsYXJpdHkoY3VycmVudFBhdHRlcm4sIHBhdHRlcm4pID4gMC43XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5re75Yqg55So5oi35YGP5aW96K6w5b+GXHJcbiAgICovXHJcbiAgYXN5bmMgYWRkVXNlclByZWZlcmVuY2UodXNlcklkOiBzdHJpbmcsIHByZWZlcmVuY2VUeXBlOiBzdHJpbmcsIHByZWZlcmVuY2U6IGFueSk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCBtZW1vcnlEYXRhID0ge1xyXG4gICAgICBhZ2VudElkOiAndXNlci1wcmVmZXJlbmNlLWFnZW50JyxcclxuICAgICAgdHlwZTogJ2tub3dsZWRnZScsXHJcbiAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgcHJlZmVyZW5jZVR5cGUsXHJcbiAgICAgICAgcHJlZmVyZW5jZSxcclxuICAgICAgICBjb250ZXh0OiAndXNlcl9wcmVmZXJlbmNlJ1xyXG4gICAgICB9LFxyXG4gICAgICB0YWdzOiBbJ3VzZXItcHJlZmVyZW5jZScsIHVzZXJJZCwgcHJlZmVyZW5jZVR5cGVdLFxyXG4gICAgICBpbXBvcnRhbmNlOiAwLjksIC8vIOeUqOaIt+WBj+WlveW+iOmHjeimgVxyXG4gICAgICBjb25uZWN0aW9uczogW11cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5hZGRNZW1vcnkobWVtb3J5RGF0YSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPlueUqOaIt+WBj+WlvVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldFVzZXJQcmVmZXJlbmNlcyh1c2VySWQ6IHN0cmluZywgcHJlZmVyZW5jZVR5cGU/OiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XHJcbiAgICBjb25zdCBxdWVyeTogTWVtb3J5UXVlcnkgPSB7XHJcbiAgICAgIHRhZ3M6IFsndXNlci1wcmVmZXJlbmNlJywgdXNlcklkXSxcclxuICAgICAgc29ydEJ5OiAncmVjZW5jeScsXHJcbiAgICAgIGxpbWl0OiA1MFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChwcmVmZXJlbmNlVHlwZSkge1xyXG4gICAgICBxdWVyeS50YWdzIS5wdXNoKHByZWZlcmVuY2VUeXBlKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLnF1ZXJ5TWVtb3JpZXMocXVlcnkpXHJcbiAgICByZXR1cm4gcmVzdWx0cy5tYXAocmVzdWx0ID0+ICh7XHJcbiAgICAgIHR5cGU6IHJlc3VsdC5tZW1vcnkuY29udGVudC5wcmVmZXJlbmNlVHlwZSxcclxuICAgICAgcHJlZmVyZW5jZTogcmVzdWx0Lm1lbW9yeS5jb250ZW50LnByZWZlcmVuY2UsXHJcbiAgICAgIHRpbWVzdGFtcDogcmVzdWx0Lm1lbW9yeS5tZXRhZGF0YS5jcmVhdGVkQXQsXHJcbiAgICAgIGNvbmZpZGVuY2U6IHJlc3VsdC5tZW1vcnkubWV0YWRhdGEuY29uZmlkZW5jZVxyXG4gICAgfSkpXHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PSDmmbrog73ogZTmg7PmjqXlj6MgPT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLyoqXHJcbiAgICog5p+l5om+55u45YWz6K6w5b+GXHJcbiAgICovXHJcbiAgYXN5bmMgZmluZFJlbGF0ZWRNZW1vcmllcyhtZW1vcnlJZDogc3RyaW5nLCBsaW1pdDogbnVtYmVyID0gMTApOiBQcm9taXNlPE1lbW9yeUVudHJ5W10+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCBjcm9zc01lbW9yeU5ldHdvcmsuZmluZFJlbGF0ZWRNZW1vcmllcyhtZW1vcnlJZCwgbGltaXQpXHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oYOafpeaJvuebuOWFs+iusOW/huWksei0pSAke21lbW9yeUlkfTpgLCBlcnJvcilcclxuICAgICAgcmV0dXJuIFtdXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDln7rkuo7lhoXlrrnnmoTmmbrog73mkJzntKJcclxuICAgKi9cclxuICBhc3luYyBpbnRlbGxpZ2VudFNlYXJjaChxdWVyeTogc3RyaW5nLCBjb250ZXh0OiB7XHJcbiAgICB1c2VySWQ/OiBzdHJpbmdcclxuICAgIHN0b3J5SWQ/OiBzdHJpbmdcclxuICAgIGFnZW50SWQ/OiBzdHJpbmdcclxuICAgIHRhZ3M/OiBzdHJpbmdbXVxyXG4gIH0gPSB7fSwgbGltaXQ6IG51bWJlciA9IDIwKTogUHJvbWlzZTxNZW1vcnlTZWFyY2hSZXN1bHRbXT4ge1xyXG4gICAgY29uc3Qgc2VhcmNoUXVlcnk6IE1lbW9yeVF1ZXJ5ID0ge1xyXG4gICAgICBjb250ZW50OiBxdWVyeSxcclxuICAgICAgZnV6enk6IHRydWUsXHJcbiAgICAgIGxpbWl0LFxyXG4gICAgICBzb3J0Qnk6ICdyZWxldmFuY2UnXHJcbiAgICB9XHJcblxyXG4gICAgLy8g5re75Yqg5LiK5LiL5paH6L+H5rukXHJcbiAgICBpZiAoY29udGV4dC51c2VySWQpIHtcclxuICAgICAgc2VhcmNoUXVlcnkudGFncyA9IChzZWFyY2hRdWVyeS50YWdzIHx8IFtdKS5jb25jYXQoWyd1c2VyJywgY29udGV4dC51c2VySWRdKVxyXG4gICAgfVxyXG4gICAgaWYgKGNvbnRleHQuc3RvcnlJZCkge1xyXG4gICAgICBzZWFyY2hRdWVyeS50YWdzID0gKHNlYXJjaFF1ZXJ5LnRhZ3MgfHwgW10pLmNvbmNhdChbJ3N0b3J5JywgY29udGV4dC5zdG9yeUlkXSlcclxuICAgIH1cclxuICAgIGlmIChjb250ZXh0LmFnZW50SWQpIHtcclxuICAgICAgc2VhcmNoUXVlcnkuYWdlbnRJZCA9IGNvbnRleHQuYWdlbnRJZFxyXG4gICAgfVxyXG4gICAgaWYgKGNvbnRleHQudGFncykge1xyXG4gICAgICBzZWFyY2hRdWVyeS50YWdzID0gKHNlYXJjaFF1ZXJ5LnRhZ3MgfHwgW10pLmNvbmNhdChjb250ZXh0LnRhZ3MpXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucXVlcnlNZW1vcmllcyhzZWFyY2hRdWVyeSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluWIm+S9nOeBteaEn1xyXG4gICAqL1xyXG4gIGFzeW5jIGdldENyZWF0aXZlSW5zcGlyYXRpb24oc3RvcnlJZDogc3RyaW5nLCB0aGVtZTogc3RyaW5nLCBsaW1pdDogbnVtYmVyID0gMTApOiBQcm9taXNlPE1lbW9yeVNlYXJjaFJlc3VsdFtdPiB7XHJcbiAgICAvLyDmn6Xmib7kuI7kuLvpopjnm7jlhbPnmoTmiJDlip/liJvkvZznu4/pqoxcclxuICAgIGNvbnN0IGluc3BpcmF0aW9uUXVlcnk6IE1lbW9yeVF1ZXJ5ID0ge1xyXG4gICAgICB0YWdzOiBbJ2NyZWF0aXZlLXBhdHRlcm4nLCAnc3VjY2VzcyddLFxyXG4gICAgICBjb250ZW50OiB0aGVtZSxcclxuICAgICAgZnV6enk6IHRydWUsXHJcbiAgICAgIGxpbWl0LFxyXG4gICAgICBzb3J0Qnk6ICdpbXBvcnRhbmNlJ1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLnF1ZXJ5TWVtb3JpZXMoaW5zcGlyYXRpb25RdWVyeSlcclxuXHJcbiAgICAvLyDooaXlhYXkuIDkupvpgJrnlKjnmoTliJvkvZznn6Xor4ZcclxuICAgIGNvbnN0IGdlbmVyYWxLbm93bGVkZ2UgPSBhd2FpdCB0aGlzLnF1ZXJ5TWVtb3JpZXMoe1xyXG4gICAgICB0YWdzOiBbJ25hcnJhdGl2ZScsICdrbm93bGVkZ2UnXSxcclxuICAgICAgbGltaXQ6IDVcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIFsuLi5yZXN1bHRzLCAuLi5nZW5lcmFsS25vd2xlZGdlXS5zbGljZSgwLCBsaW1pdClcclxuICB9XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09IEFnZW505Y2P5L2c6K6w5b+GID09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gIC8qKlxyXG4gICAqIOiusOW9lUFnZW505Y2P5L2c57uP6aqMXHJcbiAgICovXHJcbiAgYXN5bmMgcmVjb3JkQ29sbGFib3JhdGlvbkV4cGVyaWVuY2UoY29sbGFib3JhdGlvbklkOiBzdHJpbmcsIGFnZW50czogc3RyaW5nW10sIG91dGNvbWU6IGFueSk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCBtZW1vcnlEYXRhID0ge1xyXG4gICAgICBhZ2VudElkOiAnY29sbGFib3JhdGlvbi1hZ2VudCcsXHJcbiAgICAgIHR5cGU6ICdleHBlcmllbmNlJyxcclxuICAgICAgY29udGVudDoge1xyXG4gICAgICAgIGNvbGxhYm9yYXRpb25JZCxcclxuICAgICAgICBhZ2VudHMsXHJcbiAgICAgICAgb3V0Y29tZSxcclxuICAgICAgICBlZmZlY3RpdmVuZXNzOiB0aGlzLmV2YWx1YXRlQ29sbGFib3JhdGlvbkVmZmVjdGl2ZW5lc3Mob3V0Y29tZSksXHJcbiAgICAgICAgbGVzc29uczogdGhpcy5leHRyYWN0Q29sbGFib3JhdGlvbkxlc3NvbnMob3V0Y29tZSlcclxuICAgICAgfSxcclxuICAgICAgdGFnczogWydjb2xsYWJvcmF0aW9uJywgJ2V4cGVyaWVuY2UnLCBjb2xsYWJvcmF0aW9uSWQsIC4uLmFnZW50c10sXHJcbiAgICAgIGltcG9ydGFuY2U6IDAuNyxcclxuICAgICAgY29ubmVjdGlvbnM6IFtdXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuYWRkTWVtb3J5KG1lbW9yeURhdGEpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5ZBZ2VudOWNj+S9nOWOhuWPslxyXG4gICAqL1xyXG4gIGFzeW5jIGdldENvbGxhYm9yYXRpb25IaXN0b3J5KGFnZW50SWQ6IHN0cmluZywgbGltaXQ6IG51bWJlciA9IDEwKTogUHJvbWlzZTxNZW1vcnlTZWFyY2hSZXN1bHRbXT4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucXVlcnlNZW1vcmllcyh7XHJcbiAgICAgIHRhZ3M6IFsnY29sbGFib3JhdGlvbicsIGFnZW50SWRdLFxyXG4gICAgICBsaW1pdCxcclxuICAgICAgc29ydEJ5OiAncmVjZW5jeSdcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlrabkuaDmnIDkvJjljY/kvZzmqKHlvI9cclxuICAgKi9cclxuICBhc3luYyBsZWFybk9wdGltYWxDb2xsYWJvcmF0aW9uUGF0dGVybnMoKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gICAgY29uc3Qgc3VjY2Vzc2Z1bENvbGxhYm9yYXRpb25zID0gYXdhaXQgdGhpcy5xdWVyeU1lbW9yaWVzKHtcclxuICAgICAgdGFnczogWydjb2xsYWJvcmF0aW9uJywgJ2V4cGVyaWVuY2UnXSxcclxuICAgICAgY29udGVudDogJ3N1Y2Nlc3MnLFxyXG4gICAgICBmdXp6eTogdHJ1ZSxcclxuICAgICAgbGltaXQ6IDUwXHJcbiAgICB9KVxyXG5cclxuICAgIC8vIOWIhuaekOWNj+S9nOaooeW8j1xyXG4gICAgY29uc3QgcGF0dGVybnMgPSB0aGlzLmFuYWx5emVDb2xsYWJvcmF0aW9uUGF0dGVybnMoc3VjY2Vzc2Z1bENvbGxhYm9yYXRpb25zKVxyXG4gICAgcmV0dXJuIHBhdHRlcm5zXHJcbiAgfVxyXG5cclxuICAvLyA9PT09PT09PT09PT09PT09PT09PSDovoXliqnmlrnms5UgPT09PT09PT09PT09PT09PT09PT1cclxuXHJcbiAgLyoqXHJcbiAgICog6K6h566X5pWF5LqL6K6w5b+G6YeN6KaB5oCnXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjYWxjdWxhdGVTdG9yeU1lbW9yeUltcG9ydGFuY2UoY29udGVudDogYW55LCB0eXBlOiBNZW1vcnlFbnRyeVsndHlwZSddKTogbnVtYmVyIHtcclxuICAgIGxldCBpbXBvcnRhbmNlID0gMC41XHJcblxyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgIGNhc2UgJ2V4cGVyaWVuY2UnOlxyXG4gICAgICAgIGltcG9ydGFuY2UgPSAwLjdcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdrbm93bGVkZ2UnOlxyXG4gICAgICAgIGltcG9ydGFuY2UgPSAwLjhcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlICdldmVudCc6XHJcbiAgICAgICAgaW1wb3J0YW5jZSA9IDAuNlxyXG4gICAgICAgIGJyZWFrXHJcbiAgICB9XHJcblxyXG4gICAgLy8g5qC55o2u5YaF5a656LCD5pW06YeN6KaB5oCnXHJcbiAgICBpZiAoY29udGVudC5rZXlNb21lbnQpIGltcG9ydGFuY2UgKz0gMC4yXHJcbiAgICBpZiAoY29udGVudC5jb25mbGljdCkgaW1wb3J0YW5jZSArPSAwLjFcclxuICAgIGlmIChjb250ZW50LnJlc29sdXRpb24pIGltcG9ydGFuY2UgKz0gMC4xXHJcblxyXG4gICAgcmV0dXJuIE1hdGgubWluKDEsIGltcG9ydGFuY2UpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorqHnrpfop5LoibLorrDlv4bph43opoHmgKdcclxuICAgKi9cclxuICBwcml2YXRlIGNhbGN1bGF0ZUNoYXJhY3Rlck1lbW9yeUltcG9ydGFuY2UoY29udGVudDogYW55KTogbnVtYmVyIHtcclxuICAgIGxldCBpbXBvcnRhbmNlID0gMC42XHJcblxyXG4gICAgaWYgKGNvbnRlbnQucGVyc29uYWxpdHlDaGFuZ2UpIGltcG9ydGFuY2UgKz0gMC4yXHJcbiAgICBpZiAoY29udGVudC5yZWxhdGlvbnNoaXBDaGFuZ2UpIGltcG9ydGFuY2UgKz0gMC4xNVxyXG4gICAgaWYgKGNvbnRlbnQua2V5RGVjaXNpb24pIGltcG9ydGFuY2UgKz0gMC4xXHJcblxyXG4gICAgcmV0dXJuIE1hdGgubWluKDEsIGltcG9ydGFuY2UpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDorqHnrpfmqKHlvI/nm7jkvLzluqZcclxuICAgKi9cclxuICBwcml2YXRlIGNhbGN1bGF0ZVBhdHRlcm5TaW1pbGFyaXR5KHBhdHRlcm4xOiBhbnksIHBhdHRlcm4yOiBhbnkpOiBudW1iZXIge1xyXG4gICAgLy8g566A5YyW55qE55u45Ly85bqm6K6h566XXHJcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkocGF0dGVybjEpID09PSBKU09OLnN0cmluZ2lmeShwYXR0ZXJuMikpIHJldHVybiAxLjBcclxuXHJcbiAgICAvLyDmo4Dmn6XlhbHlkIzlsZ7mgKdcclxuICAgIGNvbnN0IGtleXMxID0gT2JqZWN0LmtleXMocGF0dGVybjEpXHJcbiAgICBjb25zdCBrZXlzMiA9IE9iamVjdC5rZXlzKHBhdHRlcm4yKVxyXG4gICAgY29uc3QgY29tbW9uS2V5cyA9IGtleXMxLmZpbHRlcihrZXkgPT4ga2V5czIuaW5jbHVkZXMoa2V5KSlcclxuXHJcbiAgICBpZiAoY29tbW9uS2V5cy5sZW5ndGggPT09IDApIHJldHVybiAwXHJcblxyXG4gICAgbGV0IHNpbWlsYXJpdHkgPSBjb21tb25LZXlzLmxlbmd0aCAvIE1hdGgubWF4KGtleXMxLmxlbmd0aCwga2V5czIubGVuZ3RoKVxyXG5cclxuICAgIC8vIOajgOafpeWFseWQjOWAvFxyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgY29tbW9uS2V5cykge1xyXG4gICAgICBpZiAocGF0dGVybjFba2V5XSA9PT0gcGF0dGVybjJba2V5XSkge1xyXG4gICAgICAgIHNpbWlsYXJpdHkgKz0gMC4xXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTWF0aC5taW4oMSwgc2ltaWxhcml0eSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOivhOS8sOWNj+S9nOacieaViOaAp1xyXG4gICAqL1xyXG4gIHByaXZhdGUgZXZhbHVhdGVDb2xsYWJvcmF0aW9uRWZmZWN0aXZlbmVzcyhvdXRjb21lOiBhbnkpOiBudW1iZXIge1xyXG4gICAgLy8g566A5YyW55qE5pyJ5pWI5oCn6K+E5LywXHJcbiAgICBsZXQgZWZmZWN0aXZlbmVzcyA9IDAuNVxyXG5cclxuICAgIGlmIChvdXRjb21lLnN1Y2Nlc3MpIGVmZmVjdGl2ZW5lc3MgKz0gMC4zXHJcbiAgICBpZiAob3V0Y29tZS5xdWFsaXR5ID4gMC44KSBlZmZlY3RpdmVuZXNzICs9IDAuMlxyXG4gICAgaWYgKG91dGNvbWUudGltZUVmZmljaWVuY3kgPiAwLjcpIGVmZmVjdGl2ZW5lc3MgKz0gMC4xXHJcblxyXG4gICAgcmV0dXJuIE1hdGgubWluKDEsIGVmZmVjdGl2ZW5lc3MpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmj5Dlj5bljY/kvZznu4/pqozmlZnorq1cclxuICAgKi9cclxuICBwcml2YXRlIGV4dHJhY3RDb2xsYWJvcmF0aW9uTGVzc29ucyhvdXRjb21lOiBhbnkpOiBzdHJpbmdbXSB7XHJcbiAgICBjb25zdCBsZXNzb25zOiBzdHJpbmdbXSA9IFtdXHJcblxyXG4gICAgaWYgKG91dGNvbWUuY29tbXVuaWNhdGlvbklzc3Vlcykge1xyXG4gICAgICBsZXNzb25zLnB1c2goJ+aUueWWhOayn+mAmuacuuWIticpXHJcbiAgICB9XHJcbiAgICBpZiAob3V0Y29tZS5yb2xlQ29uZmxpY3RzKSB7XHJcbiAgICAgIGxlc3NvbnMucHVzaCgn5piO56Gu6KeS6Imy5YiG5belJylcclxuICAgIH1cclxuICAgIGlmIChvdXRjb21lLnRpbWVEZWxheXMpIHtcclxuICAgICAgbGVzc29ucy5wdXNoKCfkvJjljJbml7bpl7TnrqHnkIYnKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBsZXNzb25zXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDliIbmnpDljY/kvZzmqKHlvI9cclxuICAgKi9cclxuICBwcml2YXRlIGFuYWx5emVDb2xsYWJvcmF0aW9uUGF0dGVybnMoY29sbGFib3JhdGlvbnM6IE1lbW9yeVNlYXJjaFJlc3VsdFtdKTogYW55W10ge1xyXG4gICAgLy8g566A5YyW55qE5qih5byP5YiG5p6QXHJcbiAgICBjb25zdCBwYXR0ZXJuczogYW55W10gPSBbXVxyXG5cclxuICAgIGZvciAoY29uc3QgY29sbGFiIG9mIGNvbGxhYm9yYXRpb25zKSB7XHJcbiAgICAgIGNvbnN0IHBhdHRlcm4gPSB7XHJcbiAgICAgICAgYWdlbnRDb3VudDogY29sbGFiLm1lbW9yeS5jb250ZW50LmFnZW50cz8ubGVuZ3RoIHx8IDAsXHJcbiAgICAgICAgZWZmZWN0aXZlbmVzczogY29sbGFiLm1lbW9yeS5jb250ZW50LmVmZmVjdGl2ZW5lc3MgfHwgMC41LFxyXG4gICAgICAgIGtleUZhY3RvcnM6IGNvbGxhYi5tZW1vcnkuY29udGVudC5sZXNzb25zIHx8IFtdXHJcbiAgICAgIH1cclxuICAgICAgcGF0dGVybnMucHVzaChwYXR0ZXJuKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwYXR0ZXJucy5zb3J0KChhLCBiKSA9PiBiLmVmZmVjdGl2ZW5lc3MgLSBhLmVmZmVjdGl2ZW5lc3MpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDkvJjljJborrDlv4bnvZHnu5xcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIG9wdGltaXplTWVtb3J5TmV0d29yaygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOa4heeQhuS9jumHjeimgeaAp+iusOW/hlxyXG4gICAgICBjb25zdCBzdGF0cyA9IGNyb3NzTWVtb3J5TmV0d29yay5nZXRTdGF0cygpXHJcbiAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGDorrDlv4bnvZHnu5znirbmgIE6ICR7c3RhdHMudG90YWxNZW1vcmllc30g6K6w5b+GLCAke3N0YXRzLnRvdGFsQ29ubmVjdGlvbnN9IOi/nuaOpWApXHJcblxyXG4gICAgICAvLyDov5nph4zlj6/ku6Xmt7vliqDmm7TlpI3mnYLnmoTkvJjljJbpgLvovpFcclxuICAgICAgLy8g5q+U5aaC5ZCI5bm255u45Ly86K6w5b+G44CB6YeN5bu66L+e5o6l562JXHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ+iusOW/hue9kee7nOS8mOWMluWksei0pTonLCBlcnJvcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09IOe7n+iuoeWSjOebkeaOpyA9PT09PT09PT09PT09PT09PT09PVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5borrDlv4bnu5/orqHkv6Hmga9cclxuICAgKi9cclxuICBnZXRNZW1vcnlTdGF0cygpOiBhbnkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIGNyb3NzTWVtb3J5TmV0d29yay5nZXRTdGF0cygpXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcign6I635Y+W6K6w5b+G57uf6K6h5aSx6LSlOicsIGVycm9yKVxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHRvdGFsTWVtb3JpZXM6IDAsXHJcbiAgICAgICAgdG90YWxDb25uZWN0aW9uczogMCxcclxuICAgICAgICBhZ2VudENvdW50OiAwLFxyXG4gICAgICAgIG1lbW9yeVR5cGVzOiB7fSxcclxuICAgICAgICBhdmVyYWdlSW1wb3J0YW5jZTogMFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlgaXlurfmo4Dmn6VcclxuICAgKi9cclxuICBhc3luYyBoZWFsdGhDaGVjaygpOiBQcm9taXNlPHsgc3RhdHVzOiBzdHJpbmcsIGRldGFpbHM/OiBhbnkgfT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc3RhdHMgPSB0aGlzLmdldE1lbW9yeVN0YXRzKClcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdGF0dXM6ICdoZWFsdGh5JyxcclxuICAgICAgICBkZXRhaWxzOiBzdGF0c1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxyXG4gICAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5a+85Ye66K6w5b+G5pWw5o2uXHJcbiAgICovXHJcbiAgYXN5bmMgZXhwb3J0TWVtb3J5RGF0YSgpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgcmV0dXJuIGNyb3NzTWVtb3J5TmV0d29yay5leHBvcnRNZW1vcnlOZXR3b3JrKClcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCflr7zlh7rorrDlv4bmlbDmja7lpLHotKU6JywgZXJyb3IpXHJcbiAgICAgIHJldHVybiB7IG1lbW9yaWVzOiBbXSwgY29ubmVjdGlvbnM6IHt9IH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWvvOWFpeiusOW/huaVsOaNrlxyXG4gICAqL1xyXG4gIGFzeW5jIGltcG9ydE1lbW9yeURhdGEoZGF0YTogYW55KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjcm9zc01lbW9yeU5ldHdvcmsuaW1wb3J0TWVtb3J5TmV0d29yayhkYXRhKVxyXG4gICAgICB0aGlzLmxvZ2dlci5sb2coJ+iusOW/huaVsOaNruWvvOWFpeaIkOWKnycpXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcign5a+85YWl6K6w5b+G5pWw5o2u5aSx6LSlOicsIGVycm9yKVxyXG4gICAgICB0aHJvdyBlcnJvclxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwidmVyc2lvbiI6M30=