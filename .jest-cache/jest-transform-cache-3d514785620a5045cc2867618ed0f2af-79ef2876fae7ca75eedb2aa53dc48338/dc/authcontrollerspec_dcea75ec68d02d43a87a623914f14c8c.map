{"file":"C:\\Users\\16663\\Desktop\\tuheg\\apps\\backend-gateway\\src\\auth\\__tests__\\auth.controller.spec.ts","mappings":"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","names":[],"sources":["C:\\Users\\16663\\Desktop\\tuheg\\apps\\backend-gateway\\src\\auth\\__tests__\\auth.controller.spec.ts"],"sourcesContent":["import { ConflictException, UnauthorizedException } from '@nestjs/common'\nimport { Test, type TestingModule } from '@nestjs/testing'\nimport { type DeepMockProxy, mockDeep } from 'jest-mock-extended'\nimport { AuthController } from './auth.controller'\nimport { AuthService } from './auth.service'\n\ndescribe('AuthController', () => {\n  let controller: AuthController\n  let authServiceMock: DeepMockProxy<AuthService>\n\n  const mockUser = {\n    id: 'user-123',\n    email: 'test@example.com',\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  }\n\n  const mockLoginResponse = {\n    access_token: 'jwt-token-here',\n  }\n\n  beforeEach(async () => {\n    authServiceMock = mockDeep<AuthService>()\n\n    const module: TestingModule = await Test.createTestingModule({\n      controllers: [AuthController],\n      providers: [\n        {\n          provide: AuthService,\n          useValue: authServiceMock,\n        },\n      ],\n    }).compile()\n\n    controller = module.get<AuthController>(AuthController)\n  })\n\n  afterEach(() => {\n    jest.clearAllMocks()\n  })\n\n  describe('register', () => {\n    const registerDto = {\n      email: 'test@example.com',\n      password: 'password123',\n    }\n\n    it('should register a new user successfully', async () => {\n      authServiceMock.register.mockResolvedValue(mockUser)\n\n      const result = await controller.register(registerDto)\n\n      expect(authServiceMock.register).toHaveBeenCalledWith(registerDto)\n      expect(result).toEqual(mockUser)\n    })\n\n    it('should throw ConflictException when email already exists', async () => {\n      const conflictError = new ConflictException('Email already registered.')\n      authServiceMock.register.mockRejectedValue(conflictError)\n\n      await expect(controller.register(registerDto)).rejects.toThrow(ConflictException)\n      expect(authServiceMock.register).toHaveBeenCalledWith(registerDto)\n    })\n  })\n\n  describe('login', () => {\n    const loginDto = {\n      email: 'test@example.com',\n      password: 'password123',\n    }\n\n    it('should login user successfully', async () => {\n      authServiceMock.login.mockResolvedValue(mockLoginResponse)\n\n      const result = await controller.login(loginDto)\n\n      expect(authServiceMock.login).toHaveBeenCalledWith(loginDto)\n      expect(result).toEqual(mockLoginResponse)\n    })\n\n    it('should throw UnauthorizedException for invalid credentials', async () => {\n      const unauthorizedError = new UnauthorizedException('Invalid credentials.')\n      authServiceMock.login.mockRejectedValue(unauthorizedError)\n\n      await expect(controller.login(loginDto)).rejects.toThrow(UnauthorizedException)\n      expect(authServiceMock.login).toHaveBeenCalledWith(loginDto)\n    })\n  })\n\n  describe('getProfile', () => {\n    it('should return user profile from request', () => {\n      const mockRequest = {\n        user: mockUser,\n      } as any\n\n      const result = controller.getProfile(mockRequest)\n\n      expect(result).toEqual(mockUser)\n    })\n  })\n})\n"],"version":3}