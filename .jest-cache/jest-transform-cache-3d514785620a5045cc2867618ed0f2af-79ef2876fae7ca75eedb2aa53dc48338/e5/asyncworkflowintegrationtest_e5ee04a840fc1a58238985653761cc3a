2d68aa97ae91138f9a4ff984851b597a
"use strict";
// ============================================================================
// 异步工作流引擎集成测试
// 验证 VCPToolBox 工作流编排能力的正确集成
// ============================================================================
Object.defineProperty(exports, "__esModule", { value: true });
const config_1 = require("@nestjs/config");
const testing_1 = require("@nestjs/testing");
const async_workflow_service_1 = require("../../../../packages/common-backend/src/vcp/async-workflow.service");
describe('AsyncWorkflowService Integration', () => {
    let service;
    let configService;
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                async_workflow_service_1.AsyncWorkflowService,
                {
                    provide: config_1.ConfigService,
                    useValue: {
                        get: jest.fn((key, defaultValue) => {
                            const config = {
                                WORKFLOW_MAX_CONCURRENT: 10,
                                WORKFLOW_DEFAULT_TIMEOUT: 300000,
                                WORKFLOW_CLEANUP_INTERVAL: 24,
                                WORKFLOW_STATS_INTERVAL: 5,
                            };
                            return config[key] || defaultValue;
                        }),
                    },
                },
            ],
        }).compile();
        service = module.get(async_workflow_service_1.AsyncWorkflowService);
        configService = module.get(config_1.ConfigService);
    });
    it('应该能获取工作流统计信息', () => {
        const stats = service.getWorkflowStats();
        expect(stats).toHaveProperty('templates');
        expect(stats).toHaveProperty('instances');
        expect(stats).toHaveProperty('runningInstances');
        expect(stats).toHaveProperty('queuedInstances');
        expect(stats).toHaveProperty('nodeExecutors');
        expect(typeof stats.templates).toBe('number');
    });
    it('应该能执行健康检查', async () => {
        const health = await service.healthCheck();
        expect(health).toHaveProperty('status');
        expect(['healthy', 'warning', 'error']).toContain(health.status);
        if (health.status !== 'error') {
            expect(health).toHaveProperty('details');
            expect(health.details).toHaveProperty('stats');
            expect(health.details).toHaveProperty('activeWorkflows');
        }
    });
    it('应该能获取工作流性能指标', () => {
        const metrics = service.getWorkflowMetrics();
        expect(metrics).toHaveProperty('templates');
        expect(metrics).toHaveProperty('activeWorkflows');
        expect(metrics).toHaveProperty('averageCompletionTime');
        expect(metrics).toHaveProperty('successRate');
        expect(metrics).toHaveProperty('resourceUtilization');
    });
    it('应该能获取可用模板列表', () => {
        const templates = service.getAvailableTemplates();
        expect(Array.isArray(templates)).toBe(true);
        expect(templates.length).toBeGreaterThan(0);
        // 检查是否包含预期的模板
        const templateNames = templates.map((t) => t.name);
        expect(templateNames).toContain('故事创作工作流');
        expect(templateNames).toContain('角色开发工作流');
        expect(templateNames).toContain('世界构建工作流');
        expect(templateNames).toContain('多模态叙事工作流');
        templates.forEach((template) => {
            expect(template).toHaveProperty('id');
            expect(template).toHaveProperty('name');
            expect(template).toHaveProperty('description');
            expect(template).toHaveProperty('tags');
            expect(Array.isArray(template.tags)).toBe(true);
        });
    });
    it('应该能获取模板详情', () => {
        const templates = service.getAvailableTemplates();
        const firstTemplate = templates[0];
        const details = service.getTemplateDetails(firstTemplate.id);
        expect(details).not.toBeNull();
        expect(details?.id).toBe(firstTemplate.id);
        expect(details?.name).toBe(firstTemplate.name);
        expect(details).toHaveProperty('nodes');
        expect(details).toHaveProperty('connections');
        expect(details).toHaveProperty('defaultConfig');
        expect(Array.isArray(details?.nodes)).toBe(true);
    });
    it('应该能创建故事创作工作流', async () => {
        const storyId = 'test-story-workflow';
        const userPrompt = '写一个关于太空探索的故事';
        const workflowId = await service.createStoryCreationWorkflow(storyId, userPrompt, {
            genre: 'sci-fi',
            length: 'medium',
            characters: 3,
        });
        expect(typeof workflowId).toBe('string');
        expect(workflowId.length).toBeGreaterThan(0);
        // 验证工作流状态
        const status = service.getWorkflowStatus(workflowId);
        expect(status).not.toBeNull();
        expect(status?.name).toContain('故事创作');
        expect(status?.status).toBe('running'); // 应该自动启动
    });
    it('应该能创建角色开发工作流', async () => {
        const characterId = 'test-character-workflow';
        const characterConcept = '一个勇敢的年轻探险家';
        const workflowId = await service.createCharacterDevelopmentWorkflow(characterId, characterConcept, {
            archetype: 'hero',
            complexity: 'detailed',
        });
        expect(typeof workflowId).toBe('string');
        const status = service.getWorkflowStatus(workflowId);
        expect(status).not.toBeNull();
        expect(status?.name).toContain('角色开发');
        expect(status?.status).toBe('running');
    });
    it('应该能创建世界构建工作流', async () => {
        const worldId = 'test-world-workflow';
        const worldConcept = '一个魔法与科技并存的奇幻世界';
        const workflowId = await service.createWorldBuildingWorkflow(worldId, worldConcept, {
            scope: 'large',
            genre: 'fantasy',
            technologyLevel: 'magitech',
            magicLevel: 'high',
        });
        expect(typeof workflowId).toBe('string');
        const status = service.getWorkflowStatus(workflowId);
        expect(status).not.toBeNull();
        expect(status?.name).toContain('世界构建');
        expect(status?.status).toBe('running');
    });
    it('应该能创建多模态叙事工作流', async () => {
        const narrativeId = 'test-multimodal-workflow';
        const script = '从前有一个勇敢的小孩，他决定探索未知的世界...';
        const workflowId = await service.createMultimodalNarrativeWorkflow(narrativeId, script, [
            'text',
            'image',
            'audio',
        ]);
        expect(typeof workflowId).toBe('string');
        const status = service.getWorkflowStatus(workflowId);
        expect(status).not.toBeNull();
        expect(status?.name).toContain('多模态叙事');
        expect(status?.status).toBe('running');
    });
    it('应该能管理工作流生命周期', async () => {
        // 创建一个简单的工作流用于测试
        const storyId = 'lifecycle-test';
        const workflowId = await service.createStoryCreationWorkflow(storyId, '测试生命周期');
        // 验证初始状态
        let status = service.getWorkflowStatus(workflowId);
        expect(status?.status).toBe('running');
        // 暂停工作流
        await service.pauseWorkflow(workflowId);
        status = service.getWorkflowStatus(workflowId);
        expect(status?.status).toBe('paused');
        // 恢复工作流
        await service.resumeWorkflow(workflowId);
        status = service.getWorkflowStatus(workflowId);
        expect(status?.status).toBe('running');
        // 取消工作流
        await service.cancelWorkflow(workflowId, '测试取消');
        status = service.getWorkflowStatus(workflowId);
        expect(status?.status).toBe('cancelled');
    });
    it('应该能创建条件分支工作流', async () => {
        const conditions = [
            {
                condition: 'inputData.genre === "fantasy"',
                workflowTemplate: 'story-creation',
                parameters: { genre: 'fantasy' },
            },
            {
                condition: 'inputData.genre === "sci-fi"',
                workflowTemplate: 'story-creation',
                parameters: { genre: 'sci-fi' },
            },
        ];
        const workflowId = await service.createConditionalWorkflow('条件故事创作', conditions);
        expect(typeof workflowId).toBe('string');
        const status = service.getWorkflowStatus(workflowId);
        expect(status).not.toBeNull();
        expect(status?.name).toContain('条件工作流');
    });
    it('应该能获取活跃工作流列表', () => {
        const activeWorkflows = service.getActiveWorkflows();
        expect(Array.isArray(activeWorkflows)).toBe(true);
        // 当前实现可能返回空数组，取决于实际运行的工作流
    });
    it('应该能清理已完成的工作流', async () => {
        const cleaned = await service.cleanupCompletedWorkflows(0); // 清理所有已完成的
        expect(typeof cleaned).toBe('number');
        expect(cleaned).toBeGreaterThanOrEqual(0);
    });
    it('应该能创建基于模板的工作流实例', async () => {
        const templates = service.getAvailableTemplates();
        const storyTemplate = templates.find((t) => t.name === '故事创作工作流');
        expect(storyTemplate).toBeDefined();
        const workflowId = await service.createWorkflowFromTemplate('story-creation', '基于模板的故事', {
            priority: 'high',
            inputData: { customPrompt: '测试模板实例化' },
        });
        expect(typeof workflowId).toBe('string');
        const status = service.getWorkflowStatus(workflowId);
        expect(status).not.toBeNull();
        expect(status?.name).toBe('基于模板的故事');
    });
    it('应该能创建自定义工作流', async () => {
        const customTemplate = {
            name: '自定义测试工作流',
            description: '用于测试的简单工作流',
            version: '1.0.0',
            nodes: [
                {
                    id: 'start-node',
                    type: 'task',
                    name: '开始任务',
                    description: '工作流的起始任务',
                    config: { taskType: 'test' },
                    inputs: [],
                    outputs: [{ id: 'start-out', sourceNodeId: 'start-node', targetNodeId: 'end-node' }],
                    status: 'pending',
                    retryCount: 0,
                    maxRetries: 1,
                    timeout: 30000,
                },
                {
                    id: 'end-node',
                    type: 'task',
                    name: '结束任务',
                    description: '工作流的结束任务',
                    config: { taskType: 'test' },
                    inputs: [{ id: 'end-in', sourceNodeId: 'start-node', targetNodeId: 'end-node' }],
                    outputs: [],
                    status: 'pending',
                    retryCount: 0,
                    maxRetries: 1,
                    timeout: 30000,
                    dependencies: ['start-node'],
                },
            ],
            connections: [],
            defaultConfig: {
                maxRetries: 1,
                timeout: 60000,
                priority: 'normal',
            },
            tags: ['test', 'custom'],
        };
        const workflowId = await service.createCustomWorkflow(customTemplate, '自定义工作流测试');
        expect(typeof workflowId).toBe('string');
        const status = service.getWorkflowStatus(workflowId);
        expect(status).not.toBeNull();
        expect(status?.name).toBe('自定义工作流测试');
    });
    it('应该正确配置工作流参数', () => {
        expect(configService.get).toHaveBeenCalledWith('WORKFLOW_MAX_CONCURRENT', 10);
        expect(configService.get).toHaveBeenCalledWith('WORKFLOW_DEFAULT_TIMEOUT', 300000);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFwxNjY2M1xcRGVza3RvcFxcdHVoZWdcXGFwcHNcXHZjcHRvb2xib3hcXHNyY1xcaW50ZWdyYXRpb24tdGVzdHNcXGFzeW5jLXdvcmtmbG93LWludGVncmF0aW9uLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBLCtFQUErRTtBQUMvRSxjQUFjO0FBQ2QsNkJBQTZCO0FBQzdCLCtFQUErRTs7QUFFL0UsMkNBQThDO0FBQzlDLDZDQUEwRDtBQUMxRCwrR0FBeUc7QUFFekcsUUFBUSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRTtJQUNoRCxJQUFJLE9BQTZCLENBQUE7SUFDakMsSUFBSSxhQUE0QixDQUFBO0lBRWhDLFVBQVUsQ0FBQyxLQUFLLElBQUksRUFBRTtRQUNwQixNQUFNLE1BQU0sR0FBa0IsTUFBTSxjQUFJLENBQUMsbUJBQW1CLENBQUM7WUFDM0QsU0FBUyxFQUFFO2dCQUNULDZDQUFvQjtnQkFDcEI7b0JBQ0UsT0FBTyxFQUFFLHNCQUFhO29CQUN0QixRQUFRLEVBQUU7d0JBQ1IsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFXLEVBQUUsWUFBa0IsRUFBRSxFQUFFOzRCQUMvQyxNQUFNLE1BQU0sR0FBRztnQ0FDYix1QkFBdUIsRUFBRSxFQUFFO2dDQUMzQix3QkFBd0IsRUFBRSxNQUFNO2dDQUNoQyx5QkFBeUIsRUFBRSxFQUFFO2dDQUM3Qix1QkFBdUIsRUFBRSxDQUFDOzZCQUMzQixDQUFBOzRCQUNELE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLFlBQVksQ0FBQTt3QkFDcEMsQ0FBQyxDQUFDO3FCQUNIO2lCQUNGO2FBQ0Y7U0FDRixDQUFDLENBQUMsT0FBTyxFQUFFLENBQUE7UUFFWixPQUFPLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBdUIsNkNBQW9CLENBQUMsQ0FBQTtRQUNoRSxhQUFhLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBZ0Isc0JBQWEsQ0FBQyxDQUFBO0lBQzFELENBQUMsQ0FBQyxDQUFBO0lBRUYsRUFB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Q0FBQTtRQUVqRixNQUFNLENBQUMsT0FBTyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUE7UUFFeEMsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3BELE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUE7UUFDN0IsTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUE7SUFDdkMsQ0FBQyxDQUFDLENBQUE7SUFFRixFQUFFLENBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRTtRQUNyQixNQUFNLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLHlCQUF5QixFQUFFLEVBQUUsQ0FBQyxDQUFBO1FBQzdFLE1BQU0sQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUMsb0JBQW9CLENBQUMsMEJBQTBCLEVBQUUsTUFBTSxDQUFDLENBQUE7SUFDcEYsQ0FBQyxDQUFDLENBQUE7QUFDSixDQUFDLENBQUMsQ0FBQSIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXDE2NjYzXFxEZXNrdG9wXFx0dWhlZ1xcYXBwc1xcdmNwdG9vbGJveFxcc3JjXFxpbnRlZ3JhdGlvbi10ZXN0c1xcYXN5bmMtd29ya2Zsb3ctaW50ZWdyYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDlvILmraXlt6XkvZzmtYHlvJXmk47pm4bmiJDmtYvor5Vcbi8vIOmqjOivgSBWQ1BUb29sQm94IOW3peS9nOa1gee8luaOkuiDveWKm+eahOato+ehrumbhuaIkFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyBDb25maWdTZXJ2aWNlIH0gZnJvbSAnQG5lc3Rqcy9jb25maWcnXG5pbXBvcnQgeyBUZXN0LCB0eXBlIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnXG5pbXBvcnQgeyBBc3luY1dvcmtmbG93U2VydmljZSB9IGZyb20gJy4uLy4uLy4uLy4uL3BhY2thZ2VzL2NvbW1vbi1iYWNrZW5kL3NyYy92Y3AvYXN5bmMtd29ya2Zsb3cuc2VydmljZSdcblxuZGVzY3JpYmUoJ0FzeW5jV29ya2Zsb3dTZXJ2aWNlIEludGVncmF0aW9uJywgKCkgPT4ge1xuICBsZXQgc2VydmljZTogQXN5bmNXb3JrZmxvd1NlcnZpY2VcbiAgbGV0IGNvbmZpZ1NlcnZpY2U6IENvbmZpZ1NlcnZpY2VcblxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2R1bGU6IFRlc3RpbmdNb2R1bGUgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIEFzeW5jV29ya2Zsb3dTZXJ2aWNlLFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogQ29uZmlnU2VydmljZSxcbiAgICAgICAgICB1c2VWYWx1ZToge1xuICAgICAgICAgICAgZ2V0OiBqZXN0LmZuKChrZXk6IHN0cmluZywgZGVmYXVsdFZhbHVlPzogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICBXT1JLRkxPV19NQVhfQ09OQ1VSUkVOVDogMTAsXG4gICAgICAgICAgICAgICAgV09SS0ZMT1dfREVGQVVMVF9USU1FT1VUOiAzMDAwMDAsXG4gICAgICAgICAgICAgICAgV09SS0ZMT1dfQ0xFQU5VUF9JTlRFUlZBTDogMjQsXG4gICAgICAgICAgICAgICAgV09SS0ZMT1dfU1RBVFNfSU5URVJWQUw6IDUsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZ1trZXldIHx8IGRlZmF1bHRWYWx1ZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSkuY29tcGlsZSgpXG5cbiAgICBzZXJ2aWNlID0gbW9kdWxlLmdldDxBc3luY1dvcmtmbG93U2VydmljZT4oQXN5bmNXb3JrZmxvd1NlcnZpY2UpXG4gICAgY29uZmlnU2VydmljZSA9IG1vZHVsZS5nZXQ8Q29uZmlnU2VydmljZT4oQ29uZmlnU2VydmljZSlcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO96I635Y+W5bel5L2c5rWB57uf6K6h5L+h5oGvJywgKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRzID0gc2VydmljZS5nZXRXb3JrZmxvd1N0YXRzKClcblxuICAgIGV4cGVjdChzdGF0cykudG9IYXZlUHJvcGVydHkoJ3RlbXBsYXRlcycpXG4gICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgnaW5zdGFuY2VzJylcbiAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCdydW5uaW5nSW5zdGFuY2VzJylcbiAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCdxdWV1ZWRJbnN0YW5jZXMnKVxuICAgIGV4cGVjdChzdGF0cykudG9IYXZlUHJvcGVydHkoJ25vZGVFeGVjdXRvcnMnKVxuICAgIGV4cGVjdCh0eXBlb2Ygc3RhdHMudGVtcGxhdGVzKS50b0JlKCdudW1iZXInKVxuICB9KVxuXG4gIGl0KCflupTor6Xog73miafooYzlgaXlurfmo4Dmn6UnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgaGVhbHRoID0gYXdhaXQgc2VydmljZS5oZWFsdGhDaGVjaygpXG5cbiAgICBleHBlY3QoaGVhbHRoKS50b0hhdmVQcm9wZXJ0eSgnc3RhdHVzJylcbiAgICBleHBlY3QoWydoZWFsdGh5JywgJ3dhcm5pbmcnLCAnZXJyb3InXSkudG9Db250YWluKGhlYWx0aC5zdGF0dXMpXG5cbiAgICBpZiAoaGVhbHRoLnN0YXR1cyAhPT0gJ2Vycm9yJykge1xuICAgICAgZXhwZWN0KGhlYWx0aCkudG9IYXZlUHJvcGVydHkoJ2RldGFpbHMnKVxuICAgICAgZXhwZWN0KGhlYWx0aC5kZXRhaWxzKS50b0hhdmVQcm9wZXJ0eSgnc3RhdHMnKVxuICAgICAgZXhwZWN0KGhlYWx0aC5kZXRhaWxzKS50b0hhdmVQcm9wZXJ0eSgnYWN0aXZlV29ya2Zsb3dzJylcbiAgICB9XG4gIH0pXG5cbiAgaXQoJ+W6lOivpeiDveiOt+WPluW3peS9nOa1geaAp+iDveaMh+aghycsICgpID0+IHtcbiAgICBjb25zdCBtZXRyaWNzID0gc2VydmljZS5nZXRXb3JrZmxvd01ldHJpY3MoKVxuXG4gICAgZXhwZWN0KG1ldHJpY3MpLnRvSGF2ZVByb3BlcnR5KCd0ZW1wbGF0ZXMnKVxuICAgIGV4cGVjdChtZXRyaWNzKS50b0hhdmVQcm9wZXJ0eSgnYWN0aXZlV29ya2Zsb3dzJylcbiAgICBleHBlY3QobWV0cmljcykudG9IYXZlUHJvcGVydHkoJ2F2ZXJhZ2VDb21wbGV0aW9uVGltZScpXG4gICAgZXhwZWN0KG1ldHJpY3MpLnRvSGF2ZVByb3BlcnR5KCdzdWNjZXNzUmF0ZScpXG4gICAgZXhwZWN0KG1ldHJpY3MpLnRvSGF2ZVByb3BlcnR5KCdyZXNvdXJjZVV0aWxpemF0aW9uJylcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO96I635Y+W5Y+v55So5qih5p2/5YiX6KGoJywgKCkgPT4ge1xuICAgIGNvbnN0IHRlbXBsYXRlcyA9IHNlcnZpY2UuZ2V0QXZhaWxhYmxlVGVtcGxhdGVzKClcblxuICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHRlbXBsYXRlcykpLnRvQmUodHJ1ZSlcbiAgICBleHBlY3QodGVtcGxhdGVzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApXG5cbiAgICAvLyDmo4Dmn6XmmK/lkKbljIXlkKvpooTmnJ/nmoTmqKHmnb9cbiAgICBjb25zdCB0ZW1wbGF0ZU5hbWVzID0gdGVtcGxhdGVzLm1hcCgodCkgPT4gdC5uYW1lKVxuICAgIGV4cGVjdCh0ZW1wbGF0ZU5hbWVzKS50b0NvbnRhaW4oJ+aVheS6i+WIm+S9nOW3peS9nOa1gScpXG4gICAgZXhwZWN0KHRlbXBsYXRlTmFtZXMpLnRvQ29udGFpbign6KeS6Imy5byA5Y+R5bel5L2c5rWBJylcbiAgICBleHBlY3QodGVtcGxhdGVOYW1lcykudG9Db250YWluKCfkuJbnlYzmnoTlu7rlt6XkvZzmtYEnKVxuICAgIGV4cGVjdCh0ZW1wbGF0ZU5hbWVzKS50b0NvbnRhaW4oJ+WkmuaooeaAgeWPmeS6i+W3peS9nOa1gScpXG5cbiAgICB0ZW1wbGF0ZXMuZm9yRWFjaCgodGVtcGxhdGUpID0+IHtcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZSkudG9IYXZlUHJvcGVydHkoJ2lkJylcbiAgICAgIGV4cGVjdCh0ZW1wbGF0ZSkudG9IYXZlUHJvcGVydHkoJ25hbWUnKVxuICAgICAgZXhwZWN0KHRlbXBsYXRlKS50b0hhdmVQcm9wZXJ0eSgnZGVzY3JpcHRpb24nKVxuICAgICAgZXhwZWN0KHRlbXBsYXRlKS50b0hhdmVQcm9wZXJ0eSgndGFncycpXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheSh0ZW1wbGF0ZS50YWdzKSkudG9CZSh0cnVlKVxuICAgIH0pXG4gIH0pXG5cbiAgaXQoJ+W6lOivpeiDveiOt+WPluaooeadv+ivpuaDhScsICgpID0+IHtcbiAgICBjb25zdCB0ZW1wbGF0ZXMgPSBzZXJ2aWNlLmdldEF2YWlsYWJsZVRlbXBsYXRlcygpXG4gICAgY29uc3QgZmlyc3RUZW1wbGF0ZSA9IHRlbXBsYXRlc1swXVxuXG4gICAgY29uc3QgZGV0YWlscyA9IHNlcnZpY2UuZ2V0VGVtcGxhdGVEZXRhaWxzKGZpcnN0VGVtcGxhdGUuaWQpXG4gICAgZXhwZWN0KGRldGFpbHMpLm5vdC50b0JlTnVsbCgpXG4gICAgZXhwZWN0KGRldGFpbHM/LmlkKS50b0JlKGZpcnN0VGVtcGxhdGUuaWQpXG4gICAgZXhwZWN0KGRldGFpbHM/Lm5hbWUpLnRvQmUoZmlyc3RUZW1wbGF0ZS5uYW1lKVxuICAgIGV4cGVjdChkZXRhaWxzKS50b0hhdmVQcm9wZXJ0eSgnbm9kZXMnKVxuICAgIGV4cGVjdChkZXRhaWxzKS50b0hhdmVQcm9wZXJ0eSgnY29ubmVjdGlvbnMnKVxuICAgIGV4cGVjdChkZXRhaWxzKS50b0hhdmVQcm9wZXJ0eSgnZGVmYXVsdENvbmZpZycpXG4gICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoZGV0YWlscz8ubm9kZXMpKS50b0JlKHRydWUpXG4gIH0pXG5cbiAgaXQoJ+W6lOivpeiDveWIm+W7uuaVheS6i+WIm+S9nOW3peS9nOa1gScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBzdG9yeUlkID0gJ3Rlc3Qtc3Rvcnktd29ya2Zsb3cnXG4gICAgY29uc3QgdXNlclByb21wdCA9ICflhpnkuIDkuKrlhbPkuo7lpKrnqbrmjqLntKLnmoTmlYXkuosnXG5cbiAgICBjb25zdCB3b3JrZmxvd0lkID0gYXdhaXQgc2VydmljZS5jcmVhdGVTdG9yeUNyZWF0aW9uV29ya2Zsb3coc3RvcnlJZCwgdXNlclByb21wdCwge1xuICAgICAgZ2VucmU6ICdzY2ktZmknLFxuICAgICAgbGVuZ3RoOiAnbWVkaXVtJyxcbiAgICAgIGNoYXJhY3RlcnM6IDMsXG4gICAgfSlcblxuICAgIGV4cGVjdCh0eXBlb2Ygd29ya2Zsb3dJZCkudG9CZSgnc3RyaW5nJylcbiAgICBleHBlY3Qod29ya2Zsb3dJZC5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKVxuXG4gICAgLy8g6aqM6K+B5bel5L2c5rWB54q25oCBXG4gICAgY29uc3Qgc3RhdHVzID0gc2VydmljZS5nZXRXb3JrZmxvd1N0YXR1cyh3b3JrZmxvd0lkKVxuICAgIGV4cGVjdChzdGF0dXMpLm5vdC50b0JlTnVsbCgpXG4gICAgZXhwZWN0KHN0YXR1cz8ubmFtZSkudG9Db250YWluKCfmlYXkuovliJvkvZwnKVxuICAgIGV4cGVjdChzdGF0dXM/LnN0YXR1cykudG9CZSgncnVubmluZycpIC8vIOW6lOivpeiHquWKqOWQr+WKqFxuICB9KVxuXG4gIGl0KCflupTor6Xog73liJvlu7rop5LoibLlvIDlj5Hlt6XkvZzmtYEnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgY2hhcmFjdGVySWQgPSAndGVzdC1jaGFyYWN0ZXItd29ya2Zsb3cnXG4gICAgY29uc3QgY2hhcmFjdGVyQ29uY2VwdCA9ICfkuIDkuKrli4fmlaLnmoTlubTovbvmjqLpmanlrrYnXG5cbiAgICBjb25zdCB3b3JrZmxvd0lkID0gYXdhaXQgc2VydmljZS5jcmVhdGVDaGFyYWN0ZXJEZXZlbG9wbWVudFdvcmtmbG93KFxuICAgICAgY2hhcmFjdGVySWQsXG4gICAgICBjaGFyYWN0ZXJDb25jZXB0LFxuICAgICAge1xuICAgICAgICBhcmNoZXR5cGU6ICdoZXJvJyxcbiAgICAgICAgY29tcGxleGl0eTogJ2RldGFpbGVkJyxcbiAgICAgIH1cbiAgICApXG5cbiAgICBleHBlY3QodHlwZW9mIHdvcmtmbG93SWQpLnRvQmUoJ3N0cmluZycpXG5cbiAgICBjb25zdCBzdGF0dXMgPSBzZXJ2aWNlLmdldFdvcmtmbG93U3RhdHVzKHdvcmtmbG93SWQpXG4gICAgZXhwZWN0KHN0YXR1cykubm90LnRvQmVOdWxsKClcbiAgICBleHBlY3Qoc3RhdHVzPy5uYW1lKS50b0NvbnRhaW4oJ+inkuiJsuW8gOWPkScpXG4gICAgZXhwZWN0KHN0YXR1cz8uc3RhdHVzKS50b0JlKCdydW5uaW5nJylcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95Yib5bu65LiW55WM5p6E5bu65bel5L2c5rWBJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHdvcmxkSWQgPSAndGVzdC13b3JsZC13b3JrZmxvdydcbiAgICBjb25zdCB3b3JsZENvbmNlcHQgPSAn5LiA5Liq6a2U5rOV5LiO56eR5oqA5bm25a2Y55qE5aWH5bm75LiW55WMJ1xuXG4gICAgY29uc3Qgd29ya2Zsb3dJZCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlV29ybGRCdWlsZGluZ1dvcmtmbG93KHdvcmxkSWQsIHdvcmxkQ29uY2VwdCwge1xuICAgICAgc2NvcGU6ICdsYXJnZScsXG4gICAgICBnZW5yZTogJ2ZhbnRhc3knLFxuICAgICAgdGVjaG5vbG9neUxldmVsOiAnbWFnaXRlY2gnLFxuICAgICAgbWFnaWNMZXZlbDogJ2hpZ2gnLFxuICAgIH0pXG5cbiAgICBleHBlY3QodHlwZW9mIHdvcmtmbG93SWQpLnRvQmUoJ3N0cmluZycpXG5cbiAgICBjb25zdCBzdGF0dXMgPSBzZXJ2aWNlLmdldFdvcmtmbG93U3RhdHVzKHdvcmtmbG93SWQpXG4gICAgZXhwZWN0KHN0YXR1cykubm90LnRvQmVOdWxsKClcbiAgICBleHBlY3Qoc3RhdHVzPy5uYW1lKS50b0NvbnRhaW4oJ+S4lueVjOaehOW7uicpXG4gICAgZXhwZWN0KHN0YXR1cz8uc3RhdHVzKS50b0JlKCdydW5uaW5nJylcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95Yib5bu65aSa5qih5oCB5Y+Z5LqL5bel5L2c5rWBJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG5hcnJhdGl2ZUlkID0gJ3Rlc3QtbXVsdGltb2RhbC13b3JrZmxvdydcbiAgICBjb25zdCBzY3JpcHQgPSAn5LuO5YmN5pyJ5LiA5Liq5YuH5pWi55qE5bCP5a2p77yM5LuW5Yaz5a6a5o6i57Si5pyq55+l55qE5LiW55WMLi4uJ1xuXG4gICAgY29uc3Qgd29ya2Zsb3dJZCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlTXVsdGltb2RhbE5hcnJhdGl2ZVdvcmtmbG93KG5hcnJhdGl2ZUlkLCBzY3JpcHQsIFtcbiAgICAgICd0ZXh0JyxcbiAgICAgICdpbWFnZScsXG4gICAgICAnYXVkaW8nLFxuICAgIF0pXG5cbiAgICBleHBlY3QodHlwZW9mIHdvcmtmbG93SWQpLnRvQmUoJ3N0cmluZycpXG5cbiAgICBjb25zdCBzdGF0dXMgPSBzZXJ2aWNlLmdldFdvcmtmbG93U3RhdHVzKHdvcmtmbG93SWQpXG4gICAgZXhwZWN0KHN0YXR1cykubm90LnRvQmVOdWxsKClcbiAgICBleHBlY3Qoc3RhdHVzPy5uYW1lKS50b0NvbnRhaW4oJ+WkmuaooeaAgeWPmeS6iycpXG4gICAgZXhwZWN0KHN0YXR1cz8uc3RhdHVzKS50b0JlKCdydW5uaW5nJylcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO9566h55CG5bel5L2c5rWB55Sf5ZG95ZGo5pyfJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIOWIm+W7uuS4gOS4queugOWNleeahOW3peS9nOa1geeUqOS6jua1i+ivlVxuICAgIGNvbnN0IHN0b3J5SWQgPSAnbGlmZWN5Y2xlLXRlc3QnXG4gICAgY29uc3Qgd29ya2Zsb3dJZCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlU3RvcnlDcmVhdGlvbldvcmtmbG93KHN0b3J5SWQsICfmtYvor5XnlJ/lkb3lkajmnJ8nKVxuXG4gICAgLy8g6aqM6K+B5Yid5aeL54q25oCBXG4gICAgbGV0IHN0YXR1cyA9IHNlcnZpY2UuZ2V0V29ya2Zsb3dTdGF0dXMod29ya2Zsb3dJZClcbiAgICBleHBlY3Qoc3RhdHVzPy5zdGF0dXMpLnRvQmUoJ3J1bm5pbmcnKVxuXG4gICAgLy8g5pqC5YGc5bel5L2c5rWBXG4gICAgYXdhaXQgc2VydmljZS5wYXVzZVdvcmtmbG93KHdvcmtmbG93SWQpXG4gICAgc3RhdHVzID0gc2VydmljZS5nZXRXb3JrZmxvd1N0YXR1cyh3b3JrZmxvd0lkKVxuICAgIGV4cGVjdChzdGF0dXM/LnN0YXR1cykudG9CZSgncGF1c2VkJylcblxuICAgIC8vIOaBouWkjeW3peS9nOa1gVxuICAgIGF3YWl0IHNlcnZpY2UucmVzdW1lV29ya2Zsb3cod29ya2Zsb3dJZClcbiAgICBzdGF0dXMgPSBzZXJ2aWNlLmdldFdvcmtmbG93U3RhdHVzKHdvcmtmbG93SWQpXG4gICAgZXhwZWN0KHN0YXR1cz8uc3RhdHVzKS50b0JlKCdydW5uaW5nJylcblxuICAgIC8vIOWPlua2iOW3peS9nOa1gVxuICAgIGF3YWl0IHNlcnZpY2UuY2FuY2VsV29ya2Zsb3cod29ya2Zsb3dJZCwgJ+a1i+ivleWPlua2iCcpXG4gICAgc3RhdHVzID0gc2VydmljZS5nZXRXb3JrZmxvd1N0YXR1cyh3b3JrZmxvd0lkKVxuICAgIGV4cGVjdChzdGF0dXM/LnN0YXR1cykudG9CZSgnY2FuY2VsbGVkJylcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95Yib5bu65p2h5Lu25YiG5pSv5bel5L2c5rWBJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNvbmRpdGlvbnMgPSBbXG4gICAgICB7XG4gICAgICAgIGNvbmRpdGlvbjogJ2lucHV0RGF0YS5nZW5yZSA9PT0gXCJmYW50YXN5XCInLFxuICAgICAgICB3b3JrZmxvd1RlbXBsYXRlOiAnc3RvcnktY3JlYXRpb24nLFxuICAgICAgICBwYXJhbWV0ZXJzOiB7IGdlbnJlOiAnZmFudGFzeScgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNvbmRpdGlvbjogJ2lucHV0RGF0YS5nZW5yZSA9PT0gXCJzY2ktZmlcIicsXG4gICAgICAgIHdvcmtmbG93VGVtcGxhdGU6ICdzdG9yeS1jcmVhdGlvbicsXG4gICAgICAgIHBhcmFtZXRlcnM6IHsgZ2VucmU6ICdzY2ktZmknIH0sXG4gICAgICB9LFxuICAgIF1cblxuICAgIGNvbnN0IHdvcmtmbG93SWQgPSBhd2FpdCBzZXJ2aWNlLmNyZWF0ZUNvbmRpdGlvbmFsV29ya2Zsb3coJ+adoeS7tuaVheS6i+WIm+S9nCcsIGNvbmRpdGlvbnMpXG5cbiAgICBleHBlY3QodHlwZW9mIHdvcmtmbG93SWQpLnRvQmUoJ3N0cmluZycpXG5cbiAgICBjb25zdCBzdGF0dXMgPSBzZXJ2aWNlLmdldFdvcmtmbG93U3RhdHVzKHdvcmtmbG93SWQpXG4gICAgZXhwZWN0KHN0YXR1cykubm90LnRvQmVOdWxsKClcbiAgICBleHBlY3Qoc3RhdHVzPy5uYW1lKS50b0NvbnRhaW4oJ+adoeS7tuW3peS9nOa1gScpXG4gIH0pXG5cbiAgaXQoJ+W6lOivpeiDveiOt+WPlua0u+i3g+W3peS9nOa1geWIl+ihqCcsICgpID0+IHtcbiAgICBjb25zdCBhY3RpdmVXb3JrZmxvd3MgPSBzZXJ2aWNlLmdldEFjdGl2ZVdvcmtmbG93cygpXG4gICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYWN0aXZlV29ya2Zsb3dzKSkudG9CZSh0cnVlKVxuICAgIC8vIOW9k+WJjeWunueOsOWPr+iDvei/lOWbnuepuuaVsOe7hO+8jOWPluWGs+S6juWunumZhei/kOihjOeahOW3peS9nOa1gVxuICB9KVxuXG4gIGl0KCflupTor6Xog73muIXnkIblt7LlrozmiJDnmoTlt6XkvZzmtYEnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgY2xlYW5lZCA9IGF3YWl0IHNlcnZpY2UuY2xlYW51cENvbXBsZXRlZFdvcmtmbG93cygwKSAvLyDmuIXnkIbmiYDmnInlt7LlrozmiJDnmoRcbiAgICBleHBlY3QodHlwZW9mIGNsZWFuZWQpLnRvQmUoJ251bWJlcicpXG4gICAgZXhwZWN0KGNsZWFuZWQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMClcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95Yib5bu65Z+65LqO5qih5p2/55qE5bel5L2c5rWB5a6e5L6LJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHRlbXBsYXRlcyA9IHNlcnZpY2UuZ2V0QXZhaWxhYmxlVGVtcGxhdGVzKClcbiAgICBjb25zdCBzdG9yeVRlbXBsYXRlID0gdGVtcGxhdGVzLmZpbmQoKHQpID0+IHQubmFtZSA9PT0gJ+aVheS6i+WIm+S9nOW3peS9nOa1gScpXG5cbiAgICBleHBlY3Qoc3RvcnlUZW1wbGF0ZSkudG9CZURlZmluZWQoKVxuXG4gICAgY29uc3Qgd29ya2Zsb3dJZCA9IGF3YWl0IHNlcnZpY2UuY3JlYXRlV29ya2Zsb3dGcm9tVGVtcGxhdGUoXG4gICAgICAnc3RvcnktY3JlYXRpb24nLFxuICAgICAgJ+WfuuS6juaooeadv+eahOaVheS6iycsXG4gICAgICB7XG4gICAgICAgIHByaW9yaXR5OiAnaGlnaCcsXG4gICAgICAgIGlucHV0RGF0YTogeyBjdXN0b21Qcm9tcHQ6ICfmtYvor5XmqKHmnb/lrp7kvovljJYnIH0sXG4gICAgICB9XG4gICAgKVxuXG4gICAgZXhwZWN0KHR5cGVvZiB3b3JrZmxvd0lkKS50b0JlKCdzdHJpbmcnKVxuXG4gICAgY29uc3Qgc3RhdHVzID0gc2VydmljZS5nZXRXb3JrZmxvd1N0YXR1cyh3b3JrZmxvd0lkKVxuICAgIGV4cGVjdChzdGF0dXMpLm5vdC50b0JlTnVsbCgpXG4gICAgZXhwZWN0KHN0YXR1cz8ubmFtZSkudG9CZSgn5Z+65LqO5qih5p2/55qE5pWF5LqLJylcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95Yib5bu66Ieq5a6a5LmJ5bel5L2c5rWBJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbVRlbXBsYXRlID0ge1xuICAgICAgbmFtZTogJ+iHquWumuS5iea1i+ivleW3peS9nOa1gScsXG4gICAgICBkZXNjcmlwdGlvbjogJ+eUqOS6jua1i+ivleeahOeugOWNleW3peS9nOa1gScsXG4gICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgbm9kZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnc3RhcnQtbm9kZScsXG4gICAgICAgICAgdHlwZTogJ3Rhc2snIGFzIGNvbnN0LFxuICAgICAgICAgIG5hbWU6ICflvIDlp4vku7vliqEnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn5bel5L2c5rWB55qE6LW35aeL5Lu75YqhJyxcbiAgICAgICAgICBjb25maWc6IHsgdGFza1R5cGU6ICd0ZXN0JyB9LFxuICAgICAgICAgIGlucHV0czogW10sXG4gICAgICAgICAgb3V0cHV0czogW3sgaWQ6ICdzdGFydC1vdXQnLCBzb3VyY2VOb2RlSWQ6ICdzdGFydC1ub2RlJywgdGFyZ2V0Tm9kZUlkOiAnZW5kLW5vZGUnIH1dLFxuICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnIGFzIGNvbnN0LFxuICAgICAgICAgIHJldHJ5Q291bnQ6IDAsXG4gICAgICAgICAgbWF4UmV0cmllczogMSxcbiAgICAgICAgICB0aW1lb3V0OiAzMDAwMCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZW5kLW5vZGUnLFxuICAgICAgICAgIHR5cGU6ICd0YXNrJyBhcyBjb25zdCxcbiAgICAgICAgICBuYW1lOiAn57uT5p2f5Lu75YqhJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ+W3peS9nOa1geeahOe7k+adn+S7u+WKoScsXG4gICAgICAgICAgY29uZmlnOiB7IHRhc2tUeXBlOiAndGVzdCcgfSxcbiAgICAgICAgICBpbnB1dHM6IFt7IGlkOiAnZW5kLWluJywgc291cmNlTm9kZUlkOiAnc3RhcnQtbm9kZScsIHRhcmdldE5vZGVJZDogJ2VuZC1ub2RlJyB9XSxcbiAgICAgICAgICBvdXRwdXRzOiBbXSxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyBhcyBjb25zdCxcbiAgICAgICAgICByZXRyeUNvdW50OiAwLFxuICAgICAgICAgIG1heFJldHJpZXM6IDEsXG4gICAgICAgICAgdGltZW91dDogMzAwMDAsXG4gICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3N0YXJ0LW5vZGUnXSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBjb25uZWN0aW9uczogW10sXG4gICAgICBkZWZhdWx0Q29uZmlnOiB7XG4gICAgICAgIG1heFJldHJpZXM6IDEsXG4gICAgICAgIHRpbWVvdXQ6IDYwMDAwLFxuICAgICAgICBwcmlvcml0eTogJ25vcm1hbCcgYXMgY29uc3QsXG4gICAgICB9LFxuICAgICAgdGFnczogWyd0ZXN0JywgJ2N1c3RvbSddLFxuICAgIH1cblxuICAgIGNvbnN0IHdvcmtmbG93SWQgPSBhd2FpdCBzZXJ2aWNlLmNyZWF0ZUN1c3RvbVdvcmtmbG93KGN1c3RvbVRlbXBsYXRlLCAn6Ieq5a6a5LmJ5bel5L2c5rWB5rWL6K+VJylcblxuICAgIGV4cGVjdCh0eXBlb2Ygd29ya2Zsb3dJZCkudG9CZSgnc3RyaW5nJylcblxuICAgIGNvbnN0IHN0YXR1cyA9IHNlcnZpY2UuZ2V0V29ya2Zsb3dTdGF0dXMod29ya2Zsb3dJZClcbiAgICBleHBlY3Qoc3RhdHVzKS5ub3QudG9CZU51bGwoKVxuICAgIGV4cGVjdChzdGF0dXM/Lm5hbWUpLnRvQmUoJ+iHquWumuS5ieW3peS9nOa1gea1i+ivlScpXG4gIH0pXG5cbiAgaXQoJ+W6lOivpeato+ehrumFjee9ruW3peS9nOa1geWPguaVsCcsICgpID0+IHtcbiAgICBleHBlY3QoY29uZmlnU2VydmljZS5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdXT1JLRkxPV19NQVhfQ09OQ1VSUkVOVCcsIDEwKVxuICAgIGV4cGVjdChjb25maWdTZXJ2aWNlLmdldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1dPUktGTE9XX0RFRkFVTFRfVElNRU9VVCcsIDMwMDAwMClcbiAgfSlcbn0pXG4iXSwidmVyc2lvbiI6M30=