63272e65627a99af0140779285ccd484
"use strict";
// ============================================================================
// 跨记忆网络集成测试
// 验证 VCPToolBox 记忆共享和联想能力的正确集成
// ============================================================================
Object.defineProperty(exports, "__esModule", { value: true });
const config_1 = require("@nestjs/config");
const testing_1 = require("@nestjs/testing");
const cross_memory_service_1 = require("../../../../packages/common-backend/src/vcp/cross-memory.service");
describe('CrossMemoryService Integration', () => {
    let service;
    let configService;
    beforeEach(async () => {
        const module = await testing_1.Test.createTestingModule({
            providers: [
                cross_memory_service_1.CrossMemoryService,
                {
                    provide: config_1.ConfigService,
                    useValue: {
                        get: jest.fn((key, defaultValue) => {
                            const config = {
                                MEMORY_SIMILARITY_THRESHOLD: 0.7,
                                MEMORY_MAX_CONNECTIONS: 10,
                                MEMORY_DECAY_RATE: 0.95,
                            };
                            return config[key] || defaultValue;
                        }),
                    },
                },
            ],
        }).compile();
        service = module.get(cross_memory_service_1.CrossMemoryService);
        configService = module.get(config_1.ConfigService);
    });
    it('应该能获取记忆统计信息', () => {
        const stats = service.getMemoryStats();
        expect(stats).toHaveProperty('totalMemories');
        expect(stats).toHaveProperty('totalConnections');
        expect(stats).toHaveProperty('agentCount');
        expect(stats).toHaveProperty('memoryTypes');
        expect(stats).toHaveProperty('averageImportance');
        expect(typeof stats.totalMemories).toBe('number');
    });
    it('应该能执行健康检查', async () => {
        const health = await service.healthCheck();
        expect(health).toHaveProperty('status');
        expect(['healthy', 'error']).toContain(health.status);
        if (health.status === 'healthy') {
            expect(health).toHaveProperty('details');
        }
    });
    it('应该能添加记忆', async () => {
        const memoryData = {
            agentId: 'test-agent',
            type: 'experience',
            content: {
                event: 'test event',
                outcome: 'successful test',
            },
            tags: ['test', 'experience'],
            importance: 0.8,
            connections: [],
        };
        const memoryId = await service.addMemory(memoryData);
        expect(typeof memoryId).toBe('string');
        expect(memoryId.length).toBeGreaterThan(0);
    });
    it('应该能获取记忆', async () => {
        // 先添加一个记忆
        const memoryData = {
            agentId: 'test-agent-2',
            type: 'knowledge',
            content: { topic: 'test knowledge', info: 'test information' },
            tags: ['test', 'knowledge'],
            importance: 0.7,
            connections: [],
        };
        const memoryId = await service.addMemory(memoryData);
        // 然后获取它
        const memory = await service.getMemory(memoryId);
        expect(memory).not.toBeNull();
        expect(memory?.id).toBe(memoryId);
        expect(memory?.agentId).toBe('test-agent-2');
        expect(memory?.type).toBe('knowledge');
    });
    it('应该能更新记忆', async () => {
        // 先添加一个记忆
        const memoryData = {
            agentId: 'test-agent-3',
            type: 'experience',
            content: { event: 'original event' },
            tags: ['test'],
            importance: 0.5,
            connections: [],
        };
        const memoryId = await service.addMemory(memoryData);
        // 更新记忆
        const success = await service.updateMemory(memoryId, {
            importance: 0.9,
            content: { event: 'updated event', additionalInfo: 'new data' },
        });
        expect(success).toBe(true);
        // 验证更新
        const updatedMemory = await service.getMemory(memoryId);
        expect(updatedMemory?.importance).toBe(0.9);
        expect(updatedMemory?.content.event).toBe('updated event');
        expect(updatedMemory?.content.additionalInfo).toBe('new data');
    });
    it('应该能删除记忆', async () => {
        // 先添加一个记忆
        const memoryData = {
            agentId: 'test-agent-4',
            type: 'event',
            content: { event: 'to be deleted' },
            tags: ['test', 'delete'],
            importance: 0.6,
            connections: [],
        };
        const memoryId = await service.addMemory(memoryData);
        // 删除记忆
        const deleteSuccess = await service.deleteMemory(memoryId);
        expect(deleteSuccess).toBe(true);
        // 验证已删除
        const deletedMemory = await service.getMemory(memoryId);
        expect(deletedMemory).toBeNull();
    });
    it('应该能查询记忆', async () => {
        // 添加几个测试记忆
        await service.addMemory({
            agentId: 'query-test-agent',
            type: 'experience',
            content: { event: 'query test 1' },
            tags: ['query-test', 'experience'],
            importance: 0.8,
            connections: [],
        });
        await service.addMemory({
            agentId: 'query-test-agent',
            type: 'knowledge',
            content: { topic: 'query test knowledge' },
            tags: ['query-test', 'knowledge'],
            importance: 0.7,
            connections: [],
        });
        // 查询记忆
        const results = await service.queryMemories({
            agentId: 'query-test-agent',
            limit: 10,
        });
        expect(Array.isArray(results)).toBe(true);
        expect(results.length).toBeGreaterThanOrEqual(2);
        results.forEach((result) => {
            expect(result).toHaveProperty('memory');
            expect(result).toHaveProperty('score');
            expect(result).toHaveProperty('relevance');
            expect(result.memory.agentId).toBe('query-test-agent');
        });
    });
    it('应该能更新记忆重要性', async () => {
        // 先添加一个记忆
        const memoryData = {
            agentId: 'importance-test',
            type: 'experience',
            content: { event: 'importance test' },
            tags: ['test'],
            importance: 0.5,
            connections: [],
        };
        const memoryId = await service.addMemory(memoryData);
        // 更新重要性
        const success = await service.updateMemoryImportance(memoryId, 0.9);
        expect(success).toBe(true);
        // 验证更新
        const updatedMemory = await service.getMemory(memoryId);
        expect(updatedMemory?.importance).toBe(0.9);
    });
    it('应该能添加故事记忆', async () => {
        const storyId = 'test-story-123';
        const agentId = 'story-agent';
        const memoryId = await service.addStoryMemory(storyId, agentId, {
            event: 'story event',
            description: 'test story memory',
        }, 'experience');
        expect(typeof memoryId).toBe('string');
        expect(memoryId.length).toBeGreaterThan(0);
        // 验证记忆内容
        const memory = await service.getMemory(memoryId);
        expect(memory?.content.storyId).toBe(storyId);
        expect(memory?.content.event).toBe('story event');
        expect(memory?.tags).toContain('story');
        expect(memory?.tags).toContain(storyId);
    });
    it('应该能查询故事记忆', async () => {
        const storyId = 'query-story-test';
        // 添加几个故事记忆
        await service.addStoryMemory(storyId, 'agent1', { event: 'story event 1' });
        await service.addStoryMemory(storyId, 'agent2', { event: 'story event 2' });
        const memories = await service.queryStoryMemories(storyId);
        expect(Array.isArray(memories)).toBe(true);
        expect(memories.length).toBeGreaterThanOrEqual(2);
        memories.forEach((memory) => {
            expect(memory.memory.tags).toContain('story');
            expect(memory.memory.tags).toContain(storyId);
        });
    });
    it('应该能添加角色记忆', async () => {
        const characterId = 'test-character-456';
        const agentId = 'character-agent';
        const memoryId = await service.addCharacterMemory(characterId, agentId, {
            personalityChange: true,
            description: 'character development event',
        });
        expect(typeof memoryId).toBe('string');
        const memory = await service.getMemory(memoryId);
        expect(memory?.content.characterId).toBe(characterId);
        expect(memory?.content.personalityChange).toBe(true);
        expect(memory?.tags).toContain('character');
        expect(memory?.tags).toContain(characterId);
    });
    it('应该能查询角色记忆', async () => {
        const characterId = 'query-character-test';
        await service.addCharacterMemory(characterId, 'agent1', { trait: 'brave' });
        await service.addCharacterMemory(characterId, 'agent2', { trait: 'wise' });
        const memories = await service.queryCharacterMemories(characterId);
        expect(Array.isArray(memories)).toBe(true);
        expect(memories.length).toBeGreaterThanOrEqual(2);
        memories.forEach((memory) => {
            expect(memory.memory.tags).toContain('character');
            expect(memory.memory.tags).toContain(characterId);
        });
    });
    it('应该能添加创作模式记忆', async () => {
        const patternType = 'plot-structure';
        const agentId = 'creative-agent';
        const memoryId = await service.addCreativePattern(patternType, agentId, {
            structure: 'hero-journey',
            elements: ['call to adventure', 'trials', 'transformation'],
        }, true);
        expect(typeof memoryId).toBe('string');
        const memory = await service.getMemory(memoryId);
        expect(memory?.content.patternType).toBe(patternType);
        expect(memory?.content.success).toBe(true);
        expect(memory?.tags).toContain('creative-pattern');
        expect(memory?.tags).toContain(patternType);
        expect(memory?.tags).toContain('success');
    });
    it('应该能查找相似创作模式', async () => {
        const patternType = 'similar-pattern-test';
        // 添加一些成功的创作模式
        await service.addCreativePattern(patternType, 'agent1', { type: 'hero-journey' }, true);
        await service.addCreativePattern(patternType, 'agent2', { type: 'hero-journey', variant: 'epic' }, true);
        const similarPatterns = await service.findSimilarCreativePatterns(patternType, {
            type: 'hero-journey',
        });
        expect(Array.isArray(similarPatterns)).toBe(true);
        // 相似度匹配可能不会找到结果，取决于实现
    });
    it('应该能添加用户偏好记忆', async () => {
        const userId = 'test-user-789';
        const preferenceType = 'narrative-style';
        const memoryId = await service.addUserPreference(userId, preferenceType, {
            style: 'modern-realism',
            preferredGenres: ['drama', 'literary-fiction'],
        });
        expect(typeof memoryId).toBe('string');
        const memory = await service.getMemory(memoryId);
        expect(memory?.content.userId).toBe(userId);
        expect(memory?.content.preferenceType).toBe(preferenceType);
        expect(memory?.content.preference.style).toBe('modern-realism');
        expect(memory?.tags).toContain('user-preference');
        expect(memory?.tags).toContain(userId);
    });
    it('应该能获取用户偏好', async () => {
        const userId = 'preference-test-user';
        await service.addUserPreference(userId, 'theme', { theme: 'dark' });
        await service.addUserPreference(userId, 'genre', { genre: 'mystery' });
        const preferences = await service.getUserPreferences(userId);
        expect(Array.isArray(preferences)).toBe(true);
        expect(preferences.length).toBeGreaterThanOrEqual(2);
        const themePref = preferences.find((p) => p.type === 'theme');
        const genrePref = preferences.find((p) => p.type === 'genre');
        expect(themePref?.preference.theme).toBe('dark');
        expect(genrePref?.preference.genre).toBe('mystery');
    });
    it('应该能智能搜索记忆', async () => {
        // 添加一些测试记忆
        await service.addMemory({
            agentId: 'search-agent',
            type: 'knowledge',
            content: { info: 'machine learning is powerful' },
            tags: ['ai', 'ml'],
            importance: 0.8,
            connections: [],
        });
        await service.addMemory({
            agentId: 'search-agent',
            type: 'experience',
            content: { event: 'successful AI implementation' },
            tags: ['ai', 'success'],
            importance: 0.9,
            connections: [],
        });
        const results = await service.intelligentSearch('AI', {
            agentId: 'search-agent',
            tags: ['ai'],
        });
        expect(Array.isArray(results)).toBe(true);
        // 搜索结果取决于实现，可能为空
    });
    it('应该能获取创作灵感', async () => {
        const storyId = 'inspiration-test-story';
        const theme = 'adventure';
        const inspirations = await service.getCreativeInspiration(storyId, theme);
        expect(Array.isArray(inspirations)).toBe(true);
        // 灵感结果可能为空，取决于现有记忆
    });
    it('应该能记录协作经验', async () => {
        const collaborationId = 'test-collab-123';
        const agents = ['agent1', 'agent2', 'agent3'];
        const memoryId = await service.recordCollaborationExperience(collaborationId, agents, {
            success: true,
            quality: 0.85,
            timeEfficiency: 0.9,
            communicationIssues: false,
        });
        expect(typeof memoryId).toBe('string');
        const memory = await service.getMemory(memoryId);
        expect(memory?.content.collaborationId).toBe(collaborationId);
        expect(memory?.content.agents).toEqual(agents);
        expect(memory?.content.outcome.success).toBe(true);
        expect(memory?.tags).toContain('collaboration');
        expect(memory?.tags).toContain('experience');
    });
    it('应该能获取协作历史', async () => {
        const agentId = 'history-agent';
        await service.recordCollaborationExperience('collab1', [agentId, 'other'], { success: true });
        await service.recordCollaborationExperience('collab2', [agentId, 'another'], { success: false });
        const history = await service.getCollaborationHistory(agentId);
        expect(Array.isArray(history)).toBe(true);
        expect(history.length).toBeGreaterThanOrEqual(2);
    });
    it('应该能导出和导入记忆数据', async () => {
        // 导出记忆数据
        const exportData = await service.exportMemoryData();
        expect(exportData).toHaveProperty('memories');
        expect(exportData).toHaveProperty('connections');
        expect(Array.isArray(exportData.memories)).toBe(true);
        expect(typeof exportData.connections).toBe('object');
        // 导入记忆数据（在实际测试中，这可能会影响其他测试）
        // await service.importMemoryData(exportData)
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFwxNjY2M1xcRGVza3RvcFxcdHVoZWdcXGFwcHNcXHZjcHRvb2xib3hcXHNyY1xcaW50ZWdyYXRpb24tdGVzdHNcXGNyb3NzLW1lbW9yeS1pbnRlZ3JhdGlvbi50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQSwrRUFBK0U7QUFDL0UsWUFBWTtBQUNaLCtCQUErQjtBQUMvQiwrRUFBK0U7O0FBRS9FLDJDQUE4QztBQUM5Qyw2Q0FBMEQ7QUFDMUQsMkdBQXFHO0FBRXJHLFFBQVEsQ0FBQyxnQ0FBZ0MsRUFBRSxHQUFHLEVBQUU7SUFDOUMsSUFBSSxPQUEyQixDQUFBO0lBQy9CLElBQUksYUFBNEIsQ0FBQTtJQUVoQyxVQUFVLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDcEIsTUFBTSxNQUFNLEdBQWtCLE1BQU0sY0FBSSxDQUFDLG1CQUFtQixDQUFDO1lBQzNELFNBQVMsRUFBRTtnQkFDVCx5Q0FBa0I7Z0JBQ2xCO29CQUNFLE9BQU8sRUFBRSxzQkFBYTtvQkFDdEIsUUFBUSxFQUFFO3dCQUNSLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBVyxFQUFFLFlBQWtCLEVBQUUsRUFBRTs0QkFDL0MsTUFBTSxNQUFNLEdBQUc7Z0NBQ2IsMkJBQTJCLEVBQUUsR0FBRztnQ0FDaEMsc0JBQXNCLEVBQUUsRUFBRTtnQ0FDMUIsaUJBQWlCLEVBQUUsSUFBSTs2QkFDeEIsQ0FBQTs0QkFDRCxPQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxZQUFZLENBQUE7d0JBQ3BDLENBQUMsQ0FBQztxQkFDSDtpQkFDRjthQUNGO1NBQ0YsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBRVosT0FBTyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQXFCLHlDQUFrQixDQUFDLENBQUE7UUFDNUQsYUFBYSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQWdCLHNCQUFhLENBQUMsQ0FBQTtJQUMxRCxDQUFDLENBQUMsQ0FBQTtJQUVGLEVBQUUsQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFF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OltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcMTY2NjNcXERlc2t0b3BcXHR1aGVnXFxhcHBzXFx2Y3B0b29sYm94XFxzcmNcXGludGVncmF0aW9uLXRlc3RzXFxjcm9zcy1tZW1vcnktaW50ZWdyYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDot6jorrDlv4bnvZHnu5zpm4bmiJDmtYvor5Vcbi8vIOmqjOivgSBWQ1BUb29sQm94IOiusOW/huWFseS6q+WSjOiBlOaDs+iDveWKm+eahOato+ehrumbhuaIkFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyBDb25maWdTZXJ2aWNlIH0gZnJvbSAnQG5lc3Rqcy9jb25maWcnXG5pbXBvcnQgeyBUZXN0LCB0eXBlIFRlc3RpbmdNb2R1bGUgfSBmcm9tICdAbmVzdGpzL3Rlc3RpbmcnXG5pbXBvcnQgeyBDcm9zc01lbW9yeVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi8uLi9wYWNrYWdlcy9jb21tb24tYmFja2VuZC9zcmMvdmNwL2Nyb3NzLW1lbW9yeS5zZXJ2aWNlJ1xuXG5kZXNjcmliZSgnQ3Jvc3NNZW1vcnlTZXJ2aWNlIEludGVncmF0aW9uJywgKCkgPT4ge1xuICBsZXQgc2VydmljZTogQ3Jvc3NNZW1vcnlTZXJ2aWNlXG4gIGxldCBjb25maWdTZXJ2aWNlOiBDb25maWdTZXJ2aWNlXG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9kdWxlOiBUZXN0aW5nTW9kdWxlID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICBDcm9zc01lbW9yeVNlcnZpY2UsXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBDb25maWdTZXJ2aWNlLFxuICAgICAgICAgIHVzZVZhbHVlOiB7XG4gICAgICAgICAgICBnZXQ6IGplc3QuZm4oKGtleTogc3RyaW5nLCBkZWZhdWx0VmFsdWU/OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgICAgICAgIE1FTU9SWV9TSU1JTEFSSVRZX1RIUkVTSE9MRDogMC43LFxuICAgICAgICAgICAgICAgIE1FTU9SWV9NQVhfQ09OTkVDVElPTlM6IDEwLFxuICAgICAgICAgICAgICAgIE1FTU9SWV9ERUNBWV9SQVRFOiAwLjk1LFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBjb25maWdba2V5XSB8fCBkZWZhdWx0VmFsdWVcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pLmNvbXBpbGUoKVxuXG4gICAgc2VydmljZSA9IG1vZHVsZS5nZXQ8Q3Jvc3NNZW1vcnlTZXJ2aWNlPihDcm9zc01lbW9yeVNlcnZpY2UpXG4gICAgY29uZmlnU2VydmljZSA9IG1vZHVsZS5nZXQ8Q29uZmlnU2VydmljZT4oQ29uZmlnU2VydmljZSlcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO96I635Y+W6K6w5b+G57uf6K6h5L+h5oGvJywgKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRzID0gc2VydmljZS5nZXRNZW1vcnlTdGF0cygpXG5cbiAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCd0b3RhbE1lbW9yaWVzJylcbiAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCd0b3RhbENvbm5lY3Rpb25zJylcbiAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCdhZ2VudENvdW50JylcbiAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCdtZW1vcnlUeXBlcycpXG4gICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgnYXZlcmFnZUltcG9ydGFuY2UnKVxuICAgIGV4cGVjdCh0eXBlb2Ygc3RhdHMudG90YWxNZW1vcmllcykudG9CZSgnbnVtYmVyJylcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95omn6KGM5YGl5bq35qOA5p+lJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGhlYWx0aCA9IGF3YWl0IHNlcnZpY2UuaGVhbHRoQ2hlY2soKVxuXG4gICAgZXhwZWN0KGhlYWx0aCkudG9IYXZlUHJvcGVydHkoJ3N0YXR1cycpXG4gICAgZXhwZWN0KFsnaGVhbHRoeScsICdlcnJvciddKS50b0NvbnRhaW4oaGVhbHRoLnN0YXR1cylcblxuICAgIGlmIChoZWFsdGguc3RhdHVzID09PSAnaGVhbHRoeScpIHtcbiAgICAgIGV4cGVjdChoZWFsdGgpLnRvSGF2ZVByb3BlcnR5KCdkZXRhaWxzJylcbiAgICB9XG4gIH0pXG5cbiAgaXQoJ+W6lOivpeiDvea3u+WKoOiusOW/hicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtZW1vcnlEYXRhID0ge1xuICAgICAgYWdlbnRJZDogJ3Rlc3QtYWdlbnQnLFxuICAgICAgdHlwZTogJ2V4cGVyaWVuY2UnIGFzIGNvbnN0LFxuICAgICAgY29udGVudDoge1xuICAgICAgICBldmVudDogJ3Rlc3QgZXZlbnQnLFxuICAgICAgICBvdXRjb21lOiAnc3VjY2Vzc2Z1bCB0ZXN0JyxcbiAgICAgIH0sXG4gICAgICB0YWdzOiBbJ3Rlc3QnLCAnZXhwZXJpZW5jZSddLFxuICAgICAgaW1wb3J0YW5jZTogMC44LFxuICAgICAgY29ubmVjdGlvbnM6IFtdLFxuICAgIH1cblxuICAgIGNvbnN0IG1lbW9yeUlkID0gYXdhaXQgc2VydmljZS5hZGRNZW1vcnkobWVtb3J5RGF0YSlcbiAgICBleHBlY3QodHlwZW9mIG1lbW9yeUlkKS50b0JlKCdzdHJpbmcnKVxuICAgIGV4cGVjdChtZW1vcnlJZC5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKVxuICB9KVxuXG4gIGl0KCflupTor6Xog73ojrflj5borrDlv4YnLCBhc3luYyAoKSA9PiB7XG4gICAgLy8g5YWI5re75Yqg5LiA5Liq6K6w5b+GXG4gICAgY29uc3QgbWVtb3J5RGF0YSA9IHtcbiAgICAgIGFnZW50SWQ6ICd0ZXN0LWFnZW50LTInLFxuICAgICAgdHlwZTogJ2tub3dsZWRnZScgYXMgY29uc3QsXG4gICAgICBjb250ZW50OiB7IHRvcGljOiAndGVzdCBrbm93bGVkZ2UnLCBpbmZvOiAndGVzdCBpbmZvcm1hdGlvbicgfSxcbiAgICAgIHRhZ3M6IFsndGVzdCcsICdrbm93bGVkZ2UnXSxcbiAgICAgIGltcG9ydGFuY2U6IDAuNyxcbiAgICAgIGNvbm5lY3Rpb25zOiBbXSxcbiAgICB9XG5cbiAgICBjb25zdCBtZW1vcnlJZCA9IGF3YWl0IHNlcnZpY2UuYWRkTWVtb3J5KG1lbW9yeURhdGEpXG5cbiAgICAvLyDnhLblkI7ojrflj5blroNcbiAgICBjb25zdCBtZW1vcnkgPSBhd2FpdCBzZXJ2aWNlLmdldE1lbW9yeShtZW1vcnlJZClcbiAgICBleHBlY3QobWVtb3J5KS5ub3QudG9CZU51bGwoKVxuICAgIGV4cGVjdChtZW1vcnk/LmlkKS50b0JlKG1lbW9yeUlkKVxuICAgIGV4cGVjdChtZW1vcnk/LmFnZW50SWQpLnRvQmUoJ3Rlc3QtYWdlbnQtMicpXG4gICAgZXhwZWN0KG1lbW9yeT8udHlwZSkudG9CZSgna25vd2xlZGdlJylcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95pu05paw6K6w5b+GJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIOWFiOa3u+WKoOS4gOS4quiusOW/hlxuICAgIGNvbnN0IG1lbW9yeURhdGEgPSB7XG4gICAgICBhZ2VudElkOiAndGVzdC1hZ2VudC0zJyxcbiAgICAgIHR5cGU6ICdleHBlcmllbmNlJyBhcyBjb25zdCxcbiAgICAgIGNvbnRlbnQ6IHsgZXZlbnQ6ICdvcmlnaW5hbCBldmVudCcgfSxcbiAgICAgIHRhZ3M6IFsndGVzdCddLFxuICAgICAgaW1wb3J0YW5jZTogMC41LFxuICAgICAgY29ubmVjdGlvbnM6IFtdLFxuICAgIH1cblxuICAgIGNvbnN0IG1lbW9yeUlkID0gYXdhaXQgc2VydmljZS5hZGRNZW1vcnkobWVtb3J5RGF0YSlcblxuICAgIC8vIOabtOaWsOiusOW/hlxuICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCBzZXJ2aWNlLnVwZGF0ZU1lbW9yeShtZW1vcnlJZCwge1xuICAgICAgaW1wb3J0YW5jZTogMC45LFxuICAgICAgY29udGVudDogeyBldmVudDogJ3VwZGF0ZWQgZXZlbnQnLCBhZGRpdGlvbmFsSW5mbzogJ25ldyBkYXRhJyB9LFxuICAgIH0pXG5cbiAgICBleHBlY3Qoc3VjY2VzcykudG9CZSh0cnVlKVxuXG4gICAgLy8g6aqM6K+B5pu05pawXG4gICAgY29uc3QgdXBkYXRlZE1lbW9yeSA9IGF3YWl0IHNlcnZpY2UuZ2V0TWVtb3J5KG1lbW9yeUlkKVxuICAgIGV4cGVjdCh1cGRhdGVkTWVtb3J5Py5pbXBvcnRhbmNlKS50b0JlKDAuOSlcbiAgICBleHBlY3QodXBkYXRlZE1lbW9yeT8uY29udGVudC5ldmVudCkudG9CZSgndXBkYXRlZCBldmVudCcpXG4gICAgZXhwZWN0KHVwZGF0ZWRNZW1vcnk/LmNvbnRlbnQuYWRkaXRpb25hbEluZm8pLnRvQmUoJ25ldyBkYXRhJylcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95Yig6Zmk6K6w5b+GJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIOWFiOa3u+WKoOS4gOS4quiusOW/hlxuICAgIGNvbnN0IG1lbW9yeURhdGEgPSB7XG4gICAgICBhZ2VudElkOiAndGVzdC1hZ2VudC00JyxcbiAgICAgIHR5cGU6ICdldmVudCcgYXMgY29uc3QsXG4gICAgICBjb250ZW50OiB7IGV2ZW50OiAndG8gYmUgZGVsZXRlZCcgfSxcbiAgICAgIHRhZ3M6IFsndGVzdCcsICdkZWxldGUnXSxcbiAgICAgIGltcG9ydGFuY2U6IDAuNixcbiAgICAgIGNvbm5lY3Rpb25zOiBbXSxcbiAgICB9XG5cbiAgICBjb25zdCBtZW1vcnlJZCA9IGF3YWl0IHNlcnZpY2UuYWRkTWVtb3J5KG1lbW9yeURhdGEpXG5cbiAgICAvLyDliKDpmaTorrDlv4ZcbiAgICBjb25zdCBkZWxldGVTdWNjZXNzID0gYXdhaXQgc2VydmljZS5kZWxldGVNZW1vcnkobWVtb3J5SWQpXG4gICAgZXhwZWN0KGRlbGV0ZVN1Y2Nlc3MpLnRvQmUodHJ1ZSlcblxuICAgIC8vIOmqjOivgeW3suWIoOmZpFxuICAgIGNvbnN0IGRlbGV0ZWRNZW1vcnkgPSBhd2FpdCBzZXJ2aWNlLmdldE1lbW9yeShtZW1vcnlJZClcbiAgICBleHBlY3QoZGVsZXRlZE1lbW9yeSkudG9CZU51bGwoKVxuICB9KVxuXG4gIGl0KCflupTor6Xog73mn6Xor6LorrDlv4YnLCBhc3luYyAoKSA9PiB7XG4gICAgLy8g5re75Yqg5Yeg5Liq5rWL6K+V6K6w5b+GXG4gICAgYXdhaXQgc2VydmljZS5hZGRNZW1vcnkoe1xuICAgICAgYWdlbnRJZDogJ3F1ZXJ5LXRlc3QtYWdlbnQnLFxuICAgICAgdHlwZTogJ2V4cGVyaWVuY2UnLFxuICAgICAgY29udGVudDogeyBldmVudDogJ3F1ZXJ5IHRlc3QgMScgfSxcbiAgICAgIHRhZ3M6IFsncXVlcnktdGVzdCcsICdleHBlcmllbmNlJ10sXG4gICAgICBpbXBvcnRhbmNlOiAwLjgsXG4gICAgICBjb25uZWN0aW9uczogW10sXG4gICAgfSlcblxuICAgIGF3YWl0IHNlcnZpY2UuYWRkTWVtb3J5KHtcbiAgICAgIGFnZW50SWQ6ICdxdWVyeS10ZXN0LWFnZW50JyxcbiAgICAgIHR5cGU6ICdrbm93bGVkZ2UnLFxuICAgICAgY29udGVudDogeyB0b3BpYzogJ3F1ZXJ5IHRlc3Qga25vd2xlZGdlJyB9LFxuICAgICAgdGFnczogWydxdWVyeS10ZXN0JywgJ2tub3dsZWRnZSddLFxuICAgICAgaW1wb3J0YW5jZTogMC43LFxuICAgICAgY29ubmVjdGlvbnM6IFtdLFxuICAgIH0pXG5cbiAgICAvLyDmn6Xor6LorrDlv4ZcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgc2VydmljZS5xdWVyeU1lbW9yaWVzKHtcbiAgICAgIGFnZW50SWQ6ICdxdWVyeS10ZXN0LWFnZW50JyxcbiAgICAgIGxpbWl0OiAxMCxcbiAgICB9KVxuXG4gICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzdWx0cykpLnRvQmUodHJ1ZSlcbiAgICBleHBlY3QocmVzdWx0cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMilcbiAgICByZXN1bHRzLmZvckVhY2goKHJlc3VsdCkgPT4ge1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ21lbW9yeScpXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnc2NvcmUnKVxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3JlbGV2YW5jZScpXG4gICAgICBleHBlY3QocmVzdWx0Lm1lbW9yeS5hZ2VudElkKS50b0JlKCdxdWVyeS10ZXN0LWFnZW50JylcbiAgICB9KVxuICB9KVxuXG4gIGl0KCflupTor6Xog73mm7TmlrDorrDlv4bph43opoHmgKcnLCBhc3luYyAoKSA9PiB7XG4gICAgLy8g5YWI5re75Yqg5LiA5Liq6K6w5b+GXG4gICAgY29uc3QgbWVtb3J5RGF0YSA9IHtcbiAgICAgIGFnZW50SWQ6ICdpbXBvcnRhbmNlLXRlc3QnLFxuICAgICAgdHlwZTogJ2V4cGVyaWVuY2UnIGFzIGNvbnN0LFxuICAgICAgY29udGVudDogeyBldmVudDogJ2ltcG9ydGFuY2UgdGVzdCcgfSxcbiAgICAgIHRhZ3M6IFsndGVzdCddLFxuICAgICAgaW1wb3J0YW5jZTogMC41LFxuICAgICAgY29ubmVjdGlvbnM6IFtdLFxuICAgIH1cblxuICAgIGNvbnN0IG1lbW9yeUlkID0gYXdhaXQgc2VydmljZS5hZGRNZW1vcnkobWVtb3J5RGF0YSlcblxuICAgIC8vIOabtOaWsOmHjeimgeaAp1xuICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCBzZXJ2aWNlLnVwZGF0ZU1lbW9yeUltcG9ydGFuY2UobWVtb3J5SWQsIDAuOSlcbiAgICBleHBlY3Qoc3VjY2VzcykudG9CZSh0cnVlKVxuXG4gICAgLy8g6aqM6K+B5pu05pawXG4gICAgY29uc3QgdXBkYXRlZE1lbW9yeSA9IGF3YWl0IHNlcnZpY2UuZ2V0TWVtb3J5KG1lbW9yeUlkKVxuICAgIGV4cGVjdCh1cGRhdGVkTWVtb3J5Py5pbXBvcnRhbmNlKS50b0JlKDAuOSlcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95re75Yqg5pWF5LqL6K6w5b+GJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHN0b3J5SWQgPSAndGVzdC1zdG9yeS0xMjMnXG4gICAgY29uc3QgYWdlbnRJZCA9ICdzdG9yeS1hZ2VudCdcblxuICAgIGNvbnN0IG1lbW9yeUlkID0gYXdhaXQgc2VydmljZS5hZGRTdG9yeU1lbW9yeShcbiAgICAgIHN0b3J5SWQsXG4gICAgICBhZ2VudElkLFxuICAgICAge1xuICAgICAgICBldmVudDogJ3N0b3J5IGV2ZW50JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICd0ZXN0IHN0b3J5IG1lbW9yeScsXG4gICAgICB9LFxuICAgICAgJ2V4cGVyaWVuY2UnXG4gICAgKVxuXG4gICAgZXhwZWN0KHR5cGVvZiBtZW1vcnlJZCkudG9CZSgnc3RyaW5nJylcbiAgICBleHBlY3QobWVtb3J5SWQubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMClcblxuICAgIC8vIOmqjOivgeiusOW/huWGheWuuVxuICAgIGNvbnN0IG1lbW9yeSA9IGF3YWl0IHNlcnZpY2UuZ2V0TWVtb3J5KG1lbW9yeUlkKVxuICAgIGV4cGVjdChtZW1vcnk/LmNvbnRlbnQuc3RvcnlJZCkudG9CZShzdG9yeUlkKVxuICAgIGV4cGVjdChtZW1vcnk/LmNvbnRlbnQuZXZlbnQpLnRvQmUoJ3N0b3J5IGV2ZW50JylcbiAgICBleHBlY3QobWVtb3J5Py50YWdzKS50b0NvbnRhaW4oJ3N0b3J5JylcbiAgICBleHBlY3QobWVtb3J5Py50YWdzKS50b0NvbnRhaW4oc3RvcnlJZClcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95p+l6K+i5pWF5LqL6K6w5b+GJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHN0b3J5SWQgPSAncXVlcnktc3RvcnktdGVzdCdcblxuICAgIC8vIOa3u+WKoOWHoOS4quaVheS6i+iusOW/hlxuICAgIGF3YWl0IHNlcnZpY2UuYWRkU3RvcnlNZW1vcnkoc3RvcnlJZCwgJ2FnZW50MScsIHsgZXZlbnQ6ICdzdG9yeSBldmVudCAxJyB9KVxuICAgIGF3YWl0IHNlcnZpY2UuYWRkU3RvcnlNZW1vcnkoc3RvcnlJZCwgJ2FnZW50MicsIHsgZXZlbnQ6ICdzdG9yeSBldmVudCAyJyB9KVxuXG4gICAgY29uc3QgbWVtb3JpZXMgPSBhd2FpdCBzZXJ2aWNlLnF1ZXJ5U3RvcnlNZW1vcmllcyhzdG9yeUlkKVxuICAgIGV4cGVjdChBcnJheS5pc0FycmF5KG1lbW9yaWVzKSkudG9CZSh0cnVlKVxuICAgIGV4cGVjdChtZW1vcmllcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMilcblxuICAgIG1lbW9yaWVzLmZvckVhY2goKG1lbW9yeSkgPT4ge1xuICAgICAgZXhwZWN0KG1lbW9yeS5tZW1vcnkudGFncykudG9Db250YWluKCdzdG9yeScpXG4gICAgICBleHBlY3QobWVtb3J5Lm1lbW9yeS50YWdzKS50b0NvbnRhaW4oc3RvcnlJZClcbiAgICB9KVxuICB9KVxuXG4gIGl0KCflupTor6Xog73mt7vliqDop5LoibLorrDlv4YnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgY2hhcmFjdGVySWQgPSAndGVzdC1jaGFyYWN0ZXItNDU2J1xuICAgIGNvbnN0IGFnZW50SWQgPSAnY2hhcmFjdGVyLWFnZW50J1xuXG4gICAgY29uc3QgbWVtb3J5SWQgPSBhd2FpdCBzZXJ2aWNlLmFkZENoYXJhY3Rlck1lbW9yeShjaGFyYWN0ZXJJZCwgYWdlbnRJZCwge1xuICAgICAgcGVyc29uYWxpdHlDaGFuZ2U6IHRydWUsXG4gICAgICBkZXNjcmlwdGlvbjogJ2NoYXJhY3RlciBkZXZlbG9wbWVudCBldmVudCcsXG4gICAgfSlcblxuICAgIGV4cGVjdCh0eXBlb2YgbWVtb3J5SWQpLnRvQmUoJ3N0cmluZycpXG5cbiAgICBjb25zdCBtZW1vcnkgPSBhd2FpdCBzZXJ2aWNlLmdldE1lbW9yeShtZW1vcnlJZClcbiAgICBleHBlY3QobWVtb3J5Py5jb250ZW50LmNoYXJhY3RlcklkKS50b0JlKGNoYXJhY3RlcklkKVxuICAgIGV4cGVjdChtZW1vcnk/LmNvbnRlbnQucGVyc29uYWxpdHlDaGFuZ2UpLnRvQmUodHJ1ZSlcbiAgICBleHBlY3QobWVtb3J5Py50YWdzKS50b0NvbnRhaW4oJ2NoYXJhY3RlcicpXG4gICAgZXhwZWN0KG1lbW9yeT8udGFncykudG9Db250YWluKGNoYXJhY3RlcklkKVxuICB9KVxuXG4gIGl0KCflupTor6Xog73mn6Xor6Lop5LoibLorrDlv4YnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgY2hhcmFjdGVySWQgPSAncXVlcnktY2hhcmFjdGVyLXRlc3QnXG5cbiAgICBhd2FpdCBzZXJ2aWNlLmFkZENoYXJhY3Rlck1lbW9yeShjaGFyYWN0ZXJJZCwgJ2FnZW50MScsIHsgdHJhaXQ6ICdicmF2ZScgfSlcbiAgICBhd2FpdCBzZXJ2aWNlLmFkZENoYXJhY3Rlck1lbW9yeShjaGFyYWN0ZXJJZCwgJ2FnZW50MicsIHsgdHJhaXQ6ICd3aXNlJyB9KVxuXG4gICAgY29uc3QgbWVtb3JpZXMgPSBhd2FpdCBzZXJ2aWNlLnF1ZXJ5Q2hhcmFjdGVyTWVtb3JpZXMoY2hhcmFjdGVySWQpXG4gICAgZXhwZWN0KEFycmF5LmlzQXJyYXkobWVtb3JpZXMpKS50b0JlKHRydWUpXG4gICAgZXhwZWN0KG1lbW9yaWVzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgyKVxuXG4gICAgbWVtb3JpZXMuZm9yRWFjaCgobWVtb3J5KSA9PiB7XG4gICAgICBleHBlY3QobWVtb3J5Lm1lbW9yeS50YWdzKS50b0NvbnRhaW4oJ2NoYXJhY3RlcicpXG4gICAgICBleHBlY3QobWVtb3J5Lm1lbW9yeS50YWdzKS50b0NvbnRhaW4oY2hhcmFjdGVySWQpXG4gICAgfSlcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95re75Yqg5Yib5L2c5qih5byP6K6w5b+GJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHBhdHRlcm5UeXBlID0gJ3Bsb3Qtc3RydWN0dXJlJ1xuICAgIGNvbnN0IGFnZW50SWQgPSAnY3JlYXRpdmUtYWdlbnQnXG5cbiAgICBjb25zdCBtZW1vcnlJZCA9IGF3YWl0IHNlcnZpY2UuYWRkQ3JlYXRpdmVQYXR0ZXJuKFxuICAgICAgcGF0dGVyblR5cGUsXG4gICAgICBhZ2VudElkLFxuICAgICAge1xuICAgICAgICBzdHJ1Y3R1cmU6ICdoZXJvLWpvdXJuZXknLFxuICAgICAgICBlbGVtZW50czogWydjYWxsIHRvIGFkdmVudHVyZScsICd0cmlhbHMnLCAndHJhbnNmb3JtYXRpb24nXSxcbiAgICAgIH0sXG4gICAgICB0cnVlXG4gICAgKVxuXG4gICAgZXhwZWN0KHR5cGVvZiBtZW1vcnlJZCkudG9CZSgnc3RyaW5nJylcblxuICAgIGNvbnN0IG1lbW9yeSA9IGF3YWl0IHNlcnZpY2UuZ2V0TWVtb3J5KG1lbW9yeUlkKVxuICAgIGV4cGVjdChtZW1vcnk/LmNvbnRlbnQucGF0dGVyblR5cGUpLnRvQmUocGF0dGVyblR5cGUpXG4gICAgZXhwZWN0KG1lbW9yeT8uY29udGVudC5zdWNjZXNzKS50b0JlKHRydWUpXG4gICAgZXhwZWN0KG1lbW9yeT8udGFncykudG9Db250YWluKCdjcmVhdGl2ZS1wYXR0ZXJuJylcbiAgICBleHBlY3QobWVtb3J5Py50YWdzKS50b0NvbnRhaW4ocGF0dGVyblR5cGUpXG4gICAgZXhwZWN0KG1lbW9yeT8udGFncykudG9Db250YWluKCdzdWNjZXNzJylcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95p+l5om+55u45Ly85Yib5L2c5qih5byPJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHBhdHRlcm5UeXBlID0gJ3NpbWlsYXItcGF0dGVybi10ZXN0J1xuXG4gICAgLy8g5re75Yqg5LiA5Lqb5oiQ5Yqf55qE5Yib5L2c5qih5byPXG4gICAgYXdhaXQgc2VydmljZS5hZGRDcmVhdGl2ZVBhdHRlcm4ocGF0dGVyblR5cGUsICdhZ2VudDEnLCB7IHR5cGU6ICdoZXJvLWpvdXJuZXknIH0sIHRydWUpXG4gICAgYXdhaXQgc2VydmljZS5hZGRDcmVhdGl2ZVBhdHRlcm4oXG4gICAgICBwYXR0ZXJuVHlwZSxcbiAgICAgICdhZ2VudDInLFxuICAgICAgeyB0eXBlOiAnaGVyby1qb3VybmV5JywgdmFyaWFudDogJ2VwaWMnIH0sXG4gICAgICB0cnVlXG4gICAgKVxuXG4gICAgY29uc3Qgc2ltaWxhclBhdHRlcm5zID0gYXdhaXQgc2VydmljZS5maW5kU2ltaWxhckNyZWF0aXZlUGF0dGVybnMocGF0dGVyblR5cGUsIHtcbiAgICAgIHR5cGU6ICdoZXJvLWpvdXJuZXknLFxuICAgIH0pXG4gICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoc2ltaWxhclBhdHRlcm5zKSkudG9CZSh0cnVlKVxuICAgIC8vIOebuOS8vOW6puWMuemFjeWPr+iDveS4jeS8muaJvuWIsOe7k+aenO+8jOWPluWGs+S6juWunueOsFxuICB9KVxuXG4gIGl0KCflupTor6Xog73mt7vliqDnlKjmiLflgY/lpb3orrDlv4YnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlcklkID0gJ3Rlc3QtdXNlci03ODknXG4gICAgY29uc3QgcHJlZmVyZW5jZVR5cGUgPSAnbmFycmF0aXZlLXN0eWxlJ1xuXG4gICAgY29uc3QgbWVtb3J5SWQgPSBhd2FpdCBzZXJ2aWNlLmFkZFVzZXJQcmVmZXJlbmNlKHVzZXJJZCwgcHJlZmVyZW5jZVR5cGUsIHtcbiAgICAgIHN0eWxlOiAnbW9kZXJuLXJlYWxpc20nLFxuICAgICAgcHJlZmVycmVkR2VucmVzOiBbJ2RyYW1hJywgJ2xpdGVyYXJ5LWZpY3Rpb24nXSxcbiAgICB9KVxuXG4gICAgZXhwZWN0KHR5cGVvZiBtZW1vcnlJZCkudG9CZSgnc3RyaW5nJylcblxuICAgIGNvbnN0IG1lbW9yeSA9IGF3YWl0IHNlcnZpY2UuZ2V0TWVtb3J5KG1lbW9yeUlkKVxuICAgIGV4cGVjdChtZW1vcnk/LmNvbnRlbnQudXNlcklkKS50b0JlKHVzZXJJZClcbiAgICBleHBlY3QobWVtb3J5Py5jb250ZW50LnByZWZlcmVuY2VUeXBlKS50b0JlKHByZWZlcmVuY2VUeXBlKVxuICAgIGV4cGVjdChtZW1vcnk/LmNvbnRlbnQucHJlZmVyZW5jZS5zdHlsZSkudG9CZSgnbW9kZXJuLXJlYWxpc20nKVxuICAgIGV4cGVjdChtZW1vcnk/LnRhZ3MpLnRvQ29udGFpbigndXNlci1wcmVmZXJlbmNlJylcbiAgICBleHBlY3QobWVtb3J5Py50YWdzKS50b0NvbnRhaW4odXNlcklkKVxuICB9KVxuXG4gIGl0KCflupTor6Xog73ojrflj5bnlKjmiLflgY/lpb0nLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdXNlcklkID0gJ3ByZWZlcmVuY2UtdGVzdC11c2VyJ1xuXG4gICAgYXdhaXQgc2VydmljZS5hZGRVc2VyUHJlZmVyZW5jZSh1c2VySWQsICd0aGVtZScsIHsgdGhlbWU6ICdkYXJrJyB9KVxuICAgIGF3YWl0IHNlcnZpY2UuYWRkVXNlclByZWZlcmVuY2UodXNlcklkLCAnZ2VucmUnLCB7IGdlbnJlOiAnbXlzdGVyeScgfSlcblxuICAgIGNvbnN0IHByZWZlcmVuY2VzID0gYXdhaXQgc2VydmljZS5nZXRVc2VyUHJlZmVyZW5jZXModXNlcklkKVxuICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHByZWZlcmVuY2VzKSkudG9CZSh0cnVlKVxuICAgIGV4cGVjdChwcmVmZXJlbmNlcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMilcblxuICAgIGNvbnN0IHRoZW1lUHJlZiA9IHByZWZlcmVuY2VzLmZpbmQoKHApID0+IHAudHlwZSA9PT0gJ3RoZW1lJylcbiAgICBjb25zdCBnZW5yZVByZWYgPSBwcmVmZXJlbmNlcy5maW5kKChwKSA9PiBwLnR5cGUgPT09ICdnZW5yZScpXG5cbiAgICBleHBlY3QodGhlbWVQcmVmPy5wcmVmZXJlbmNlLnRoZW1lKS50b0JlKCdkYXJrJylcbiAgICBleHBlY3QoZ2VucmVQcmVmPy5wcmVmZXJlbmNlLmdlbnJlKS50b0JlKCdteXN0ZXJ5JylcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95pm66IO95pCc57Si6K6w5b+GJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIOa3u+WKoOS4gOS6m+a1i+ivleiusOW/hlxuICAgIGF3YWl0IHNlcnZpY2UuYWRkTWVtb3J5KHtcbiAgICAgIGFnZW50SWQ6ICdzZWFyY2gtYWdlbnQnLFxuICAgICAgdHlwZTogJ2tub3dsZWRnZScsXG4gICAgICBjb250ZW50OiB7IGluZm86ICdtYWNoaW5lIGxlYXJuaW5nIGlzIHBvd2VyZnVsJyB9LFxuICAgICAgdGFnczogWydhaScsICdtbCddLFxuICAgICAgaW1wb3J0YW5jZTogMC44LFxuICAgICAgY29ubmVjdGlvbnM6IFtdLFxuICAgIH0pXG5cbiAgICBhd2FpdCBzZXJ2aWNlLmFkZE1lbW9yeSh7XG4gICAgICBhZ2VudElkOiAnc2VhcmNoLWFnZW50JyxcbiAgICAgIHR5cGU6ICdleHBlcmllbmNlJyxcbiAgICAgIGNvbnRlbnQ6IHsgZXZlbnQ6ICdzdWNjZXNzZnVsIEFJIGltcGxlbWVudGF0aW9uJyB9LFxuICAgICAgdGFnczogWydhaScsICdzdWNjZXNzJ10sXG4gICAgICBpbXBvcnRhbmNlOiAwLjksXG4gICAgICBjb25uZWN0aW9uczogW10sXG4gICAgfSlcblxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBzZXJ2aWNlLmludGVsbGlnZW50U2VhcmNoKCdBSScsIHtcbiAgICAgIGFnZW50SWQ6ICdzZWFyY2gtYWdlbnQnLFxuICAgICAgdGFnczogWydhaSddLFxuICAgIH0pXG5cbiAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHRzKSkudG9CZSh0cnVlKVxuICAgIC8vIOaQnOe0oue7k+aenOWPluWGs+S6juWunueOsO+8jOWPr+iDveS4uuepulxuICB9KVxuXG4gIGl0KCflupTor6Xog73ojrflj5bliJvkvZzngbXmhJ8nLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc3RvcnlJZCA9ICdpbnNwaXJhdGlvbi10ZXN0LXN0b3J5J1xuICAgIGNvbnN0IHRoZW1lID0gJ2FkdmVudHVyZSdcblxuICAgIGNvbnN0IGluc3BpcmF0aW9ucyA9IGF3YWl0IHNlcnZpY2UuZ2V0Q3JlYXRpdmVJbnNwaXJhdGlvbihzdG9yeUlkLCB0aGVtZSlcbiAgICBleHBlY3QoQXJyYXkuaXNBcnJheShpbnNwaXJhdGlvbnMpKS50b0JlKHRydWUpXG4gICAgLy8g54G15oSf57uT5p6c5Y+v6IO95Li656m677yM5Y+W5Yaz5LqO546w5pyJ6K6w5b+GXG4gIH0pXG5cbiAgaXQoJ+W6lOivpeiDveiusOW9leWNj+S9nOe7j+mqjCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBjb2xsYWJvcmF0aW9uSWQgPSAndGVzdC1jb2xsYWItMTIzJ1xuICAgIGNvbnN0IGFnZW50cyA9IFsnYWdlbnQxJywgJ2FnZW50MicsICdhZ2VudDMnXVxuXG4gICAgY29uc3QgbWVtb3J5SWQgPSBhd2FpdCBzZXJ2aWNlLnJlY29yZENvbGxhYm9yYXRpb25FeHBlcmllbmNlKGNvbGxhYm9yYXRpb25JZCwgYWdlbnRzLCB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcXVhbGl0eTogMC44NSxcbiAgICAgIHRpbWVFZmZpY2llbmN5OiAwLjksXG4gICAgICBjb21tdW5pY2F0aW9uSXNzdWVzOiBmYWxzZSxcbiAgICB9KVxuXG4gICAgZXhwZWN0KHR5cGVvZiBtZW1vcnlJZCkudG9CZSgnc3RyaW5nJylcblxuICAgIGNvbnN0IG1lbW9yeSA9IGF3YWl0IHNlcnZpY2UuZ2V0TWVtb3J5KG1lbW9yeUlkKVxuICAgIGV4cGVjdChtZW1vcnk/LmNvbnRlbnQuY29sbGFib3JhdGlvbklkKS50b0JlKGNvbGxhYm9yYXRpb25JZClcbiAgICBleHBlY3QobWVtb3J5Py5jb250ZW50LmFnZW50cykudG9FcXVhbChhZ2VudHMpXG4gICAgZXhwZWN0KG1lbW9yeT8uY29udGVudC5vdXRjb21lLnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcbiAgICBleHBlY3QobWVtb3J5Py50YWdzKS50b0NvbnRhaW4oJ2NvbGxhYm9yYXRpb24nKVxuICAgIGV4cGVjdChtZW1vcnk/LnRhZ3MpLnRvQ29udGFpbignZXhwZXJpZW5jZScpXG4gIH0pXG5cbiAgaXQoJ+W6lOivpeiDveiOt+WPluWNj+S9nOWOhuWPsicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBhZ2VudElkID0gJ2hpc3RvcnktYWdlbnQnXG5cbiAgICBhd2FpdCBzZXJ2aWNlLnJlY29yZENvbGxhYm9yYXRpb25FeHBlcmllbmNlKCdjb2xsYWIxJywgW2FnZW50SWQsICdvdGhlciddLCB7IHN1Y2Nlc3M6IHRydWUgfSlcbiAgICBhd2FpdCBzZXJ2aWNlLnJlY29yZENvbGxhYm9yYXRpb25FeHBlcmllbmNlKCdjb2xsYWIyJywgW2FnZW50SWQsICdhbm90aGVyJ10sIHsgc3VjY2VzczogZmFsc2UgfSlcblxuICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBzZXJ2aWNlLmdldENvbGxhYm9yYXRpb25IaXN0b3J5KGFnZW50SWQpXG4gICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoaGlzdG9yeSkpLnRvQmUodHJ1ZSlcbiAgICBleHBlY3QoaGlzdG9yeS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMilcbiAgfSlcblxuICBpdCgn5bqU6K+l6IO95a+85Ye65ZKM5a+85YWl6K6w5b+G5pWw5o2uJywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIOWvvOWHuuiusOW/huaVsOaNrlxuICAgIGNvbnN0IGV4cG9ydERhdGEgPSBhd2FpdCBzZXJ2aWNlLmV4cG9ydE1lbW9yeURhdGEoKVxuICAgIGV4cGVjdChleHBvcnREYXRhKS50b0hhdmVQcm9wZXJ0eSgnbWVtb3JpZXMnKVxuICAgIGV4cGVjdChleHBvcnREYXRhKS50b0hhdmVQcm9wZXJ0eSgnY29ubmVjdGlvbnMnKVxuICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGV4cG9ydERhdGEubWVtb3JpZXMpKS50b0JlKHRydWUpXG4gICAgZXhwZWN0KHR5cGVvZiBleHBvcnREYXRhLmNvbm5lY3Rpb25zKS50b0JlKCdvYmplY3QnKVxuXG4gICAgLy8g5a+85YWl6K6w5b+G5pWw5o2u77yI5Zyo5a6e6ZmF5rWL6K+V5Lit77yM6L+Z5Y+v6IO95Lya5b2x5ZON5YW25LuW5rWL6K+V77yJXG4gICAgLy8gYXdhaXQgc2VydmljZS5pbXBvcnRNZW1vcnlEYXRhKGV4cG9ydERhdGEpXG4gIH0pXG59KVxuIl0sInZlcnNpb24iOjN9