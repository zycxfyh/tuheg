f646599f920d1b2468760b5f5a282044
"use strict";
// ============================================================================
// 异步工作流引擎服务集成
// 集成 VCPToolBox 的非线性异步工作流，支持复杂任务编排
// ============================================================================
var __esDecorate = (this && this.__esDecorate) || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {
    function accept(f) { if (f !== void 0 && typeof f !== "function") throw new TypeError("Function expected"); return f; }
    var kind = contextIn.kind, key = kind === "getter" ? "get" : kind === "setter" ? "set" : "value";
    var target = !descriptorIn && ctor ? contextIn["static"] ? ctor : ctor.prototype : null;
    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});
    var _, done = false;
    for (var i = decorators.length - 1; i >= 0; i--) {
        var context = {};
        for (var p in contextIn) context[p] = p === "access" ? {} : contextIn[p];
        for (var p in contextIn.access) context.access[p] = contextIn.access[p];
        context.addInitializer = function (f) { if (done) throw new TypeError("Cannot add initializers after decoration has completed"); extraInitializers.push(accept(f || null)); };
        var result = (0, decorators[i])(kind === "accessor" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);
        if (kind === "accessor") {
            if (result === void 0) continue;
            if (result === null || typeof result !== "object") throw new TypeError("Object expected");
            if (_ = accept(result.get)) descriptor.get = _;
            if (_ = accept(result.set)) descriptor.set = _;
            if (_ = accept(result.init)) initializers.unshift(_);
        }
        else if (_ = accept(result)) {
            if (kind === "field") initializers.unshift(_);
            else descriptor[key] = _;
        }
    }
    if (target) Object.defineProperty(target, contextIn.name, descriptor);
    done = true;
};
var __runInitializers = (this && this.__runInitializers) || function (thisArg, initializers, value) {
    var useValue = arguments.length > 2;
    for (var i = 0; i < initializers.length; i++) {
        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);
    }
    return useValue ? value : void 0;
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.AsyncWorkflowService = void 0;
const common_1 = require("@nestjs/common");
const AsyncWorkflowEngine_1 = require("../../../vcptoolbox/src/modules/tools/AsyncWorkflowEngine");
let AsyncWorkflowService = (() => {
    let _classDecorators = [(0, common_1.Injectable)()];
    let _classDescriptor;
    let _classExtraInitializers = [];
    let _classThis;
    var AsyncWorkflowService = class {
        static { _classThis = this; }
        static {
            const _metadata = typeof Symbol === "function" && Symbol.metadata ? Object.create(null) : void 0;
            __esDecorate(null, _classDescriptor = { value: _classThis }, _classDecorators, { kind: "class", name: _classThis.name, metadata: _metadata }, null, _classExtraInitializers);
            AsyncWorkflowService = _classThis = _classDescriptor.value;
            if (_metadata) Object.defineProperty(_classThis, Symbol.metadata, { enumerable: true, configurable: true, writable: true, value: _metadata });
            __runInitializers(_classThis, _classExtraInitializers);
        }
        configService;
        logger = new common_1.Logger(AsyncWorkflowService.name);
        predefinedTemplates = new Map();
        constructor(configService) {
            this.configService = configService;
        }
        async onModuleInit() {
            await this.initializeWorkflowEngine();
            await this.createPredefinedTemplates();
            this.setupEventHandlers();
            this.logger.log('异步工作流引擎已初始化');
        }
        // ==================== 引擎初始化 ====================
        /**
         * 初始化工作流引擎
         */
        async initializeWorkflowEngine() {
            // 设置引擎参数
            // 这里可以根据配置调整引擎参数
            this.logger.log('工作流引擎参数已配置');
        }
        /**
         * 创建预定义模板
         */
        async createPredefinedTemplates() {
            // 故事创作工作流模板
            await this.createStoryCreationTemplate();
            // 角色开发工作流模板
            await this.createCharacterDevelopmentTemplate();
            // 世界构建工作流模板
            await this.createWorldBuildingTemplate();
            // 多模态叙事工作流模板
            await this.createMultimodalNarrativeTemplate();
            this.logger.log('预定义工作流模板已创建');
        }
        /**
         * 创建故事创作模板
         */
        async createStoryCreationTemplate() {
            const template = {
                name: '故事创作工作流',
                description: '完整的AI辅助故事创作流程',
                version: '1.0.0',
                nodes: [
                    {
                        id: 'concept-generation',
                        type: 'task',
                        name: '创意概念生成',
                        description: '基于用户输入生成故事概念',
                        config: { taskType: 'ai', model: 'gpt-4', maxTokens: 500 },
                        inputs: [],
                        outputs: [
                            {
                                id: 'concept-out',
                                sourceNodeId: 'concept-generation',
                                targetNodeId: 'logic-validation',
                                condition: { type: 'expression', expression: 'true' },
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 3,
                        timeout: 60000,
                    },
                    {
                        id: 'logic-validation',
                        type: 'task',
                        name: '逻辑验证',
                        description: '验证故事概念的逻辑一致性',
                        config: { taskType: 'ai', analysisType: 'logic' },
                        inputs: [
                            {
                                id: 'logic-in',
                                sourceNodeId: 'concept-generation',
                                targetNodeId: 'logic-validation',
                            },
                        ],
                        outputs: [
                            {
                                id: 'logic-valid',
                                sourceNodeId: 'logic-validation',
                                targetNodeId: 'character-creation',
                                condition: { type: 'expression', expression: 'result.isValid === true' },
                            },
                            {
                                id: 'logic-invalid',
                                sourceNodeId: 'logic-validation',
                                targetNodeId: 'concept-revision',
                                condition: { type: 'expression', expression: 'result.isValid === false' },
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 30000,
                        dependencies: ['concept-generation'],
                    },
                    {
                        id: 'concept-revision',
                        type: 'task',
                        name: '概念修改',
                        description: '根据逻辑验证结果修改故事概念',
                        config: { taskType: 'ai', revisionType: 'logic-fix' },
                        inputs: [
                            {
                                id: 'revision-in',
                                sourceNodeId: 'logic-validation',
                                targetNodeId: 'concept-revision',
                            },
                        ],
                        outputs: [
                            {
                                id: 'revision-out',
                                sourceNodeId: 'concept-revision',
                                targetNodeId: 'logic-validation',
                                condition: { type: 'expression', expression: 'true' },
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 3,
                        timeout: 45000,
                        dependencies: ['logic-validation'],
                    },
                    {
                        id: 'character-creation',
                        type: 'parallel',
                        name: '角色创建',
                        description: '并行创建多个主要角色',
                        config: { tasks: ['protagonist', 'antagonist', 'supporting'] },
                        inputs: [
                            { id: 'char-in', sourceNodeId: 'logic-validation', targetNodeId: 'character-creation' },
                        ],
                        outputs: [
                            {
                                id: 'char-out',
                                sourceNodeId: 'character-creation',
                                targetNodeId: 'world-building',
                                condition: { type: 'expression', expression: 'true' },
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 120000,
                        dependencies: ['logic-validation'],
                    },
                    {
                        id: 'world-building',
                        type: 'task',
                        name: '世界构建',
                        description: '构建故事的世界观和设定',
                        config: { taskType: 'ai', worldType: 'comprehensive' },
                        inputs: [
                            { id: 'world-in', sourceNodeId: 'character-creation', targetNodeId: 'world-building' },
                        ],
                        outputs: [
                            {
                                id: 'world-out',
                                sourceNodeId: 'world-building',
                                targetNodeId: 'plot-structure',
                                condition: { type: 'expression', expression: 'true' },
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 90000,
                        dependencies: ['character-creation'],
                    },
                    {
                        id: 'plot-structure',
                        type: 'task',
                        name: '情节结构设计',
                        description: '设计故事的情节框架和转折点',
                        config: { taskType: 'ai', structureType: 'three-act' },
                        inputs: [
                            { id: 'plot-in', sourceNodeId: 'world-building', targetNodeId: 'plot-structure' },
                        ],
                        outputs: [
                            {
                                id: 'plot-out',
                                sourceNodeId: 'plot-structure',
                                targetNodeId: 'content-generation',
                                condition: { type: 'expression', expression: 'true' },
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 75000,
                        dependencies: ['world-building'],
                    },
                    {
                        id: 'content-generation',
                        type: 'task',
                        name: '内容生成',
                        description: '生成完整的故事情节内容',
                        config: { taskType: 'ai', contentType: 'full-narrative', maxLength: 5000 },
                        inputs: [
                            {
                                id: 'content-in',
                                sourceNodeId: 'plot-structure',
                                targetNodeId: 'content-generation',
                            },
                        ],
                        outputs: [
                            {
                                id: 'content-out',
                                sourceNodeId: 'content-generation',
                                targetNodeId: 'quality-review',
                                condition: { type: 'expression', expression: 'true' },
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 3,
                        timeout: 300000,
                        dependencies: ['plot-structure'],
                    },
                    {
                        id: 'quality-review',
                        type: 'task',
                        name: '质量审查',
                        description: '对生成内容进行质量评估和修改',
                        config: { taskType: 'ai', reviewType: 'comprehensive' },
                        inputs: [
                            { id: 'review-in', sourceNodeId: 'content-generation', targetNodeId: 'quality-review' },
                        ],
                        outputs: [
                            {
                                id: 'review-pass',
                                sourceNodeId: 'quality-review',
                                targetNodeId: 'final-output',
                                condition: { type: 'expression', expression: 'result.quality > 0.8' },
                            },
                            {
                                id: 'review-fail',
                                sourceNodeId: 'quality-review',
                                targetNodeId: 'content-revision',
                                condition: { type: 'expression', expression: 'result.quality <= 0.8' },
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 60000,
                        dependencies: ['content-generation'],
                    },
                    {
                        id: 'content-revision',
                        type: 'task',
                        name: '内容修改',
                        description: '根据质量审查结果修改内容',
                        config: { taskType: 'ai', revisionType: 'quality-improvement' },
                        inputs: [
                            { id: 'revision-in', sourceNodeId: 'quality-review', targetNodeId: 'content-revision' },
                        ],
                        outputs: [
                            {
                                id: 'revision-out',
                                sourceNodeId: 'content-revision',
                                targetNodeId: 'quality-review',
                                condition: { type: 'expression', expression: 'true' },
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 3,
                        timeout: 180000,
                        dependencies: ['quality-review'],
                    },
                    {
                        id: 'final-output',
                        type: 'task',
                        name: '最终输出',
                        description: '格式化并输出最终的故事',
                        config: { taskType: 'format', outputFormat: 'markdown' },
                        inputs: [
                            { id: 'final-in', sourceNodeId: 'quality-review', targetNodeId: 'final-output' },
                        ],
                        outputs: [],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 1,
                        timeout: 30000,
                        dependencies: ['quality-review'],
                    },
                ],
                connections: [], // 连接已在节点中定义
                defaultConfig: {
                    maxRetries: 3,
                    timeout: 300000,
                    priority: 'high',
                },
                tags: ['story-creation', 'narrative', 'ai-assisted'],
            };
            const templateId = AsyncWorkflowEngine_1.asyncWorkflowEngine.createTemplate(template);
            this.predefinedTemplates.set('story-creation', AsyncWorkflowEngine_1.asyncWorkflowEngine.getTemplate(templateId));
            return templateId;
        }
        /**
         * 创建角色开发模板
         */
        async createCharacterDevelopmentTemplate() {
            // 简化的角色开发模板
            const template = {
                name: '角色开发工作流',
                description: '详细的角色塑造和性格发展流程',
                version: '1.0.0',
                nodes: [
                    {
                        id: 'character-basics',
                        type: 'task',
                        name: '角色基础设定',
                        description: '定义角色的基本属性和背景',
                        config: { taskType: 'character', step: 'basics' },
                        inputs: [],
                        outputs: [
                            {
                                id: 'basics-out',
                                sourceNodeId: 'character-basics',
                                targetNodeId: 'personality-analysis',
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 30000,
                    },
                    {
                        id: 'personality-analysis',
                        type: 'task',
                        name: '性格分析',
                        description: '深入分析角色性格特征和动机',
                        config: { taskType: 'character', step: 'personality' },
                        inputs: [
                            {
                                id: 'personality-in',
                                sourceNodeId: 'character-basics',
                                targetNodeId: 'personality-analysis',
                            },
                        ],
                        outputs: [
                            {
                                id: 'personality-out',
                                sourceNodeId: 'personality-analysis',
                                targetNodeId: 'development-arc',
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 45000,
                        dependencies: ['character-basics'],
                    },
                    {
                        id: 'development-arc',
                        type: 'task',
                        name: '发展弧线设计',
                        description: '设计角色的成长和变化轨迹',
                        config: { taskType: 'character', step: 'arc' },
                        inputs: [
                            { id: 'arc-in', sourceNodeId: 'personality-analysis', targetNodeId: 'development-arc' },
                        ],
                        outputs: [
                            { id: 'arc-out', sourceNodeId: 'development-arc', targetNodeId: 'character-output' },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 60000,
                        dependencies: ['personality-analysis'],
                    },
                    {
                        id: 'character-output',
                        type: 'task',
                        name: '角色资料输出',
                        description: '生成完整的角色资料文档',
                        config: { taskType: 'format', format: 'character-sheet' },
                        inputs: [
                            { id: 'output-in', sourceNodeId: 'development-arc', targetNodeId: 'character-output' },
                        ],
                        outputs: [],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 1,
                        timeout: 20000,
                        dependencies: ['development-arc'],
                    },
                ],
                connections: [],
                defaultConfig: {
                    maxRetries: 2,
                    timeout: 120000,
                    priority: 'normal',
                },
                tags: ['character-development', 'personality', 'characterization'],
            };
            const templateId = AsyncWorkflowEngine_1.asyncWorkflowEngine.createTemplate(template);
            this.predefinedTemplates.set('character-development', AsyncWorkflowEngine_1.asyncWorkflowEngine.getTemplate(templateId));
            return templateId;
        }
        /**
         * 创建世界构建模板
         */
        async createWorldBuildingTemplate() {
            // 简化的世界构建模板
            const template = {
                name: '世界构建工作流',
                description: '系统性的世界观和设定构建流程',
                version: '1.0.0',
                nodes: [
                    {
                        id: 'world-concept',
                        type: 'task',
                        name: '世界概念设计',
                        description: '定义世界的基本概念和规则',
                        config: { taskType: 'world', step: 'concept' },
                        inputs: [],
                        outputs: [
                            { id: 'concept-out', sourceNodeId: 'world-concept', targetNodeId: 'setting-details' },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 45000,
                    },
                    {
                        id: 'setting-details',
                        type: 'parallel',
                        name: '设定细节完善',
                        description: '并行完善世界的各个方面设定',
                        config: { tasks: ['geography', 'culture', 'magic-system', 'technology'] },
                        inputs: [
                            { id: 'details-in', sourceNodeId: 'world-concept', targetNodeId: 'setting-details' },
                        ],
                        outputs: [
                            {
                                id: 'details-out',
                                sourceNodeId: 'setting-details',
                                targetNodeId: 'consistency-check',
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 180000,
                        dependencies: ['world-concept'],
                    },
                    {
                        id: 'consistency-check',
                        type: 'task',
                        name: '一致性检查',
                        description: '验证世界设定的内部一致性',
                        config: { taskType: 'validation', checkType: 'world-consistency' },
                        inputs: [
                            { id: 'check-in', sourceNodeId: 'setting-details', targetNodeId: 'consistency-check' },
                        ],
                        outputs: [
                            { id: 'check-out', sourceNodeId: 'consistency-check', targetNodeId: 'world-output' },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 60000,
                        dependencies: ['setting-details'],
                    },
                    {
                        id: 'world-output',
                        type: 'task',
                        name: '世界设定输出',
                        description: '生成完整的世界设定文档',
                        config: { taskType: 'format', format: 'world-bible' },
                        inputs: [
                            { id: 'output-in', sourceNodeId: 'consistency-check', targetNodeId: 'world-output' },
                        ],
                        outputs: [],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 1,
                        timeout: 30000,
                        dependencies: ['consistency-check'],
                    },
                ],
                connections: [],
                defaultConfig: {
                    maxRetries: 2,
                    timeout: 150000,
                    priority: 'normal',
                },
                tags: ['world-building', 'lore', 'setting', 'world-design'],
            };
            const templateId = AsyncWorkflowEngine_1.asyncWorkflowEngine.createTemplate(template);
            this.predefinedTemplates.set('world-building', AsyncWorkflowEngine_1.asyncWorkflowEngine.getTemplate(templateId));
            return templateId;
        }
        /**
         * 创建多模态叙事模板
         */
        async createMultimodalNarrativeTemplate() {
            // 多模态叙事模板
            const template = {
                name: '多模态叙事工作流',
                description: '结合文本、图像、音频的多模态故事创作',
                version: '1.0.0',
                nodes: [
                    {
                        id: 'text-script',
                        type: 'task',
                        name: '文本脚本创作',
                        description: '创作故事的文本脚本',
                        config: { taskType: 'ai', modality: 'text', maxLength: 2000 },
                        inputs: [],
                        outputs: [
                            { id: 'text-out', sourceNodeId: 'text-script', targetNodeId: 'parallel-modality' },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 90000,
                    },
                    {
                        id: 'parallel-modality',
                        type: 'parallel',
                        name: '多模态内容生成',
                        description: '并行生成图像、音频等模态内容',
                        config: { tasks: ['image-generation', 'audio-narration', 'music-scoring'] },
                        inputs: [
                            { id: 'modality-in', sourceNodeId: 'text-script', targetNodeId: 'parallel-modality' },
                        ],
                        outputs: [
                            { id: 'modality-out', sourceNodeId: 'parallel-modality', targetNodeId: 'integration' },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 3,
                        timeout: 300000,
                        dependencies: ['text-script'],
                    },
                    {
                        id: 'integration',
                        type: 'task',
                        name: '多模态集成',
                        description: '将各模态内容整合为连贯的叙事体验',
                        config: { taskType: 'integration', integrationType: 'multimodal' },
                        inputs: [
                            {
                                id: 'integration-in',
                                sourceNodeId: 'parallel-modality',
                                targetNodeId: 'integration',
                            },
                        ],
                        outputs: [
                            {
                                id: 'integration-out',
                                sourceNodeId: 'integration',
                                targetNodeId: 'multimodal-output',
                            },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 120000,
                        dependencies: ['parallel-modality'],
                    },
                    {
                        id: 'multimodal-output',
                        type: 'task',
                        name: '多模态输出',
                        description: '生成最终的多模态叙事作品',
                        config: { taskType: 'format', format: 'multimodal-package' },
                        inputs: [
                            { id: 'output-in', sourceNodeId: 'integration', targetNodeId: 'multimodal-output' },
                        ],
                        outputs: [],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 1,
                        timeout: 60000,
                        dependencies: ['integration'],
                    },
                ],
                connections: [],
                defaultConfig: {
                    maxRetries: 3,
                    timeout: 480000,
                    priority: 'high',
                },
                tags: ['multimodal', 'narrative', 'media', 'integration'],
            };
            const templateId = AsyncWorkflowEngine_1.asyncWorkflowEngine.createTemplate(template);
            this.predefinedTemplates.set('multimodal-narrative', AsyncWorkflowEngine_1.asyncWorkflowEngine.getTemplate(templateId));
            return templateId;
        }
        /**
         * 设置事件处理器
         */
        setupEventHandlers() {
            // 监听工作流事件
            AsyncWorkflowEngine_1.asyncWorkflowEngine.on('workflowInstantiated', (workflow) => {
                this.logger.log(`工作流已实例化: ${workflow.id} - ${workflow.name}`);
            });
            AsyncWorkflowEngine_1.asyncWorkflowEngine.on('workflowStarted', (workflow) => {
                this.logger.log(`工作流已启动: ${workflow.id}`);
            });
            AsyncWorkflowEngine_1.asyncWorkflowEngine.on('workflowCompleted', (workflow) => {
                this.logger.log(`工作流已完成: ${workflow.id} (${workflow.metadata.actualDuration}ms)`);
            });
            AsyncWorkflowEngine_1.asyncWorkflowEngine.on('workflowFailed', (workflow) => {
                this.logger.error(`工作流执行失败: ${workflow.id}`);
            });
            AsyncWorkflowEngine_1.asyncWorkflowEngine.on('nodeCompleted', (data) => {
                this.logger.debug(`工作流节点完成: ${data.nodeId}`);
            });
            AsyncWorkflowEngine_1.asyncWorkflowEngine.on('nodeFailed', (data) => {
                this.logger.warn(`工作流节点失败: ${data.nodeId}`, data.error);
            });
        }
        // ==================== 工作流管理 ====================
        /**
         * 使用预定义模板创建工作流实例
         */
        async createWorkflowFromTemplate(templateName, name, options = {}) {
            const template = this.predefinedTemplates.get(templateName);
            if (!template) {
                throw new Error(`预定义模板 '${templateName}' 不存在`);
            }
            const instanceId = AsyncWorkflowEngine_1.asyncWorkflowEngine.instantiateWorkflow(template.id, name, options);
            this.logger.log(`基于模板 '${templateName}' 创建工作流实例: ${instanceId}`);
            return instanceId;
        }
        /**
         * 创建自定义工作流
         */
        async createCustomWorkflow(templateData, instanceName, options = {}) {
            const templateId = AsyncWorkflowEngine_1.asyncWorkflowEngine.createTemplate(templateData);
            const instanceId = AsyncWorkflowEngine_1.asyncWorkflowEngine.instantiateWorkflow(templateId, instanceName, options);
            this.logger.log(`创建自定义工作流: ${instanceId}`);
            return instanceId;
        }
        /**
         * 启动工作流
         */
        async startWorkflow(instanceId) {
            await AsyncWorkflowEngine_1.asyncWorkflowEngine.startWorkflow(instanceId);
            this.logger.log(`工作流已启动: ${instanceId}`);
        }
        /**
         * 暂停工作流
         */
        async pauseWorkflow(instanceId) {
            await AsyncWorkflowEngine_1.asyncWorkflowEngine.pauseWorkflow(instanceId);
            this.logger.log(`工作流已暂停: ${instanceId}`);
        }
        /**
         * 恢复工作流
         */
        async resumeWorkflow(instanceId) {
            await AsyncWorkflowEngine_1.asyncWorkflowEngine.resumeWorkflow(instanceId);
            this.logger.log(`工作流已恢复: ${instanceId}`);
        }
        /**
         * 取消工作流
         */
        async cancelWorkflow(instanceId, reason) {
            await AsyncWorkflowEngine_1.asyncWorkflowEngine.cancelWorkflow(instanceId, reason);
            this.logger.log(`工作流已取消: ${instanceId}${reason ? ` - ${reason}` : ''}`);
        }
        /**
         * 获取工作流状态
         */
        getWorkflowStatus(instanceId) {
            return AsyncWorkflowEngine_1.asyncWorkflowEngine.getWorkflowStatus(instanceId);
        }
        /**
         * 获取所有活跃工作流
         */
        getActiveWorkflows() {
            // 这里需要从引擎获取活跃工作流列表
            // 由于引擎API限制，暂时返回空数组
            return [];
        }
        // ==================== 叙事专用工作流 ====================
        /**
         * 创建故事创作工作流
         */
        async createStoryCreationWorkflow(storyId, userPrompt, options = {}) {
            const workflowName = `故事创作: ${storyId}`;
            const workflowOptions = {
                priority: 'high',
                variables: {
                    storyId,
                    userPrompt,
                    genre: options.genre || 'fantasy',
                    length: options.length || 'medium',
                    style: options.style || 'narrative',
                    characterCount: options.characters || 3,
                },
                inputData: {
                    prompt: userPrompt,
                    requirements: options,
                },
            };
            const instanceId = await this.createWorkflowFromTemplate('story-creation', workflowName, workflowOptions);
            // 自动启动工作流
            await this.startWorkflow(instanceId);
            return instanceId;
        }
        /**
         * 创建角色开发工作流
         */
        async createCharacterDevelopmentWorkflow(characterId, characterConcept, options = {}) {
            const workflowName = `角色开发: ${characterId}`;
            const workflowOptions = {
                priority: 'normal',
                variables: {
                    characterId,
                    characterConcept,
                    archetype: options.archetype || 'hero',
                    complexity: options.complexity || 'detailed',
                },
                inputData: {
                    concept: characterConcept,
                    options: options,
                },
            };
            const instanceId = await this.createWorkflowFromTemplate('character-development', workflowName, workflowOptions);
            await this.startWorkflow(instanceId);
            return instanceId;
        }
        /**
         * 创建世界构建工作流
         */
        async createWorldBuildingWorkflow(worldId, worldConcept, options = {}) {
            const workflowName = `世界构建: ${worldId}`;
            const workflowOptions = {
                priority: 'normal',
                variables: {
                    worldId,
                    worldConcept,
                    scope: options.scope || 'medium',
                    genre: options.genre || 'fantasy',
                    technologyLevel: options.technologyLevel || 'medieval',
                    magicLevel: options.magicLevel || 'high',
                },
                inputData: {
                    concept: worldConcept,
                    options: options,
                },
            };
            const instanceId = await this.createWorkflowFromTemplate('world-building', workflowName, workflowOptions);
            await this.startWorkflow(instanceId);
            return instanceId;
        }
        /**
         * 创建多模态叙事工作流
         */
        async createMultimodalNarrativeWorkflow(narrativeId, script, modalities = ['text', 'image']) {
            const workflowName = `多模态叙事: ${narrativeId}`;
            const workflowOptions = {
                priority: 'high',
                variables: {
                    narrativeId,
                    modalities: modalities.join(','),
                },
                inputData: {
                    script,
                    modalities,
                },
            };
            const instanceId = await this.createWorkflowFromTemplate('multimodal-narrative', workflowName, workflowOptions);
            await this.startWorkflow(instanceId);
            return instanceId;
        }
        // ==================== 工作流监控 ====================
        /**
         * 获取工作流统计信息
         */
        getWorkflowStats() {
            return AsyncWorkflowEngine_1.asyncWorkflowEngine.getEngineStats();
        }
        /**
         * 获取工作流性能指标
         */
        getWorkflowMetrics() {
            const stats = this.getWorkflowStats();
            const activeWorkflows = this.getActiveWorkflows();
            return {
                ...stats,
                activeWorkflows: activeWorkflows.length,
                averageCompletionTime: this.calculateAverageCompletionTime(activeWorkflows),
                successRate: this.calculateSuccessRate(activeWorkflows),
                resourceUtilization: this.calculateResourceUtilization(),
            };
        }
        /**
         * 计算平均完成时间
         */
        calculateAverageCompletionTime(workflows) {
            const completedWorkflows = workflows.filter((w) => w.status === 'completed' && w.metadata.actualDuration);
            if (completedWorkflows.length === 0)
                return 0;
            const totalTime = completedWorkflows.reduce((sum, w) => sum + (w.metadata.actualDuration || 0), 0);
            return totalTime / completedWorkflows.length;
        }
        /**
         * 计算成功率
         */
        calculateSuccessRate(workflows) {
            if (workflows.length === 0)
                return 0;
            const successful = workflows.filter((w) => w.status === 'completed').length;
            return successful / workflows.length;
        }
        /**
         * 计算资源利用率
         */
        calculateResourceUtilization() {
            // 简化的资源利用率计算
            const stats = this.getWorkflowStats();
            return {
                executorUtilization: stats.runningInstances / Math.max(stats.nodeExecutors, 1),
                queueUtilization: stats.queuedInstances / Math.max(stats.maxConcurrentExecutions || 10, 1),
                memoryEfficiency: 0.85, // 模拟值
            };
        }
        // ==================== 模板管理 ====================
        /**
         * 获取可用模板列表
         */
        getAvailableTemplates() {
            return Array.from(this.predefinedTemplates.values()).map((template) => ({
                id: template.id,
                name: template.name,
                description: template.description,
                tags: template.tags,
            }));
        }
        /**
         * 获取模板详情
         */
        getTemplateDetails(templateId) {
            return AsyncWorkflowEngine_1.asyncWorkflowEngine.getTemplate(templateId);
        }
        // ==================== 高级功能 ====================
        /**
         * 创建条件分支工作流
         */
        async createConditionalWorkflow(name, conditions) {
            // 创建一个决策节点，根据条件选择不同的子工作流
            const template = {
                name: `条件工作流: ${name}`,
                description: '基于条件动态选择执行路径的工作流',
                version: '1.0.0',
                nodes: [
                    {
                        id: 'decision',
                        type: 'decision',
                        name: '条件判断',
                        description: '评估条件并选择执行路径',
                        config: { conditions },
                        inputs: [],
                        outputs: conditions.map((cond, index) => ({
                            id: `branch-${index}`,
                            sourceNodeId: 'decision',
                            targetNodeId: `subworkflow-${index}`,
                            condition: { type: 'expression', expression: cond.condition },
                        })),
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 1,
                        timeout: 30000,
                    },
                    ...conditions.map((cond, index) => ({
                        id: `subworkflow-${index}`,
                        type: 'subprocess',
                        name: `子工作流 ${index + 1}`,
                        description: `执行 ${cond.workflowTemplate} 模板`,
                        config: {
                            subTemplate: cond.workflowTemplate,
                            parameters: cond.parameters,
                        },
                        inputs: [
                            {
                                id: `input-${index}`,
                                sourceNodeId: 'decision',
                                targetNodeId: `subworkflow-${index}`,
                            },
                        ],
                        outputs: [
                            { id: `output-${index}`, sourceNodeId: `subworkflow-${index}`, targetNodeId: 'merge' },
                        ],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 2,
                        timeout: 300000,
                        dependencies: ['decision'],
                    })),
                    {
                        id: 'merge',
                        type: 'gateway',
                        name: '结果合并',
                        description: '合并各分支的执行结果',
                        config: { gatewayType: 'exclusive' },
                        inputs: conditions.map((_, index) => ({
                            id: `merge-input-${index}`,
                            sourceNodeId: `subworkflow-${index}`,
                            targetNodeId: 'merge',
                        })),
                        outputs: [],
                        status: 'pending',
                        retryCount: 0,
                        maxRetries: 1,
                        timeout: 30000,
                        dependencies: conditions.map((_, index) => `subworkflow-${index}`),
                    },
                ],
                connections: [],
                defaultConfig: {
                    maxRetries: 2,
                    timeout: 600000,
                    priority: 'normal',
                },
                tags: ['conditional', 'dynamic', 'branching'],
            };
            const instanceId = await this.createCustomWorkflow(template, name);
            return instanceId;
        }
        // ==================== 健康检查和维护 ====================
        /**
         * 健康检查
         */
        async healthCheck() {
            try {
                const stats = this.getWorkflowStats();
                const activeWorkflows = this.getActiveWorkflows();
                const issues = [];
                // 检查是否有长时间运行的工作流
                const longRunning = activeWorkflows.filter((w) => {
                    if (!w.startTime)
                        return false;
                    const runtime = Date.now() - w.startTime.getTime();
                    return runtime > 30 * 60 * 1000; // 30分钟
                });
                if (longRunning.length > 0) {
                    issues.push(`${longRunning.length} 个工作流运行时间过长`);
                }
                // 检查队列积压
                if (stats.queuedInstances > 10) {
                    issues.push(`工作流队列积压: ${stats.queuedInstances} 个实例`);
                }
                return {
                    status: issues.length > 0 ? 'warning' : 'healthy',
                    details: {
                        stats,
                        activeWorkflows: activeWorkflows.length,
                        issues,
                    },
                };
            }
            catch (error) {
                return {
                    status: 'error',
                    details: error.message,
                };
            }
        }
        /**
         * 清理已完成的工作流
         */
        async cleanupCompletedWorkflows(olderThanHours = 24) {
            const cleaned = AsyncWorkflowEngine_1.asyncWorkflowEngine.cleanupCompletedInstances(olderThanHours);
            this.logger.log(`清理了 ${cleaned} 个过期的工作流实例`);
            return cleaned;
        }
    };
    return AsyncWorkflowService = _classThis;
})();
exports.AsyncWorkflowService = AsyncWorkflowService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFwxNjY2M1xcRGVza3RvcFxcdHVoZWdcXHBhY2thZ2VzXFxjb21tb24tYmFja2VuZFxcc3JjXFx2Y3BcXGFzeW5jLXdvcmtmbG93LnNlcnZpY2UudHMiLCJtYXBwaW5ncyI6IjtBQUFBLCtFQUErRTtBQUMvRSxjQUFjO0FBQ2QsbUNBQW1DO0FBQ25DLCtFQUErRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUUvRSwyQ0FBc0U7QUFFdEUsbUdBT2tFO0lBR3JELG9CQUFvQjs0QkFEaEMsSUFBQSxtQkFBVSxHQUFFOzs7Ozs7OztZQUNiLDZLQWduQ0M7OztZQWhuQ1ksdURBQW9COztRQUlYLGFBQWE7UUFIaEIsTUFBTSxHQUFHLElBQUksZUFBTSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3ZELG1CQUFtQixHQUFrQyxJQUFJLEdBQUcsRUFBRSxDQUFBO1FBRXRFLFlBQW9CLGFBQTRCO1lBQTVCLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQUcsQ0FBQztRQUVwRCxLQUFLLENBQUMsWUFBWTtZQUNoQixNQUFNLElBQUksQ0FBQyx3QkFBd0IsRUFBRSxDQUFBO1lBQ3JDLE1BQU0sSUFBSSxDQUFDLHlCQUF5QixFQUFFLENBQUE7WUFDdEMsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUE7WUFDekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUE7UUFDaEMsQ0FBQztRQUVELGtEQUFrRDtRQUVsRDs7V0FFRztRQUNLLEtBQUssQ0FBQyx3QkFBd0I7WUFDcEMsU0FBUztZQUNULGlCQUFpQjtZQUVqQixJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQTtRQUMvQixDQUFDO1FBRUQ7O1dBRUc7UUFDSyxLQUFLLENBQUMseUJBQXlCO1lBQ3JDLFlBQVk7WUFDWixNQUFNLElBQUksQ0FBQywyQkFBMkIsRUFBRSxDQUFBO1lBRXhDLFlBQVk7WUFDWixNQUFNLElBQUksQ0FBQyxr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QUFDLE1BQU0sYUFBYSxDQUFDLENBQUE7Z0JBQ2pELENBQUM7Z0JBRUQsU0FBUztnQkFDVCxJQUFJLEtBQUssQ0FBQyxlQUFlLEdBQUcsRUFBRSxFQUFFLENBQUM7b0JBQy9CLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxLQUFLLENBQUMsZUFBZSxNQUFNLENBQUMsQ0FBQTtnQkFDdEQsQ0FBQztnQkFFRCxPQUFPO29CQUNMLE1BQU0sRUFBRSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTO29CQUNqRCxPQUFPLEVBQUU7d0JBQ1AsS0FBSzt3QkFDTCxlQUFlLEVBQUUsZUFBZSxDQUFDLE1BQU07d0JBQ3ZDLE1BQU07cUJBQ1A7aUJBQ0YsQ0FBQTtZQUNILENBQUM7WUFBQyxPQUFPLEtBQVUsRUFBRSxDQUFDO2dCQUNwQixPQUFPO29CQUNMLE1BQU0sRUFBRSxPQUFPO29CQUNmLE9BQU8sRUFBRSxLQUFLLENBQUMsT0FBTztpQkFDdkIsQ0FBQTtZQUNILENBQUM7UUFDSCxDQUFDO1FBRUQ7O1dBRUc7UUFDSCxLQUFLLENBQUMseUJBQXlCLENBQUMsaUJBQXlCLEVBQUU7WUFDekQsTUFBTSxPQUFPLEdBQUcseUNBQW1CLENBQUMseUJBQXlCLENBQUMsY0FBYyxDQUFDLENBQUE7WUFDN0UsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxPQUFPLFlBQVksQ0FBQyxDQUFBO1lBQzNDLE9BQU8sT0FBTyxDQUFBO1FBQ2hCLENBQUM7Ozs7QUEvbUNVLG9EQUFvQiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyJDOlxcVXNlcnNcXDE2NjYzXFxEZXNrdG9wXFx0dWhlZ1xccGFja2FnZXNcXGNvbW1vbi1iYWNrZW5kXFxzcmNcXHZjcFxcYXN5bmMtd29ya2Zsb3cuc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDlvILmraXlt6XkvZzmtYHlvJXmk47mnI3liqHpm4bmiJBcbi8vIOmbhuaIkCBWQ1BUb29sQm94IOeahOmdnue6v+aAp+W8guatpeW3peS9nOa1ge+8jOaUr+aMgeWkjeadguS7u+WKoee8luaOklxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbXBvcnQgeyBJbmplY3RhYmxlLCBMb2dnZXIsIHR5cGUgT25Nb2R1bGVJbml0IH0gZnJvbSAnQG5lc3Rqcy9jb21tb24nXG5pbXBvcnQgeyBDb25maWdTZXJ2aWNlIH0gZnJvbSAnQG5lc3Rqcy9jb25maWcnXG5pbXBvcnQge1xuICBhc3luY1dvcmtmbG93RW5naW5lLFxuICBXb3JrZmxvd0Nvbm5lY3Rpb24sXG4gIHR5cGUgV29ya2Zsb3dFeGVjdXRpb25PcHRpb25zLFxuICB0eXBlIFdvcmtmbG93SW5zdGFuY2UsXG4gIFdvcmtmbG93Tm9kZSxcbiAgdHlwZSBXb3JrZmxvd1RlbXBsYXRlLFxufSBmcm9tICcuLi8uLi8uLi92Y3B0b29sYm94L3NyYy9tb2R1bGVzL3Rvb2xzL0FzeW5jV29ya2Zsb3dFbmdpbmUnXG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBBc3luY1dvcmtmbG93U2VydmljZSBpbXBsZW1lbnRzIE9uTW9kdWxlSW5pdCB7XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9nZ2VyID0gbmV3IExvZ2dlcihBc3luY1dvcmtmbG93U2VydmljZS5uYW1lKVxuICBwcml2YXRlIHByZWRlZmluZWRUZW1wbGF0ZXM6IE1hcDxzdHJpbmcsIFdvcmtmbG93VGVtcGxhdGU+ID0gbmV3IE1hcCgpXG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWdTZXJ2aWNlOiBDb25maWdTZXJ2aWNlKSB7fVxuXG4gIGFzeW5jIG9uTW9kdWxlSW5pdCgpIHtcbiAgICBhd2FpdCB0aGlzLmluaXRpYWxpemVXb3JrZmxvd0VuZ2luZSgpXG4gICAgYXdhaXQgdGhpcy5jcmVhdGVQcmVkZWZpbmVkVGVtcGxhdGVzKClcbiAgICB0aGlzLnNldHVwRXZlbnRIYW5kbGVycygpXG4gICAgdGhpcy5sb2dnZXIubG9nKCflvILmraXlt6XkvZzmtYHlvJXmk47lt7LliJ3lp4vljJYnKVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0g5byV5pOO5Yid5aeL5YyWID09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIOWIneWni+WMluW3peS9nOa1geW8leaTjlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBpbml0aWFsaXplV29ya2Zsb3dFbmdpbmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8g6K6+572u5byV5pOO5Y+C5pWwXG4gICAgLy8g6L+Z6YeM5Y+v5Lul5qC55o2u6YWN572u6LCD5pW05byV5pOO5Y+C5pWwXG5cbiAgICB0aGlzLmxvZ2dlci5sb2coJ+W3peS9nOa1geW8leaTjuWPguaVsOW3sumFjee9ricpXG4gIH1cblxuICAvKipcbiAgICog5Yib5bu66aKE5a6a5LmJ5qih5p2/XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZVByZWRlZmluZWRUZW1wbGF0ZXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8g5pWF5LqL5Yib5L2c5bel5L2c5rWB5qih5p2/XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVTdG9yeUNyZWF0aW9uVGVtcGxhdGUoKVxuXG4gICAgLy8g6KeS6Imy5byA5Y+R5bel5L2c5rWB5qih5p2/XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVDaGFyYWN0ZXJEZXZlbG9wbWVudFRlbXBsYXRlKClcblxuICAgIC8vIOS4lueVjOaehOW7uuW3peS9nOa1geaooeadv1xuICAgIGF3YWl0IHRoaXMuY3JlYXRlV29ybGRCdWlsZGluZ1RlbXBsYXRlKClcblxuICAgIC8vIOWkmuaooeaAgeWPmeS6i+W3peS9nOa1geaooeadv1xuICAgIGF3YWl0IHRoaXMuY3JlYXRlTXVsdGltb2RhbE5hcnJhdGl2ZVRlbXBsYXRlKClcblxuICAgIHRoaXMubG9nZ2VyLmxvZygn6aKE5a6a5LmJ5bel5L2c5rWB5qih5p2/5bey5Yib5bu6JylcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rmlYXkuovliJvkvZzmqKHmnb9cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlU3RvcnlDcmVhdGlvblRlbXBsYXRlKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgdGVtcGxhdGU6IE9taXQ8V29ya2Zsb3dUZW1wbGF0ZSwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+ID0ge1xuICAgICAgbmFtZTogJ+aVheS6i+WIm+S9nOW3peS9nOa1gScsXG4gICAgICBkZXNjcmlwdGlvbjogJ+WujOaVtOeahEFJ6L6F5Yqp5pWF5LqL5Yib5L2c5rWB56iLJyxcbiAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICBub2RlczogW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdjb25jZXB0LWdlbmVyYXRpb24nLFxuICAgICAgICAgIHR5cGU6ICd0YXNrJyxcbiAgICAgICAgICBuYW1lOiAn5Yib5oSP5qaC5b+155Sf5oiQJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ+WfuuS6jueUqOaIt+i+k+WFpeeUn+aIkOaVheS6i+amguW/tScsXG4gICAgICAgICAgY29uZmlnOiB7IHRhc2tUeXBlOiAnYWknLCBtb2RlbDogJ2dwdC00JywgbWF4VG9rZW5zOiA1MDAgfSxcbiAgICAgICAgICBpbnB1dHM6IFtdLFxuICAgICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdjb25jZXB0LW91dCcsXG4gICAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogJ2NvbmNlcHQtZ2VuZXJhdGlvbicsXG4gICAgICAgICAgICAgIHRhcmdldE5vZGVJZDogJ2xvZ2ljLXZhbGlkYXRpb24nLFxuICAgICAgICAgICAgICBjb25kaXRpb246IHsgdHlwZTogJ2V4cHJlc3Npb24nLCBleHByZXNzaW9uOiAndHJ1ZScgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgICByZXRyeUNvdW50OiAwLFxuICAgICAgICAgIG1heFJldHJpZXM6IDMsXG4gICAgICAgICAgdGltZW91dDogNjAwMDAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2xvZ2ljLXZhbGlkYXRpb24nLFxuICAgICAgICAgIHR5cGU6ICd0YXNrJyxcbiAgICAgICAgICBuYW1lOiAn6YC76L6R6aqM6K+BJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ+mqjOivgeaVheS6i+amguW/teeahOmAu+i+keS4gOiHtOaApycsXG4gICAgICAgICAgY29uZmlnOiB7IHRhc2tUeXBlOiAnYWknLCBhbmFseXNpc1R5cGU6ICdsb2dpYycgfSxcbiAgICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdsb2dpYy1pbicsXG4gICAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogJ2NvbmNlcHQtZ2VuZXJhdGlvbicsXG4gICAgICAgICAgICAgIHRhcmdldE5vZGVJZDogJ2xvZ2ljLXZhbGlkYXRpb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdsb2dpYy12YWxpZCcsXG4gICAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogJ2xvZ2ljLXZhbGlkYXRpb24nLFxuICAgICAgICAgICAgICB0YXJnZXROb2RlSWQ6ICdjaGFyYWN0ZXItY3JlYXRpb24nLFxuICAgICAgICAgICAgICBjb25kaXRpb246IHsgdHlwZTogJ2V4cHJlc3Npb24nLCBleHByZXNzaW9uOiAncmVzdWx0LmlzVmFsaWQgPT09IHRydWUnIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ2xvZ2ljLWludmFsaWQnLFxuICAgICAgICAgICAgICBzb3VyY2VOb2RlSWQ6ICdsb2dpYy12YWxpZGF0aW9uJyxcbiAgICAgICAgICAgICAgdGFyZ2V0Tm9kZUlkOiAnY29uY2VwdC1yZXZpc2lvbicsXG4gICAgICAgICAgICAgIGNvbmRpdGlvbjogeyB0eXBlOiAnZXhwcmVzc2lvbicsIGV4cHJlc3Npb246ICdyZXN1bHQuaXNWYWxpZCA9PT0gZmFsc2UnIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAyLFxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwLFxuICAgICAgICAgIGRlcGVuZGVuY2llczogWydjb25jZXB0LWdlbmVyYXRpb24nXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnY29uY2VwdC1yZXZpc2lvbicsXG4gICAgICAgICAgdHlwZTogJ3Rhc2snLFxuICAgICAgICAgIG5hbWU6ICfmpoLlv7Xkv67mlLknLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn5qC55o2u6YC76L6R6aqM6K+B57uT5p6c5L+u5pS55pWF5LqL5qaC5b+1JyxcbiAgICAgICAgICBjb25maWc6IHsgdGFza1R5cGU6ICdhaScsIHJldmlzaW9uVHlwZTogJ2xvZ2ljLWZpeCcgfSxcbiAgICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdyZXZpc2lvbi1pbicsXG4gICAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogJ2xvZ2ljLXZhbGlkYXRpb24nLFxuICAgICAgICAgICAgICB0YXJnZXROb2RlSWQ6ICdjb25jZXB0LXJldmlzaW9uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBvdXRwdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAncmV2aXNpb24tb3V0JyxcbiAgICAgICAgICAgICAgc291cmNlTm9kZUlkOiAnY29uY2VwdC1yZXZpc2lvbicsXG4gICAgICAgICAgICAgIHRhcmdldE5vZGVJZDogJ2xvZ2ljLXZhbGlkYXRpb24nLFxuICAgICAgICAgICAgICBjb25kaXRpb246IHsgdHlwZTogJ2V4cHJlc3Npb24nLCBleHByZXNzaW9uOiAndHJ1ZScgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgICByZXRyeUNvdW50OiAwLFxuICAgICAgICAgIG1heFJldHJpZXM6IDMsXG4gICAgICAgICAgdGltZW91dDogNDUwMDAsXG4gICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ2xvZ2ljLXZhbGlkYXRpb24nXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnY2hhcmFjdGVyLWNyZWF0aW9uJyxcbiAgICAgICAgICB0eXBlOiAncGFyYWxsZWwnLFxuICAgICAgICAgIG5hbWU6ICfop5LoibLliJvlu7onLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn5bm26KGM5Yib5bu65aSa5Liq5Li76KaB6KeS6ImyJyxcbiAgICAgICAgICBjb25maWc6IHsgdGFza3M6IFsncHJvdGFnb25pc3QnLCAnYW50YWdvbmlzdCcsICdzdXBwb3J0aW5nJ10gfSxcbiAgICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHsgaWQ6ICdjaGFyLWluJywgc291cmNlTm9kZUlkOiAnbG9naWMtdmFsaWRhdGlvbicsIHRhcmdldE5vZGVJZDogJ2NoYXJhY3Rlci1jcmVhdGlvbicgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdjaGFyLW91dCcsXG4gICAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogJ2NoYXJhY3Rlci1jcmVhdGlvbicsXG4gICAgICAgICAgICAgIHRhcmdldE5vZGVJZDogJ3dvcmxkLWJ1aWxkaW5nJyxcbiAgICAgICAgICAgICAgY29uZGl0aW9uOiB7IHR5cGU6ICdleHByZXNzaW9uJywgZXhwcmVzc2lvbjogJ3RydWUnIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAyLFxuICAgICAgICAgIHRpbWVvdXQ6IDEyMDAwMCxcbiAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsnbG9naWMtdmFsaWRhdGlvbiddLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICd3b3JsZC1idWlsZGluZycsXG4gICAgICAgICAgdHlwZTogJ3Rhc2snLFxuICAgICAgICAgIG5hbWU6ICfkuJbnlYzmnoTlu7onLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn5p6E5bu65pWF5LqL55qE5LiW55WM6KeC5ZKM6K6+5a6aJyxcbiAgICAgICAgICBjb25maWc6IHsgdGFza1R5cGU6ICdhaScsIHdvcmxkVHlwZTogJ2NvbXByZWhlbnNpdmUnIH0sXG4gICAgICAgICAgaW5wdXRzOiBbXG4gICAgICAgICAgICB7IGlkOiAnd29ybGQtaW4nLCBzb3VyY2VOb2RlSWQ6ICdjaGFyYWN0ZXItY3JlYXRpb24nLCB0YXJnZXROb2RlSWQ6ICd3b3JsZC1idWlsZGluZycgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICd3b3JsZC1vdXQnLFxuICAgICAgICAgICAgICBzb3VyY2VOb2RlSWQ6ICd3b3JsZC1idWlsZGluZycsXG4gICAgICAgICAgICAgIHRhcmdldE5vZGVJZDogJ3Bsb3Qtc3RydWN0dXJlJyxcbiAgICAgICAgICAgICAgY29uZGl0aW9uOiB7IHR5cGU6ICdleHByZXNzaW9uJywgZXhwcmVzc2lvbjogJ3RydWUnIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAyLFxuICAgICAgICAgIHRpbWVvdXQ6IDkwMDAwLFxuICAgICAgICAgIGRlcGVuZGVuY2llczogWydjaGFyYWN0ZXItY3JlYXRpb24nXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAncGxvdC1zdHJ1Y3R1cmUnLFxuICAgICAgICAgIHR5cGU6ICd0YXNrJyxcbiAgICAgICAgICBuYW1lOiAn5oOF6IqC57uT5p6E6K6+6K6hJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ+iuvuiuoeaVheS6i+eahOaDheiKguahhuaetuWSjOi9rOaKmOeCuScsXG4gICAgICAgICAgY29uZmlnOiB7IHRhc2tUeXBlOiAnYWknLCBzdHJ1Y3R1cmVUeXBlOiAndGhyZWUtYWN0JyB9LFxuICAgICAgICAgIGlucHV0czogW1xuICAgICAgICAgICAgeyBpZDogJ3Bsb3QtaW4nLCBzb3VyY2VOb2RlSWQ6ICd3b3JsZC1idWlsZGluZycsIHRhcmdldE5vZGVJZDogJ3Bsb3Qtc3RydWN0dXJlJyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgb3V0cHV0czogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ3Bsb3Qtb3V0JyxcbiAgICAgICAgICAgICAgc291cmNlTm9kZUlkOiAncGxvdC1zdHJ1Y3R1cmUnLFxuICAgICAgICAgICAgICB0YXJnZXROb2RlSWQ6ICdjb250ZW50LWdlbmVyYXRpb24nLFxuICAgICAgICAgICAgICBjb25kaXRpb246IHsgdHlwZTogJ2V4cHJlc3Npb24nLCBleHByZXNzaW9uOiAndHJ1ZScgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgICByZXRyeUNvdW50OiAwLFxuICAgICAgICAgIG1heFJldHJpZXM6IDIsXG4gICAgICAgICAgdGltZW91dDogNzUwMDAsXG4gICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3dvcmxkLWJ1aWxkaW5nJ10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2NvbnRlbnQtZ2VuZXJhdGlvbicsXG4gICAgICAgICAgdHlwZTogJ3Rhc2snLFxuICAgICAgICAgIG5hbWU6ICflhoXlrrnnlJ/miJAnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn55Sf5oiQ5a6M5pW055qE5pWF5LqL5oOF6IqC5YaF5a65JyxcbiAgICAgICAgICBjb25maWc6IHsgdGFza1R5cGU6ICdhaScsIGNvbnRlbnRUeXBlOiAnZnVsbC1uYXJyYXRpdmUnLCBtYXhMZW5ndGg6IDUwMDAgfSxcbiAgICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdjb250ZW50LWluJyxcbiAgICAgICAgICAgICAgc291cmNlTm9kZUlkOiAncGxvdC1zdHJ1Y3R1cmUnLFxuICAgICAgICAgICAgICB0YXJnZXROb2RlSWQ6ICdjb250ZW50LWdlbmVyYXRpb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdjb250ZW50LW91dCcsXG4gICAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogJ2NvbnRlbnQtZ2VuZXJhdGlvbicsXG4gICAgICAgICAgICAgIHRhcmdldE5vZGVJZDogJ3F1YWxpdHktcmV2aWV3JyxcbiAgICAgICAgICAgICAgY29uZGl0aW9uOiB7IHR5cGU6ICdleHByZXNzaW9uJywgZXhwcmVzc2lvbjogJ3RydWUnIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAzLFxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwMCxcbiAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsncGxvdC1zdHJ1Y3R1cmUnXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAncXVhbGl0eS1yZXZpZXcnLFxuICAgICAgICAgIHR5cGU6ICd0YXNrJyxcbiAgICAgICAgICBuYW1lOiAn6LSo6YeP5a6h5p+lJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ+WvueeUn+aIkOWGheWuuei/m+ihjOi0qOmHj+ivhOS8sOWSjOS/ruaUuScsXG4gICAgICAgICAgY29uZmlnOiB7IHRhc2tUeXBlOiAnYWknLCByZXZpZXdUeXBlOiAnY29tcHJlaGVuc2l2ZScgfSxcbiAgICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHsgaWQ6ICdyZXZpZXctaW4nLCBzb3VyY2VOb2RlSWQ6ICdjb250ZW50LWdlbmVyYXRpb24nLCB0YXJnZXROb2RlSWQ6ICdxdWFsaXR5LXJldmlldycgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdyZXZpZXctcGFzcycsXG4gICAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogJ3F1YWxpdHktcmV2aWV3JyxcbiAgICAgICAgICAgICAgdGFyZ2V0Tm9kZUlkOiAnZmluYWwtb3V0cHV0JyxcbiAgICAgICAgICAgICAgY29uZGl0aW9uOiB7IHR5cGU6ICdleHByZXNzaW9uJywgZXhwcmVzc2lvbjogJ3Jlc3VsdC5xdWFsaXR5ID4gMC44JyB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdyZXZpZXctZmFpbCcsXG4gICAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogJ3F1YWxpdHktcmV2aWV3JyxcbiAgICAgICAgICAgICAgdGFyZ2V0Tm9kZUlkOiAnY29udGVudC1yZXZpc2lvbicsXG4gICAgICAgICAgICAgIGNvbmRpdGlvbjogeyB0eXBlOiAnZXhwcmVzc2lvbicsIGV4cHJlc3Npb246ICdyZXN1bHQucXVhbGl0eSA8PSAwLjgnIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAyLFxuICAgICAgICAgIHRpbWVvdXQ6IDYwMDAwLFxuICAgICAgICAgIGRlcGVuZGVuY2llczogWydjb250ZW50LWdlbmVyYXRpb24nXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnY29udGVudC1yZXZpc2lvbicsXG4gICAgICAgICAgdHlwZTogJ3Rhc2snLFxuICAgICAgICAgIG5hbWU6ICflhoXlrrnkv67mlLknLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn5qC55o2u6LSo6YeP5a6h5p+l57uT5p6c5L+u5pS55YaF5a65JyxcbiAgICAgICAgICBjb25maWc6IHsgdGFza1R5cGU6ICdhaScsIHJldmlzaW9uVHlwZTogJ3F1YWxpdHktaW1wcm92ZW1lbnQnIH0sXG4gICAgICAgICAgaW5wdXRzOiBbXG4gICAgICAgICAgICB7IGlkOiAncmV2aXNpb24taW4nLCBzb3VyY2VOb2RlSWQ6ICdxdWFsaXR5LXJldmlldycsIHRhcmdldE5vZGVJZDogJ2NvbnRlbnQtcmV2aXNpb24nIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBvdXRwdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAncmV2aXNpb24tb3V0JyxcbiAgICAgICAgICAgICAgc291cmNlTm9kZUlkOiAnY29udGVudC1yZXZpc2lvbicsXG4gICAgICAgICAgICAgIHRhcmdldE5vZGVJZDogJ3F1YWxpdHktcmV2aWV3JyxcbiAgICAgICAgICAgICAgY29uZGl0aW9uOiB7IHR5cGU6ICdleHByZXNzaW9uJywgZXhwcmVzc2lvbjogJ3RydWUnIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAzLFxuICAgICAgICAgIHRpbWVvdXQ6IDE4MDAwMCxcbiAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsncXVhbGl0eS1yZXZpZXcnXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZmluYWwtb3V0cHV0JyxcbiAgICAgICAgICB0eXBlOiAndGFzaycsXG4gICAgICAgICAgbmFtZTogJ+acgOe7iOi+k+WHuicsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICfmoLzlvI/ljJblubbovpPlh7rmnIDnu4jnmoTmlYXkuosnLFxuICAgICAgICAgIGNvbmZpZzogeyB0YXNrVHlwZTogJ2Zvcm1hdCcsIG91dHB1dEZvcm1hdDogJ21hcmtkb3duJyB9LFxuICAgICAgICAgIGlucHV0czogW1xuICAgICAgICAgICAgeyBpZDogJ2ZpbmFsLWluJywgc291cmNlTm9kZUlkOiAncXVhbGl0eS1yZXZpZXcnLCB0YXJnZXROb2RlSWQ6ICdmaW5hbC1vdXRwdXQnIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBvdXRwdXRzOiBbXSxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgICByZXRyeUNvdW50OiAwLFxuICAgICAgICAgIG1heFJldHJpZXM6IDEsXG4gICAgICAgICAgdGltZW91dDogMzAwMDAsXG4gICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3F1YWxpdHktcmV2aWV3J10sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgY29ubmVjdGlvbnM6IFtdLCAvLyDov57mjqXlt7LlnKjoioLngrnkuK3lrprkuYlcbiAgICAgIGRlZmF1bHRDb25maWc6IHtcbiAgICAgICAgbWF4UmV0cmllczogMyxcbiAgICAgICAgdGltZW91dDogMzAwMDAwLFxuICAgICAgICBwcmlvcml0eTogJ2hpZ2gnLFxuICAgICAgfSxcbiAgICAgIHRhZ3M6IFsnc3RvcnktY3JlYXRpb24nLCAnbmFycmF0aXZlJywgJ2FpLWFzc2lzdGVkJ10sXG4gICAgfVxuXG4gICAgY29uc3QgdGVtcGxhdGVJZCA9IGFzeW5jV29ya2Zsb3dFbmdpbmUuY3JlYXRlVGVtcGxhdGUodGVtcGxhdGUpXG4gICAgdGhpcy5wcmVkZWZpbmVkVGVtcGxhdGVzLnNldCgnc3RvcnktY3JlYXRpb24nLCBhc3luY1dvcmtmbG93RW5naW5lLmdldFRlbXBsYXRlKHRlbXBsYXRlSWQpISlcblxuICAgIHJldHVybiB0ZW1wbGF0ZUlkXG4gIH1cblxuICAvKipcbiAgICog5Yib5bu66KeS6Imy5byA5Y+R5qih5p2/XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZUNoYXJhY3RlckRldmVsb3BtZW50VGVtcGxhdGUoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAvLyDnroDljJbnmoTop5LoibLlvIDlj5HmqKHmnb9cbiAgICBjb25zdCB0ZW1wbGF0ZTogT21pdDxXb3JrZmxvd1RlbXBsYXRlLCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXBkYXRlZEF0Jz4gPSB7XG4gICAgICBuYW1lOiAn6KeS6Imy5byA5Y+R5bel5L2c5rWBJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAn6K+m57uG55qE6KeS6Imy5aGR6YCg5ZKM5oCn5qC85Y+R5bGV5rWB56iLJyxcbiAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICBub2RlczogW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdjaGFyYWN0ZXItYmFzaWNzJyxcbiAgICAgICAgICB0eXBlOiAndGFzaycsXG4gICAgICAgICAgbmFtZTogJ+inkuiJsuWfuuehgOiuvuWumicsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICflrprkuYnop5LoibLnmoTln7rmnKzlsZ7mgKflkozog4zmma8nLFxuICAgICAgICAgIGNvbmZpZzogeyB0YXNrVHlwZTogJ2NoYXJhY3RlcicsIHN0ZXA6ICdiYXNpY3MnIH0sXG4gICAgICAgICAgaW5wdXRzOiBbXSxcbiAgICAgICAgICBvdXRwdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAnYmFzaWNzLW91dCcsXG4gICAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogJ2NoYXJhY3Rlci1iYXNpY3MnLFxuICAgICAgICAgICAgICB0YXJnZXROb2RlSWQ6ICdwZXJzb25hbGl0eS1hbmFseXNpcycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAyLFxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdwZXJzb25hbGl0eS1hbmFseXNpcycsXG4gICAgICAgICAgdHlwZTogJ3Rhc2snLFxuICAgICAgICAgIG5hbWU6ICfmgKfmoLzliIbmnpAnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn5rex5YWl5YiG5p6Q6KeS6Imy5oCn5qC854m55b6B5ZKM5Yqo5py6JyxcbiAgICAgICAgICBjb25maWc6IHsgdGFza1R5cGU6ICdjaGFyYWN0ZXInLCBzdGVwOiAncGVyc29uYWxpdHknIH0sXG4gICAgICAgICAgaW5wdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlkOiAncGVyc29uYWxpdHktaW4nLFxuICAgICAgICAgICAgICBzb3VyY2VOb2RlSWQ6ICdjaGFyYWN0ZXItYmFzaWNzJyxcbiAgICAgICAgICAgICAgdGFyZ2V0Tm9kZUlkOiAncGVyc29uYWxpdHktYW5hbHlzaXMnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdwZXJzb25hbGl0eS1vdXQnLFxuICAgICAgICAgICAgICBzb3VyY2VOb2RlSWQ6ICdwZXJzb25hbGl0eS1hbmFseXNpcycsXG4gICAgICAgICAgICAgIHRhcmdldE5vZGVJZDogJ2RldmVsb3BtZW50LWFyYycsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAyLFxuICAgICAgICAgIHRpbWVvdXQ6IDQ1MDAwLFxuICAgICAgICAgIGRlcGVuZGVuY2llczogWydjaGFyYWN0ZXItYmFzaWNzJ10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2RldmVsb3BtZW50LWFyYycsXG4gICAgICAgICAgdHlwZTogJ3Rhc2snLFxuICAgICAgICAgIG5hbWU6ICflj5HlsZXlvKfnur/orr7orqEnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn6K6+6K6h6KeS6Imy55qE5oiQ6ZW/5ZKM5Y+Y5YyW6L2o6L+5JyxcbiAgICAgICAgICBjb25maWc6IHsgdGFza1R5cGU6ICdjaGFyYWN0ZXInLCBzdGVwOiAnYXJjJyB9LFxuICAgICAgICAgIGlucHV0czogW1xuICAgICAgICAgICAgeyBpZDogJ2FyYy1pbicsIHNvdXJjZU5vZGVJZDogJ3BlcnNvbmFsaXR5LWFuYWx5c2lzJywgdGFyZ2V0Tm9kZUlkOiAnZGV2ZWxvcG1lbnQtYXJjJyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgb3V0cHV0czogW1xuICAgICAgICAgICAgeyBpZDogJ2FyYy1vdXQnLCBzb3VyY2VOb2RlSWQ6ICdkZXZlbG9wbWVudC1hcmMnLCB0YXJnZXROb2RlSWQ6ICdjaGFyYWN0ZXItb3V0cHV0JyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAyLFxuICAgICAgICAgIHRpbWVvdXQ6IDYwMDAwLFxuICAgICAgICAgIGRlcGVuZGVuY2llczogWydwZXJzb25hbGl0eS1hbmFseXNpcyddLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdjaGFyYWN0ZXItb3V0cHV0JyxcbiAgICAgICAgICB0eXBlOiAndGFzaycsXG4gICAgICAgICAgbmFtZTogJ+inkuiJsui1hOaWmei+k+WHuicsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICfnlJ/miJDlrozmlbTnmoTop5LoibLotYTmlpnmlofmoaMnLFxuICAgICAgICAgIGNvbmZpZzogeyB0YXNrVHlwZTogJ2Zvcm1hdCcsIGZvcm1hdDogJ2NoYXJhY3Rlci1zaGVldCcgfSxcbiAgICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHsgaWQ6ICdvdXRwdXQtaW4nLCBzb3VyY2VOb2RlSWQ6ICdkZXZlbG9wbWVudC1hcmMnLCB0YXJnZXROb2RlSWQ6ICdjaGFyYWN0ZXItb3V0cHV0JyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgb3V0cHV0czogW10sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAxLFxuICAgICAgICAgIHRpbWVvdXQ6IDIwMDAwLFxuICAgICAgICAgIGRlcGVuZGVuY2llczogWydkZXZlbG9wbWVudC1hcmMnXSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBjb25uZWN0aW9uczogW10sXG4gICAgICBkZWZhdWx0Q29uZmlnOiB7XG4gICAgICAgIG1heFJldHJpZXM6IDIsXG4gICAgICAgIHRpbWVvdXQ6IDEyMDAwMCxcbiAgICAgICAgcHJpb3JpdHk6ICdub3JtYWwnLFxuICAgICAgfSxcbiAgICAgIHRhZ3M6IFsnY2hhcmFjdGVyLWRldmVsb3BtZW50JywgJ3BlcnNvbmFsaXR5JywgJ2NoYXJhY3Rlcml6YXRpb24nXSxcbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wbGF0ZUlkID0gYXN5bmNXb3JrZmxvd0VuZ2luZS5jcmVhdGVUZW1wbGF0ZSh0ZW1wbGF0ZSlcbiAgICB0aGlzLnByZWRlZmluZWRUZW1wbGF0ZXMuc2V0KFxuICAgICAgJ2NoYXJhY3Rlci1kZXZlbG9wbWVudCcsXG4gICAgICBhc3luY1dvcmtmbG93RW5naW5lLmdldFRlbXBsYXRlKHRlbXBsYXRlSWQpIVxuICAgIClcblxuICAgIHJldHVybiB0ZW1wbGF0ZUlkXG4gIH1cblxuICAvKipcbiAgICog5Yib5bu65LiW55WM5p6E5bu65qih5p2/XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZVdvcmxkQnVpbGRpbmdUZW1wbGF0ZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIOeugOWMlueahOS4lueVjOaehOW7uuaooeadv1xuICAgIGNvbnN0IHRlbXBsYXRlOiBPbWl0PFdvcmtmbG93VGVtcGxhdGUsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPiA9IHtcbiAgICAgIG5hbWU6ICfkuJbnlYzmnoTlu7rlt6XkvZzmtYEnLFxuICAgICAgZGVzY3JpcHRpb246ICfns7vnu5/mgKfnmoTkuJbnlYzop4Llkozorr7lrprmnoTlu7rmtYHnqIsnLFxuICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIG5vZGVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3dvcmxkLWNvbmNlcHQnLFxuICAgICAgICAgIHR5cGU6ICd0YXNrJyxcbiAgICAgICAgICBuYW1lOiAn5LiW55WM5qaC5b+16K6+6K6hJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ+WumuS5ieS4lueVjOeahOWfuuacrOamguW/teWSjOinhOWImScsXG4gICAgICAgICAgY29uZmlnOiB7IHRhc2tUeXBlOiAnd29ybGQnLCBzdGVwOiAnY29uY2VwdCcgfSxcbiAgICAgICAgICBpbnB1dHM6IFtdLFxuICAgICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHsgaWQ6ICdjb25jZXB0LW91dCcsIHNvdXJjZU5vZGVJZDogJ3dvcmxkLWNvbmNlcHQnLCB0YXJnZXROb2RlSWQ6ICdzZXR0aW5nLWRldGFpbHMnIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgICByZXRyeUNvdW50OiAwLFxuICAgICAgICAgIG1heFJldHJpZXM6IDIsXG4gICAgICAgICAgdGltZW91dDogNDUwMDAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3NldHRpbmctZGV0YWlscycsXG4gICAgICAgICAgdHlwZTogJ3BhcmFsbGVsJyxcbiAgICAgICAgICBuYW1lOiAn6K6+5a6a57uG6IqC5a6M5ZaEJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ+W5tuihjOWujOWWhOS4lueVjOeahOWQhOS4quaWuemdouiuvuWumicsXG4gICAgICAgICAgY29uZmlnOiB7IHRhc2tzOiBbJ2dlb2dyYXBoeScsICdjdWx0dXJlJywgJ21hZ2ljLXN5c3RlbScsICd0ZWNobm9sb2d5J10gfSxcbiAgICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHsgaWQ6ICdkZXRhaWxzLWluJywgc291cmNlTm9kZUlkOiAnd29ybGQtY29uY2VwdCcsIHRhcmdldE5vZGVJZDogJ3NldHRpbmctZGV0YWlscycgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6ICdkZXRhaWxzLW91dCcsXG4gICAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogJ3NldHRpbmctZGV0YWlscycsXG4gICAgICAgICAgICAgIHRhcmdldE5vZGVJZDogJ2NvbnNpc3RlbmN5LWNoZWNrJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgICByZXRyeUNvdW50OiAwLFxuICAgICAgICAgIG1heFJldHJpZXM6IDIsXG4gICAgICAgICAgdGltZW91dDogMTgwMDAwLFxuICAgICAgICAgIGRlcGVuZGVuY2llczogWyd3b3JsZC1jb25jZXB0J10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2NvbnNpc3RlbmN5LWNoZWNrJyxcbiAgICAgICAgICB0eXBlOiAndGFzaycsXG4gICAgICAgICAgbmFtZTogJ+S4gOiHtOaAp+ajgOafpScsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICfpqozor4HkuJbnlYzorr7lrprnmoTlhoXpg6jkuIDoh7TmgKcnLFxuICAgICAgICAgIGNvbmZpZzogeyB0YXNrVHlwZTogJ3ZhbGlkYXRpb24nLCBjaGVja1R5cGU6ICd3b3JsZC1jb25zaXN0ZW5jeScgfSxcbiAgICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHsgaWQ6ICdjaGVjay1pbicsIHNvdXJjZU5vZGVJZDogJ3NldHRpbmctZGV0YWlscycsIHRhcmdldE5vZGVJZDogJ2NvbnNpc3RlbmN5LWNoZWNrJyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgb3V0cHV0czogW1xuICAgICAgICAgICAgeyBpZDogJ2NoZWNrLW91dCcsIHNvdXJjZU5vZGVJZDogJ2NvbnNpc3RlbmN5LWNoZWNrJywgdGFyZ2V0Tm9kZUlkOiAnd29ybGQtb3V0cHV0JyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAyLFxuICAgICAgICAgIHRpbWVvdXQ6IDYwMDAwLFxuICAgICAgICAgIGRlcGVuZGVuY2llczogWydzZXR0aW5nLWRldGFpbHMnXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnd29ybGQtb3V0cHV0JyxcbiAgICAgICAgICB0eXBlOiAndGFzaycsXG4gICAgICAgICAgbmFtZTogJ+S4lueVjOiuvuWumui+k+WHuicsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICfnlJ/miJDlrozmlbTnmoTkuJbnlYzorr7lrprmlofmoaMnLFxuICAgICAgICAgIGNvbmZpZzogeyB0YXNrVHlwZTogJ2Zvcm1hdCcsIGZvcm1hdDogJ3dvcmxkLWJpYmxlJyB9LFxuICAgICAgICAgIGlucHV0czogW1xuICAgICAgICAgICAgeyBpZDogJ291dHB1dC1pbicsIHNvdXJjZU5vZGVJZDogJ2NvbnNpc3RlbmN5LWNoZWNrJywgdGFyZ2V0Tm9kZUlkOiAnd29ybGQtb3V0cHV0JyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgb3V0cHV0czogW10sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAxLFxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwLFxuICAgICAgICAgIGRlcGVuZGVuY2llczogWydjb25zaXN0ZW5jeS1jaGVjayddLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGNvbm5lY3Rpb25zOiBbXSxcbiAgICAgIGRlZmF1bHRDb25maWc6IHtcbiAgICAgICAgbWF4UmV0cmllczogMixcbiAgICAgICAgdGltZW91dDogMTUwMDAwLFxuICAgICAgICBwcmlvcml0eTogJ25vcm1hbCcsXG4gICAgICB9LFxuICAgICAgdGFnczogWyd3b3JsZC1idWlsZGluZycsICdsb3JlJywgJ3NldHRpbmcnLCAnd29ybGQtZGVzaWduJ10sXG4gICAgfVxuXG4gICAgY29uc3QgdGVtcGxhdGVJZCA9IGFzeW5jV29ya2Zsb3dFbmdpbmUuY3JlYXRlVGVtcGxhdGUodGVtcGxhdGUpXG4gICAgdGhpcy5wcmVkZWZpbmVkVGVtcGxhdGVzLnNldCgnd29ybGQtYnVpbGRpbmcnLCBhc3luY1dvcmtmbG93RW5naW5lLmdldFRlbXBsYXRlKHRlbXBsYXRlSWQpISlcblxuICAgIHJldHVybiB0ZW1wbGF0ZUlkXG4gIH1cblxuICAvKipcbiAgICog5Yib5bu65aSa5qih5oCB5Y+Z5LqL5qih5p2/XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGNyZWF0ZU11bHRpbW9kYWxOYXJyYXRpdmVUZW1wbGF0ZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIOWkmuaooeaAgeWPmeS6i+aooeadv1xuICAgIGNvbnN0IHRlbXBsYXRlOiBPbWl0PFdvcmtmbG93VGVtcGxhdGUsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPiA9IHtcbiAgICAgIG5hbWU6ICflpJrmqKHmgIHlj5nkuovlt6XkvZzmtYEnLFxuICAgICAgZGVzY3JpcHRpb246ICfnu5PlkIjmlofmnKzjgIHlm77lg4/jgIHpn7PpopHnmoTlpJrmqKHmgIHmlYXkuovliJvkvZwnLFxuICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIG5vZGVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3RleHQtc2NyaXB0JyxcbiAgICAgICAgICB0eXBlOiAndGFzaycsXG4gICAgICAgICAgbmFtZTogJ+aWh+acrOiEmuacrOWIm+S9nCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICfliJvkvZzmlYXkuovnmoTmlofmnKzohJrmnKwnLFxuICAgICAgICAgIGNvbmZpZzogeyB0YXNrVHlwZTogJ2FpJywgbW9kYWxpdHk6ICd0ZXh0JywgbWF4TGVuZ3RoOiAyMDAwIH0sXG4gICAgICAgICAgaW5wdXRzOiBbXSxcbiAgICAgICAgICBvdXRwdXRzOiBbXG4gICAgICAgICAgICB7IGlkOiAndGV4dC1vdXQnLCBzb3VyY2VOb2RlSWQ6ICd0ZXh0LXNjcmlwdCcsIHRhcmdldE5vZGVJZDogJ3BhcmFsbGVsLW1vZGFsaXR5JyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAyLFxuICAgICAgICAgIHRpbWVvdXQ6IDkwMDAwLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdwYXJhbGxlbC1tb2RhbGl0eScsXG4gICAgICAgICAgdHlwZTogJ3BhcmFsbGVsJyxcbiAgICAgICAgICBuYW1lOiAn5aSa5qih5oCB5YaF5a6555Sf5oiQJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ+W5tuihjOeUn+aIkOWbvuWDj+OAgemfs+mikeetieaooeaAgeWGheWuuScsXG4gICAgICAgICAgY29uZmlnOiB7IHRhc2tzOiBbJ2ltYWdlLWdlbmVyYXRpb24nLCAnYXVkaW8tbmFycmF0aW9uJywgJ211c2ljLXNjb3JpbmcnXSB9LFxuICAgICAgICAgIGlucHV0czogW1xuICAgICAgICAgICAgeyBpZDogJ21vZGFsaXR5LWluJywgc291cmNlTm9kZUlkOiAndGV4dC1zY3JpcHQnLCB0YXJnZXROb2RlSWQ6ICdwYXJhbGxlbC1tb2RhbGl0eScgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHsgaWQ6ICdtb2RhbGl0eS1vdXQnLCBzb3VyY2VOb2RlSWQ6ICdwYXJhbGxlbC1tb2RhbGl0eScsIHRhcmdldE5vZGVJZDogJ2ludGVncmF0aW9uJyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAzLFxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwMCxcbiAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsndGV4dC1zY3JpcHQnXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnaW50ZWdyYXRpb24nLFxuICAgICAgICAgIHR5cGU6ICd0YXNrJyxcbiAgICAgICAgICBuYW1lOiAn5aSa5qih5oCB6ZuG5oiQJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ+WwhuWQhOaooeaAgeWGheWuueaVtOWQiOS4uui/nui0r+eahOWPmeS6i+S9k+mqjCcsXG4gICAgICAgICAgY29uZmlnOiB7IHRhc2tUeXBlOiAnaW50ZWdyYXRpb24nLCBpbnRlZ3JhdGlvblR5cGU6ICdtdWx0aW1vZGFsJyB9LFxuICAgICAgICAgIGlucHV0czogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ2ludGVncmF0aW9uLWluJyxcbiAgICAgICAgICAgICAgc291cmNlTm9kZUlkOiAncGFyYWxsZWwtbW9kYWxpdHknLFxuICAgICAgICAgICAgICB0YXJnZXROb2RlSWQ6ICdpbnRlZ3JhdGlvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgb3V0cHV0czogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogJ2ludGVncmF0aW9uLW91dCcsXG4gICAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogJ2ludGVncmF0aW9uJyxcbiAgICAgICAgICAgICAgdGFyZ2V0Tm9kZUlkOiAnbXVsdGltb2RhbC1vdXRwdXQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICAgIHJldHJ5Q291bnQ6IDAsXG4gICAgICAgICAgbWF4UmV0cmllczogMixcbiAgICAgICAgICB0aW1lb3V0OiAxMjAwMDAsXG4gICAgICAgICAgZGVwZW5kZW5jaWVzOiBbJ3BhcmFsbGVsLW1vZGFsaXR5J10sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ211bHRpbW9kYWwtb3V0cHV0JyxcbiAgICAgICAgICB0eXBlOiAndGFzaycsXG4gICAgICAgICAgbmFtZTogJ+WkmuaooeaAgei+k+WHuicsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICfnlJ/miJDmnIDnu4jnmoTlpJrmqKHmgIHlj5nkuovkvZzlk4EnLFxuICAgICAgICAgIGNvbmZpZzogeyB0YXNrVHlwZTogJ2Zvcm1hdCcsIGZvcm1hdDogJ211bHRpbW9kYWwtcGFja2FnZScgfSxcbiAgICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHsgaWQ6ICdvdXRwdXQtaW4nLCBzb3VyY2VOb2RlSWQ6ICdpbnRlZ3JhdGlvbicsIHRhcmdldE5vZGVJZDogJ211bHRpbW9kYWwtb3V0cHV0JyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgb3V0cHV0czogW10sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAxLFxuICAgICAgICAgIHRpbWVvdXQ6IDYwMDAwLFxuICAgICAgICAgIGRlcGVuZGVuY2llczogWydpbnRlZ3JhdGlvbiddLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGNvbm5lY3Rpb25zOiBbXSxcbiAgICAgIGRlZmF1bHRDb25maWc6IHtcbiAgICAgICAgbWF4UmV0cmllczogMyxcbiAgICAgICAgdGltZW91dDogNDgwMDAwLFxuICAgICAgICBwcmlvcml0eTogJ2hpZ2gnLFxuICAgICAgfSxcbiAgICAgIHRhZ3M6IFsnbXVsdGltb2RhbCcsICduYXJyYXRpdmUnLCAnbWVkaWEnLCAnaW50ZWdyYXRpb24nXSxcbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wbGF0ZUlkID0gYXN5bmNXb3JrZmxvd0VuZ2luZS5jcmVhdGVUZW1wbGF0ZSh0ZW1wbGF0ZSlcbiAgICB0aGlzLnByZWRlZmluZWRUZW1wbGF0ZXMuc2V0KFxuICAgICAgJ211bHRpbW9kYWwtbmFycmF0aXZlJyxcbiAgICAgIGFzeW5jV29ya2Zsb3dFbmdpbmUuZ2V0VGVtcGxhdGUodGVtcGxhdGVJZCkhXG4gICAgKVxuXG4gICAgcmV0dXJuIHRlbXBsYXRlSWRcbiAgfVxuXG4gIC8qKlxuICAgKiDorr7nva7kuovku7blpITnkIblmahcbiAgICovXG4gIHByaXZhdGUgc2V0dXBFdmVudEhhbmRsZXJzKCk6IHZvaWQge1xuICAgIC8vIOebkeWQrOW3peS9nOa1geS6i+S7tlxuICAgIGFzeW5jV29ya2Zsb3dFbmdpbmUub24oJ3dvcmtmbG93SW5zdGFudGlhdGVkJywgKHdvcmtmbG93KSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlci5sb2coYOW3peS9nOa1geW3suWunuS+i+WMljogJHt3b3JrZmxvdy5pZH0gLSAke3dvcmtmbG93Lm5hbWV9YClcbiAgICB9KVxuXG4gICAgYXN5bmNXb3JrZmxvd0VuZ2luZS5vbignd29ya2Zsb3dTdGFydGVkJywgKHdvcmtmbG93KSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlci5sb2coYOW3peS9nOa1geW3suWQr+WKqDogJHt3b3JrZmxvdy5pZH1gKVxuICAgIH0pXG5cbiAgICBhc3luY1dvcmtmbG93RW5naW5lLm9uKCd3b3JrZmxvd0NvbXBsZXRlZCcsICh3b3JrZmxvdykgPT4ge1xuICAgICAgdGhpcy5sb2dnZXIubG9nKGDlt6XkvZzmtYHlt7LlrozmiJA6ICR7d29ya2Zsb3cuaWR9ICgke3dvcmtmbG93Lm1ldGFkYXRhLmFjdHVhbER1cmF0aW9ufW1zKWApXG4gICAgfSlcblxuICAgIGFzeW5jV29ya2Zsb3dFbmdpbmUub24oJ3dvcmtmbG93RmFpbGVkJywgKHdvcmtmbG93KSA9PiB7XG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcihg5bel5L2c5rWB5omn6KGM5aSx6LSlOiAke3dvcmtmbG93LmlkfWApXG4gICAgfSlcblxuICAgIGFzeW5jV29ya2Zsb3dFbmdpbmUub24oXG4gICAgICAnbm9kZUNvbXBsZXRlZCcsXG4gICAgICAoZGF0YTogeyBpbnN0YW5jZUlkOiBzdHJpbmc7IG5vZGVJZDogc3RyaW5nOyByZXN1bHQ6IGFueSB9KSA9PiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGDlt6XkvZzmtYHoioLngrnlrozmiJA6ICR7ZGF0YS5ub2RlSWR9YClcbiAgICAgIH1cbiAgICApXG5cbiAgICBhc3luY1dvcmtmbG93RW5naW5lLm9uKFxuICAgICAgJ25vZGVGYWlsZWQnLFxuICAgICAgKGRhdGE6IHsgaW5zdGFuY2VJZDogc3RyaW5nOyBub2RlSWQ6IHN0cmluZzsgZXJyb3I6IHN0cmluZyB9KSA9PiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oYOW3peS9nOa1geiKgueCueWksei0pTogJHtkYXRhLm5vZGVJZH1gLCBkYXRhLmVycm9yKVxuICAgICAgfVxuICAgIClcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IOW3peS9nOa1geeuoeeQhiA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiDkvb/nlKjpooTlrprkuYnmqKHmnb/liJvlu7rlt6XkvZzmtYHlrp7kvotcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVdvcmtmbG93RnJvbVRlbXBsYXRlKFxuICAgIHRlbXBsYXRlTmFtZTogc3RyaW5nLFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBvcHRpb25zOiBXb3JrZmxvd0V4ZWN1dGlvbk9wdGlvbnMgPSB7fVxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5wcmVkZWZpbmVkVGVtcGxhdGVzLmdldCh0ZW1wbGF0ZU5hbWUpXG4gICAgaWYgKCF0ZW1wbGF0ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGDpooTlrprkuYnmqKHmnb8gJyR7dGVtcGxhdGVOYW1lfScg5LiN5a2Y5ZyoYClcbiAgICB9XG5cbiAgICBjb25zdCBpbnN0YW5jZUlkID0gYXN5bmNXb3JrZmxvd0VuZ2luZS5pbnN0YW50aWF0ZVdvcmtmbG93KHRlbXBsYXRlLmlkLCBuYW1lLCBvcHRpb25zKVxuICAgIHRoaXMubG9nZ2VyLmxvZyhg5Z+65LqO5qih5p2/ICcke3RlbXBsYXRlTmFtZX0nIOWIm+W7uuW3peS9nOa1geWunuS+izogJHtpbnN0YW5jZUlkfWApXG5cbiAgICByZXR1cm4gaW5zdGFuY2VJZFxuICB9XG5cbiAgLyoqXG4gICAqIOWIm+W7uuiHquWumuS5ieW3peS9nOa1gVxuICAgKi9cbiAgYXN5bmMgY3JlYXRlQ3VzdG9tV29ya2Zsb3coXG4gICAgdGVtcGxhdGVEYXRhOiBPbWl0PFdvcmtmbG93VGVtcGxhdGUsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPixcbiAgICBpbnN0YW5jZU5hbWU6IHN0cmluZyxcbiAgICBvcHRpb25zOiBXb3JrZmxvd0V4ZWN1dGlvbk9wdGlvbnMgPSB7fVxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHRlbXBsYXRlSWQgPSBhc3luY1dvcmtmbG93RW5naW5lLmNyZWF0ZVRlbXBsYXRlKHRlbXBsYXRlRGF0YSlcbiAgICBjb25zdCBpbnN0YW5jZUlkID0gYXN5bmNXb3JrZmxvd0VuZ2luZS5pbnN0YW50aWF0ZVdvcmtmbG93KHRlbXBsYXRlSWQsIGluc3RhbmNlTmFtZSwgb3B0aW9ucylcblxuICAgIHRoaXMubG9nZ2VyLmxvZyhg5Yib5bu66Ieq5a6a5LmJ5bel5L2c5rWBOiAke2luc3RhbmNlSWR9YClcbiAgICByZXR1cm4gaW5zdGFuY2VJZFxuICB9XG5cbiAgLyoqXG4gICAqIOWQr+WKqOW3peS9nOa1gVxuICAgKi9cbiAgYXN5bmMgc3RhcnRXb3JrZmxvdyhpbnN0YW5jZUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBhd2FpdCBhc3luY1dvcmtmbG93RW5naW5lLnN0YXJ0V29ya2Zsb3coaW5zdGFuY2VJZClcbiAgICB0aGlzLmxvZ2dlci5sb2coYOW3peS9nOa1geW3suWQr+WKqDogJHtpbnN0YW5jZUlkfWApXG4gIH1cblxuICAvKipcbiAgICog5pqC5YGc5bel5L2c5rWBXG4gICAqL1xuICBhc3luYyBwYXVzZVdvcmtmbG93KGluc3RhbmNlSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IGFzeW5jV29ya2Zsb3dFbmdpbmUucGF1c2VXb3JrZmxvdyhpbnN0YW5jZUlkKVxuICAgIHRoaXMubG9nZ2VyLmxvZyhg5bel5L2c5rWB5bey5pqC5YGcOiAke2luc3RhbmNlSWR9YClcbiAgfVxuXG4gIC8qKlxuICAgKiDmgaLlpI3lt6XkvZzmtYFcbiAgICovXG4gIGFzeW5jIHJlc3VtZVdvcmtmbG93KGluc3RhbmNlSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IGFzeW5jV29ya2Zsb3dFbmdpbmUucmVzdW1lV29ya2Zsb3coaW5zdGFuY2VJZClcbiAgICB0aGlzLmxvZ2dlci5sb2coYOW3peS9nOa1geW3suaBouWkjTogJHtpbnN0YW5jZUlkfWApXG4gIH1cblxuICAvKipcbiAgICog5Y+W5raI5bel5L2c5rWBXG4gICAqL1xuICBhc3luYyBjYW5jZWxXb3JrZmxvdyhpbnN0YW5jZUlkOiBzdHJpbmcsIHJlYXNvbj86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IGFzeW5jV29ya2Zsb3dFbmdpbmUuY2FuY2VsV29ya2Zsb3coaW5zdGFuY2VJZCwgcmVhc29uKVxuICAgIHRoaXMubG9nZ2VyLmxvZyhg5bel5L2c5rWB5bey5Y+W5raIOiAke2luc3RhbmNlSWR9JHtyZWFzb24gPyBgIC0gJHtyZWFzb259YCA6ICcnfWApXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5bel5L2c5rWB54q25oCBXG4gICAqL1xuICBnZXRXb3JrZmxvd1N0YXR1cyhpbnN0YW5jZUlkOiBzdHJpbmcpOiBXb3JrZmxvd0luc3RhbmNlIHwgbnVsbCB7XG4gICAgcmV0dXJuIGFzeW5jV29ya2Zsb3dFbmdpbmUuZ2V0V29ya2Zsb3dTdGF0dXMoaW5zdGFuY2VJZClcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bmiYDmnInmtLvot4Plt6XkvZzmtYFcbiAgICovXG4gIGdldEFjdGl2ZVdvcmtmbG93cygpOiBXb3JrZmxvd0luc3RhbmNlW10ge1xuICAgIC8vIOi/memHjOmcgOimgeS7juW8leaTjuiOt+WPlua0u+i3g+W3peS9nOa1geWIl+ihqFxuICAgIC8vIOeUseS6juW8leaTjkFQSemZkOWItu+8jOaaguaXtui/lOWbnuepuuaVsOe7hFxuICAgIHJldHVybiBbXVxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0g5Y+Z5LqL5LiT55So5bel5L2c5rWBID09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIOWIm+W7uuaVheS6i+WIm+S9nOW3peS9nOa1gVxuICAgKi9cbiAgYXN5bmMgY3JlYXRlU3RvcnlDcmVhdGlvbldvcmtmbG93KFxuICAgIHN0b3J5SWQ6IHN0cmluZyxcbiAgICB1c2VyUHJvbXB0OiBzdHJpbmcsXG4gICAgb3B0aW9uczoge1xuICAgICAgZ2VucmU/OiBzdHJpbmdcbiAgICAgIGxlbmd0aD86ICdzaG9ydCcgfCAnbWVkaXVtJyB8ICdsb25nJ1xuICAgICAgc3R5bGU/OiBzdHJpbmdcbiAgICAgIGNoYXJhY3RlcnM/OiBudW1iZXJcbiAgICB9ID0ge31cbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCB3b3JrZmxvd05hbWUgPSBg5pWF5LqL5Yib5L2cOiAke3N0b3J5SWR9YFxuXG4gICAgY29uc3Qgd29ya2Zsb3dPcHRpb25zOiBXb3JrZmxvd0V4ZWN1dGlvbk9wdGlvbnMgPSB7XG4gICAgICBwcmlvcml0eTogJ2hpZ2gnLFxuICAgICAgdmFyaWFibGVzOiB7XG4gICAgICAgIHN0b3J5SWQsXG4gICAgICAgIHVzZXJQcm9tcHQsXG4gICAgICAgIGdlbnJlOiBvcHRpb25zLmdlbnJlIHx8ICdmYW50YXN5JyxcbiAgICAgICAgbGVuZ3RoOiBvcHRpb25zLmxlbmd0aCB8fCAnbWVkaXVtJyxcbiAgICAgICAgc3R5bGU6IG9wdGlvbnMuc3R5bGUgfHwgJ25hcnJhdGl2ZScsXG4gICAgICAgIGNoYXJhY3RlckNvdW50OiBvcHRpb25zLmNoYXJhY3RlcnMgfHwgMyxcbiAgICAgIH0sXG4gICAgICBpbnB1dERhdGE6IHtcbiAgICAgICAgcHJvbXB0OiB1c2VyUHJvbXB0LFxuICAgICAgICByZXF1aXJlbWVudHM6IG9wdGlvbnMsXG4gICAgICB9LFxuICAgIH1cblxuICAgIGNvbnN0IGluc3RhbmNlSWQgPSBhd2FpdCB0aGlzLmNyZWF0ZVdvcmtmbG93RnJvbVRlbXBsYXRlKFxuICAgICAgJ3N0b3J5LWNyZWF0aW9uJyxcbiAgICAgIHdvcmtmbG93TmFtZSxcbiAgICAgIHdvcmtmbG93T3B0aW9uc1xuICAgIClcblxuICAgIC8vIOiHquWKqOWQr+WKqOW3peS9nOa1gVxuICAgIGF3YWl0IHRoaXMuc3RhcnRXb3JrZmxvdyhpbnN0YW5jZUlkKVxuXG4gICAgcmV0dXJuIGluc3RhbmNlSWRcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rop5LoibLlvIDlj5Hlt6XkvZzmtYFcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUNoYXJhY3RlckRldmVsb3BtZW50V29ya2Zsb3coXG4gICAgY2hhcmFjdGVySWQ6IHN0cmluZyxcbiAgICBjaGFyYWN0ZXJDb25jZXB0OiBzdHJpbmcsXG4gICAgb3B0aW9uczoge1xuICAgICAgYXJjaGV0eXBlPzogc3RyaW5nXG4gICAgICBjb21wbGV4aXR5PzogJ3NpbXBsZScgfCAnZGV0YWlsZWQnIHwgJ2NvbXBsZXgnXG4gICAgICBiYWNrZ3JvdW5kPzogYW55XG4gICAgfSA9IHt9XG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3Qgd29ya2Zsb3dOYW1lID0gYOinkuiJsuW8gOWPkTogJHtjaGFyYWN0ZXJJZH1gXG5cbiAgICBjb25zdCB3b3JrZmxvd09wdGlvbnM6IFdvcmtmbG93RXhlY3V0aW9uT3B0aW9ucyA9IHtcbiAgICAgIHByaW9yaXR5OiAnbm9ybWFsJyxcbiAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICBjaGFyYWN0ZXJJZCxcbiAgICAgICAgY2hhcmFjdGVyQ29uY2VwdCxcbiAgICAgICAgYXJjaGV0eXBlOiBvcHRpb25zLmFyY2hldHlwZSB8fCAnaGVybycsXG4gICAgICAgIGNvbXBsZXhpdHk6IG9wdGlvbnMuY29tcGxleGl0eSB8fCAnZGV0YWlsZWQnLFxuICAgICAgfSxcbiAgICAgIGlucHV0RGF0YToge1xuICAgICAgICBjb25jZXB0OiBjaGFyYWN0ZXJDb25jZXB0LFxuICAgICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgfSxcbiAgICB9XG5cbiAgICBjb25zdCBpbnN0YW5jZUlkID0gYXdhaXQgdGhpcy5jcmVhdGVXb3JrZmxvd0Zyb21UZW1wbGF0ZShcbiAgICAgICdjaGFyYWN0ZXItZGV2ZWxvcG1lbnQnLFxuICAgICAgd29ya2Zsb3dOYW1lLFxuICAgICAgd29ya2Zsb3dPcHRpb25zXG4gICAgKVxuICAgIGF3YWl0IHRoaXMuc3RhcnRXb3JrZmxvdyhpbnN0YW5jZUlkKVxuXG4gICAgcmV0dXJuIGluc3RhbmNlSWRcbiAgfVxuXG4gIC8qKlxuICAgKiDliJvlu7rkuJbnlYzmnoTlu7rlt6XkvZzmtYFcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVdvcmxkQnVpbGRpbmdXb3JrZmxvdyhcbiAgICB3b3JsZElkOiBzdHJpbmcsXG4gICAgd29ybGRDb25jZXB0OiBzdHJpbmcsXG4gICAgb3B0aW9uczoge1xuICAgICAgc2NvcGU/OiAnc21hbGwnIHwgJ21lZGl1bScgfCAnbGFyZ2UnXG4gICAgICBnZW5yZT86IHN0cmluZ1xuICAgICAgdGVjaG5vbG9neUxldmVsPzogc3RyaW5nXG4gICAgICBtYWdpY0xldmVsPzogc3RyaW5nXG4gICAgfSA9IHt9XG4gICk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3Qgd29ya2Zsb3dOYW1lID0gYOS4lueVjOaehOW7ujogJHt3b3JsZElkfWBcblxuICAgIGNvbnN0IHdvcmtmbG93T3B0aW9uczogV29ya2Zsb3dFeGVjdXRpb25PcHRpb25zID0ge1xuICAgICAgcHJpb3JpdHk6ICdub3JtYWwnLFxuICAgICAgdmFyaWFibGVzOiB7XG4gICAgICAgIHdvcmxkSWQsXG4gICAgICAgIHdvcmxkQ29uY2VwdCxcbiAgICAgICAgc2NvcGU6IG9wdGlvbnMuc2NvcGUgfHwgJ21lZGl1bScsXG4gICAgICAgIGdlbnJlOiBvcHRpb25zLmdlbnJlIHx8ICdmYW50YXN5JyxcbiAgICAgICAgdGVjaG5vbG9neUxldmVsOiBvcHRpb25zLnRlY2hub2xvZ3lMZXZlbCB8fCAnbWVkaWV2YWwnLFxuICAgICAgICBtYWdpY0xldmVsOiBvcHRpb25zLm1hZ2ljTGV2ZWwgfHwgJ2hpZ2gnLFxuICAgICAgfSxcbiAgICAgIGlucHV0RGF0YToge1xuICAgICAgICBjb25jZXB0OiB3b3JsZENvbmNlcHQsXG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICB9LFxuICAgIH1cblxuICAgIGNvbnN0IGluc3RhbmNlSWQgPSBhd2FpdCB0aGlzLmNyZWF0ZVdvcmtmbG93RnJvbVRlbXBsYXRlKFxuICAgICAgJ3dvcmxkLWJ1aWxkaW5nJyxcbiAgICAgIHdvcmtmbG93TmFtZSxcbiAgICAgIHdvcmtmbG93T3B0aW9uc1xuICAgIClcbiAgICBhd2FpdCB0aGlzLnN0YXJ0V29ya2Zsb3coaW5zdGFuY2VJZClcblxuICAgIHJldHVybiBpbnN0YW5jZUlkXG4gIH1cblxuICAvKipcbiAgICog5Yib5bu65aSa5qih5oCB5Y+Z5LqL5bel5L2c5rWBXG4gICAqL1xuICBhc3luYyBjcmVhdGVNdWx0aW1vZGFsTmFycmF0aXZlV29ya2Zsb3coXG4gICAgbmFycmF0aXZlSWQ6IHN0cmluZyxcbiAgICBzY3JpcHQ6IHN0cmluZyxcbiAgICBtb2RhbGl0aWVzOiAoJ3RleHQnIHwgJ2ltYWdlJyB8ICdhdWRpbycgfCAndmlkZW8nKVtdID0gWyd0ZXh0JywgJ2ltYWdlJ11cbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCB3b3JrZmxvd05hbWUgPSBg5aSa5qih5oCB5Y+Z5LqLOiAke25hcnJhdGl2ZUlkfWBcblxuICAgIGNvbnN0IHdvcmtmbG93T3B0aW9uczogV29ya2Zsb3dFeGVjdXRpb25PcHRpb25zID0ge1xuICAgICAgcHJpb3JpdHk6ICdoaWdoJyxcbiAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICBuYXJyYXRpdmVJZCxcbiAgICAgICAgbW9kYWxpdGllczogbW9kYWxpdGllcy5qb2luKCcsJyksXG4gICAgICB9LFxuICAgICAgaW5wdXREYXRhOiB7XG4gICAgICAgIHNjcmlwdCxcbiAgICAgICAgbW9kYWxpdGllcyxcbiAgICAgIH0sXG4gICAgfVxuXG4gICAgY29uc3QgaW5zdGFuY2VJZCA9IGF3YWl0IHRoaXMuY3JlYXRlV29ya2Zsb3dGcm9tVGVtcGxhdGUoXG4gICAgICAnbXVsdGltb2RhbC1uYXJyYXRpdmUnLFxuICAgICAgd29ya2Zsb3dOYW1lLFxuICAgICAgd29ya2Zsb3dPcHRpb25zXG4gICAgKVxuICAgIGF3YWl0IHRoaXMuc3RhcnRXb3JrZmxvdyhpbnN0YW5jZUlkKVxuXG4gICAgcmV0dXJuIGluc3RhbmNlSWRcbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IOW3peS9nOa1geebkeaOpyA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiDojrflj5blt6XkvZzmtYHnu5/orqHkv6Hmga9cbiAgICovXG4gIGdldFdvcmtmbG93U3RhdHMoKTogYW55IHtcbiAgICByZXR1cm4gYXN5bmNXb3JrZmxvd0VuZ2luZS5nZXRFbmdpbmVTdGF0cygpXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5bel5L2c5rWB5oCn6IO95oyH5qCHXG4gICAqL1xuICBnZXRXb3JrZmxvd01ldHJpY3MoKTogYW55IHtcbiAgICBjb25zdCBzdGF0cyA9IHRoaXMuZ2V0V29ya2Zsb3dTdGF0cygpXG4gICAgY29uc3QgYWN0aXZlV29ya2Zsb3dzID0gdGhpcy5nZXRBY3RpdmVXb3JrZmxvd3MoKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN0YXRzLFxuICAgICAgYWN0aXZlV29ya2Zsb3dzOiBhY3RpdmVXb3JrZmxvd3MubGVuZ3RoLFxuICAgICAgYXZlcmFnZUNvbXBsZXRpb25UaW1lOiB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2VDb21wbGV0aW9uVGltZShhY3RpdmVXb3JrZmxvd3MpLFxuICAgICAgc3VjY2Vzc1JhdGU6IHRoaXMuY2FsY3VsYXRlU3VjY2Vzc1JhdGUoYWN0aXZlV29ya2Zsb3dzKSxcbiAgICAgIHJlc291cmNlVXRpbGl6YXRpb246IHRoaXMuY2FsY3VsYXRlUmVzb3VyY2VVdGlsaXphdGlvbigpLFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDorqHnrpflubPlnYflrozmiJDml7bpl7RcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlQXZlcmFnZUNvbXBsZXRpb25UaW1lKHdvcmtmbG93czogV29ya2Zsb3dJbnN0YW5jZVtdKTogbnVtYmVyIHtcbiAgICBjb25zdCBjb21wbGV0ZWRXb3JrZmxvd3MgPSB3b3JrZmxvd3MuZmlsdGVyKFxuICAgICAgKHcpID0+IHcuc3RhdHVzID09PSAnY29tcGxldGVkJyAmJiB3Lm1ldGFkYXRhLmFjdHVhbER1cmF0aW9uXG4gICAgKVxuXG4gICAgaWYgKGNvbXBsZXRlZFdvcmtmbG93cy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cbiAgICBjb25zdCB0b3RhbFRpbWUgPSBjb21wbGV0ZWRXb3JrZmxvd3MucmVkdWNlKFxuICAgICAgKHN1bSwgdykgPT4gc3VtICsgKHcubWV0YWRhdGEuYWN0dWFsRHVyYXRpb24gfHwgMCksXG4gICAgICAwXG4gICAgKVxuICAgIHJldHVybiB0b3RhbFRpbWUgLyBjb21wbGV0ZWRXb3JrZmxvd3MubGVuZ3RoXG4gIH1cblxuICAvKipcbiAgICog6K6h566X5oiQ5Yqf546HXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVN1Y2Nlc3NSYXRlKHdvcmtmbG93czogV29ya2Zsb3dJbnN0YW5jZVtdKTogbnVtYmVyIHtcbiAgICBpZiAod29ya2Zsb3dzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAgIGNvbnN0IHN1Y2Nlc3NmdWwgPSB3b3JrZmxvd3MuZmlsdGVyKCh3KSA9PiB3LnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpLmxlbmd0aFxuICAgIHJldHVybiBzdWNjZXNzZnVsIC8gd29ya2Zsb3dzLmxlbmd0aFxuICB9XG5cbiAgLyoqXG4gICAqIOiuoeeul+i1hOa6kOWIqeeUqOeOh1xuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVSZXNvdXJjZVV0aWxpemF0aW9uKCk6IGFueSB7XG4gICAgLy8g566A5YyW55qE6LWE5rqQ5Yip55So546H6K6h566XXG4gICAgY29uc3Qgc3RhdHMgPSB0aGlzLmdldFdvcmtmbG93U3RhdHMoKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGV4ZWN1dG9yVXRpbGl6YXRpb246IHN0YXRzLnJ1bm5pbmdJbnN0YW5jZXMgLyBNYXRoLm1heChzdGF0cy5ub2RlRXhlY3V0b3JzLCAxKSxcbiAgICAgIHF1ZXVlVXRpbGl6YXRpb246IHN0YXRzLnF1ZXVlZEluc3RhbmNlcyAvIE1hdGgubWF4KHN0YXRzLm1heENvbmN1cnJlbnRFeGVjdXRpb25zIHx8IDEwLCAxKSxcbiAgICAgIG1lbW9yeUVmZmljaWVuY3k6IDAuODUsIC8vIOaooeaLn+WAvFxuICAgIH1cbiAgfVxuXG4gIC8vID09PT09PT09PT09PT09PT09PT09IOaooeadv+euoeeQhiA9PT09PT09PT09PT09PT09PT09PVxuXG4gIC8qKlxuICAgKiDojrflj5blj6/nlKjmqKHmnb/liJfooahcbiAgICovXG4gIGdldEF2YWlsYWJsZVRlbXBsYXRlcygpOiBBcnJheTx7XG4gICAgaWQ6IHN0cmluZ1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgICB0YWdzOiBzdHJpbmdbXVxuICB9PiB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5wcmVkZWZpbmVkVGVtcGxhdGVzLnZhbHVlcygpKS5tYXAoKHRlbXBsYXRlKSA9PiAoe1xuICAgICAgaWQ6IHRlbXBsYXRlLmlkLFxuICAgICAgbmFtZTogdGVtcGxhdGUubmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiB0ZW1wbGF0ZS5kZXNjcmlwdGlvbixcbiAgICAgIHRhZ3M6IHRlbXBsYXRlLnRhZ3MsXG4gICAgfSkpXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5qih5p2/6K+m5oOFXG4gICAqL1xuICBnZXRUZW1wbGF0ZURldGFpbHModGVtcGxhdGVJZDogc3RyaW5nKTogV29ya2Zsb3dUZW1wbGF0ZSB8IG51bGwge1xuICAgIHJldHVybiBhc3luY1dvcmtmbG93RW5naW5lLmdldFRlbXBsYXRlKHRlbXBsYXRlSWQpXG4gIH1cblxuICAvLyA9PT09PT09PT09PT09PT09PT09PSDpq5jnuqflip/og70gPT09PT09PT09PT09PT09PT09PT1cblxuICAvKipcbiAgICog5Yib5bu65p2h5Lu25YiG5pSv5bel5L2c5rWBXG4gICAqL1xuICBhc3luYyBjcmVhdGVDb25kaXRpb25hbFdvcmtmbG93KFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBjb25kaXRpb25zOiBBcnJheTx7XG4gICAgICBjb25kaXRpb246IHN0cmluZ1xuICAgICAgd29ya2Zsb3dUZW1wbGF0ZTogc3RyaW5nXG4gICAgICBwYXJhbWV0ZXJzOiBhbnlcbiAgICB9PlxuICApOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIOWIm+W7uuS4gOS4quWGs+etluiKgueCue+8jOagueaNruadoeS7tumAieaLqeS4jeWQjOeahOWtkOW3peS9nOa1gVxuICAgIGNvbnN0IHRlbXBsYXRlOiBPbWl0PFdvcmtmbG93VGVtcGxhdGUsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPiA9IHtcbiAgICAgIG5hbWU6IGDmnaHku7blt6XkvZzmtYE6ICR7bmFtZX1gLFxuICAgICAgZGVzY3JpcHRpb246ICfln7rkuo7mnaHku7bliqjmgIHpgInmi6nmiafooYzot6/lvoTnmoTlt6XkvZzmtYEnLFxuICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIG5vZGVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2RlY2lzaW9uJyxcbiAgICAgICAgICB0eXBlOiAnZGVjaXNpb24nLFxuICAgICAgICAgIG5hbWU6ICfmnaHku7bliKTmlq0nLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn6K+E5Lyw5p2h5Lu25bm26YCJ5oup5omn6KGM6Lev5b6EJyxcbiAgICAgICAgICBjb25maWc6IHsgY29uZGl0aW9ucyB9LFxuICAgICAgICAgIGlucHV0czogW10sXG4gICAgICAgICAgb3V0cHV0czogY29uZGl0aW9ucy5tYXAoKGNvbmQsIGluZGV4KSA9PiAoe1xuICAgICAgICAgICAgaWQ6IGBicmFuY2gtJHtpbmRleH1gLFxuICAgICAgICAgICAgc291cmNlTm9kZUlkOiAnZGVjaXNpb24nLFxuICAgICAgICAgICAgdGFyZ2V0Tm9kZUlkOiBgc3Vid29ya2Zsb3ctJHtpbmRleH1gLFxuICAgICAgICAgICAgY29uZGl0aW9uOiB7IHR5cGU6ICdleHByZXNzaW9uJywgZXhwcmVzc2lvbjogY29uZC5jb25kaXRpb24gfSxcbiAgICAgICAgICB9KSksXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAxLFxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwLFxuICAgICAgICB9LFxuICAgICAgICAuLi5jb25kaXRpb25zLm1hcCgoY29uZCwgaW5kZXgpID0+ICh7XG4gICAgICAgICAgaWQ6IGBzdWJ3b3JrZmxvdy0ke2luZGV4fWAsXG4gICAgICAgICAgdHlwZTogJ3N1YnByb2Nlc3MnLFxuICAgICAgICAgIG5hbWU6IGDlrZDlt6XkvZzmtYEgJHtpbmRleCArIDF9YCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYOaJp+ihjCAke2NvbmQud29ya2Zsb3dUZW1wbGF0ZX0g5qih5p2/YCxcbiAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgIHN1YlRlbXBsYXRlOiBjb25kLndvcmtmbG93VGVtcGxhdGUsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiBjb25kLnBhcmFtZXRlcnMsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaWQ6IGBpbnB1dC0ke2luZGV4fWAsXG4gICAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogJ2RlY2lzaW9uJyxcbiAgICAgICAgICAgICAgdGFyZ2V0Tm9kZUlkOiBgc3Vid29ya2Zsb3ctJHtpbmRleH1gLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHsgaWQ6IGBvdXRwdXQtJHtpbmRleH1gLCBzb3VyY2VOb2RlSWQ6IGBzdWJ3b3JrZmxvdy0ke2luZGV4fWAsIHRhcmdldE5vZGVJZDogJ21lcmdlJyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAyLFxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwMCxcbiAgICAgICAgICBkZXBlbmRlbmNpZXM6IFsnZGVjaXNpb24nXSxcbiAgICAgICAgfSkpLFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdtZXJnZScsXG4gICAgICAgICAgdHlwZTogJ2dhdGV3YXknLFxuICAgICAgICAgIG5hbWU6ICfnu5PmnpzlkIjlubYnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAn5ZCI5bm25ZCE5YiG5pSv55qE5omn6KGM57uT5p6cJyxcbiAgICAgICAgICBjb25maWc6IHsgZ2F0ZXdheVR5cGU6ICdleGNsdXNpdmUnIH0sXG4gICAgICAgICAgaW5wdXRzOiBjb25kaXRpb25zLm1hcCgoXywgaW5kZXgpID0+ICh7XG4gICAgICAgICAgICBpZDogYG1lcmdlLWlucHV0LSR7aW5kZXh9YCxcbiAgICAgICAgICAgIHNvdXJjZU5vZGVJZDogYHN1YndvcmtmbG93LSR7aW5kZXh9YCxcbiAgICAgICAgICAgIHRhcmdldE5vZGVJZDogJ21lcmdlJyxcbiAgICAgICAgICB9KSksXG4gICAgICAgICAgb3V0cHV0czogW10sXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgcmV0cnlDb3VudDogMCxcbiAgICAgICAgICBtYXhSZXRyaWVzOiAxLFxuICAgICAgICAgIHRpbWVvdXQ6IDMwMDAwLFxuICAgICAgICAgIGRlcGVuZGVuY2llczogY29uZGl0aW9ucy5tYXAoKF8sIGluZGV4KSA9PiBgc3Vid29ya2Zsb3ctJHtpbmRleH1gKSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICBjb25uZWN0aW9uczogW10sXG4gICAgICBkZWZhdWx0Q29uZmlnOiB7XG4gICAgICAgIG1heFJldHJpZXM6IDIsXG4gICAgICAgIHRpbWVvdXQ6IDYwMDAwMCxcbiAgICAgICAgcHJpb3JpdHk6ICdub3JtYWwnLFxuICAgICAgfSxcbiAgICAgIHRhZ3M6IFsnY29uZGl0aW9uYWwnLCAnZHluYW1pYycsICdicmFuY2hpbmcnXSxcbiAgICB9XG5cbiAgICBjb25zdCBpbnN0YW5jZUlkID0gYXdhaXQgdGhpcy5jcmVhdGVDdXN0b21Xb3JrZmxvdyh0ZW1wbGF0ZSwgbmFtZSlcbiAgICByZXR1cm4gaW5zdGFuY2VJZFxuICB9XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT0g5YGl5bq35qOA5p+l5ZKM57u05oqkID09PT09PT09PT09PT09PT09PT09XG5cbiAgLyoqXG4gICAqIOWBpeW6t+ajgOafpVxuICAgKi9cbiAgYXN5bmMgaGVhbHRoQ2hlY2soKTogUHJvbWlzZTx7IHN0YXR1czogc3RyaW5nOyBkZXRhaWxzPzogYW55IH0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhdHMgPSB0aGlzLmdldFdvcmtmbG93U3RhdHMoKVxuICAgICAgY29uc3QgYWN0aXZlV29ya2Zsb3dzID0gdGhpcy5nZXRBY3RpdmVXb3JrZmxvd3MoKVxuXG4gICAgICBjb25zdCBpc3N1ZXMgPSBbXVxuXG4gICAgICAvLyDmo4Dmn6XmmK/lkKbmnInplb/ml7bpl7Tov5DooYznmoTlt6XkvZzmtYFcbiAgICAgIGNvbnN0IGxvbmdSdW5uaW5nID0gYWN0aXZlV29ya2Zsb3dzLmZpbHRlcigodykgPT4ge1xuICAgICAgICBpZiAoIXcuc3RhcnRUaW1lKSByZXR1cm4gZmFsc2VcbiAgICAgICAgY29uc3QgcnVudGltZSA9IERhdGUubm93KCkgLSB3LnN0YXJ0VGltZS5nZXRUaW1lKClcbiAgICAgICAgcmV0dXJuIHJ1bnRpbWUgPiAzMCAqIDYwICogMTAwMCAvLyAzMOWIhumSn1xuICAgICAgfSlcblxuICAgICAgaWYgKGxvbmdSdW5uaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaXNzdWVzLnB1c2goYCR7bG9uZ1J1bm5pbmcubGVuZ3RofSDkuKrlt6XkvZzmtYHov5DooYzml7bpl7Tov4fplb9gKVxuICAgICAgfVxuXG4gICAgICAvLyDmo4Dmn6XpmJ/liJfnp6/ljotcbiAgICAgIGlmIChzdGF0cy5xdWV1ZWRJbnN0YW5jZXMgPiAxMCkge1xuICAgICAgICBpc3N1ZXMucHVzaChg5bel5L2c5rWB6Zif5YiX56ev5Y6LOiAke3N0YXRzLnF1ZXVlZEluc3RhbmNlc30g5Liq5a6e5L6LYClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiBpc3N1ZXMubGVuZ3RoID4gMCA/ICd3YXJuaW5nJyA6ICdoZWFsdGh5JyxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIHN0YXRzLFxuICAgICAgICAgIGFjdGl2ZVdvcmtmbG93czogYWN0aXZlV29ya2Zsb3dzLmxlbmd0aCxcbiAgICAgICAgICBpc3N1ZXMsXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlLFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDmuIXnkIblt7LlrozmiJDnmoTlt6XkvZzmtYFcbiAgICovXG4gIGFzeW5jIGNsZWFudXBDb21wbGV0ZWRXb3JrZmxvd3Mob2xkZXJUaGFuSG91cnM6IG51bWJlciA9IDI0KTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBjb25zdCBjbGVhbmVkID0gYXN5bmNXb3JrZmxvd0VuZ2luZS5jbGVhbnVwQ29tcGxldGVkSW5zdGFuY2VzKG9sZGVyVGhhbkhvdXJzKVxuICAgIHRoaXMubG9nZ2VyLmxvZyhg5riF55CG5LqGICR7Y2xlYW5lZH0g5Liq6L+H5pyf55qE5bel5L2c5rWB5a6e5L6LYClcbiAgICByZXR1cm4gY2xlYW5lZFxuICB9XG59XG4iXSwidmVyc2lvbiI6M30=