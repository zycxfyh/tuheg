76eb8e1608e7bbaec58dc96f38e2e776
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createAiSettingsSchema = exports.baseUrlSchema = exports.roleNameSchema = exports.modelIdSchema = exports.apiKeySchema = exports.providerSchema = exports.allowedProviders = void 0;
// apps/backend/apps/nexus-engine/src/settings/dto/create-ai-settings.dto.ts
const zod_1 = require("zod");
exports.allowedProviders = [
    'DeepSeek',
    'Moonshot',
    'OpenAI',
    'Groq',
    'Ollama',
    'CustomOpenAICompatible',
];
exports.providerSchema = zod_1.z.enum(exports.allowedProviders, {
    message: 'Unsupported provider. Please select a known provider or CustomOpenAICompatible.',
});
exports.apiKeySchema = zod_1.z
    .string()
    .trim()
    .min(16, { message: 'API key must be at least 16 characters long.' })
    .max(200, { message: 'API key must be 200 characters or fewer.' })
    .regex(/^[A-Za-z0-9_\-.+=:/]+$/, {
    message: 'API key contains invalid characters.',
});
exports.modelIdSchema = zod_1.z
    .string()
    .trim()
    .min(1, { message: 'Model ID is required.' })
    .max(120, { message: 'Model ID must be 120 characters or fewer.' })
    .regex(/^[A-Za-z0-9._\-:/]+$/, {
    message: 'Model ID contains invalid characters.',
});
exports.roleNameSchema = zod_1.z
    .string()
    .trim()
    .min(1, { message: 'Role name cannot be empty.' })
    .max(40, { message: 'Role name must be 40 characters or fewer.' })
    .regex(/^[A-Za-z0-9:_-]+$/, {
    message: 'Role name can only include letters, numbers, colon, underscore, or hyphen.',
});
exports.baseUrlSchema = zod_1.z
    .string()
    .trim()
    .url({ message: 'Base URL must be a valid URL.' })
    .max(300, { message: 'Base URL must be 300 characters or fewer.' });
exports.createAiSettingsSchema = zod_1.z.object({
    provider: exports.providerSchema,
    apiKey: exports.apiKeySchema,
    modelId: exports.modelIdSchema,
    baseUrl: exports.baseUrlSchema.optional().nullable(),
    roles: zod_1.z
        .array(exports.roleNameSchema)
        .max(20, {
        message: 'No more than 20 roles can be assigned to a configuration.',
    })
        .optional(),
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFwxNjY2M1xcRGVza3RvcFxcdHVoZWdcXHBhY2thZ2VzXFxuYXJyYXRpdmUtZG9tYWluXFxzcmNcXGR0b1xcY3JlYXRlLWFpLXNldHRpbmdzLmR0by50cyIsIm1hcHBpbmdzIjoiOzs7QUFBQSw0RUFBNEU7QUFDNUUsNkJBQXVCO0FBRVYsUUFBQSxnQkFBZ0IsR0FBRztJQUM5QixVQUFVO0lBQ1YsVUFBVTtJQUNWLFFBQVE7SUFDUixNQUFNO0lBQ04sUUFBUTtJQUNSLHdCQUF3QjtDQUNoQixDQUFBO0FBRUcsUUFBQSxjQUFjLEdBQUcsT0FBQyxDQUFDLElBQUksQ0FBQyx3QkFBZ0IsRUFBRTtJQUNyRCxPQUFPLEVBQUUsaUZBQWlGO0NBQzNGLENBQUMsQ0FBQTtBQUVXLFFBQUEsWUFBWSxHQUFHLE9BQUM7S0FDMUIsTUFBTSxFQUFFO0tBQ1IsSUFBSSxFQUFFO0tBQ04sR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSw4Q0FBOEMsRUFBRSxDQUFDO0tBQ3BFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsRUFBRSxPQUFPLEVBQUUsMENBQTBDLEVBQUUsQ0FBQztLQUNqRSxLQUFLLENBQUMsd0JBQXdCLEVBQUU7SUFDL0IsT0FBTyxFQUFFLHNDQUFzQztDQUNoRCxDQUFDLENBQUE7QUFFUyxRQUFBLGFBQWEsR0FBRyxPQUFDO0tBQzNCLE1BQU0sRUFBRTtLQUNSLElBQUksRUFBRTtLQUNOLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRSxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsQ0FBQztLQUM1QyxHQUFHLENBQUMsR0FBRyxFQUFFLEVBQUUsT0FBTyxFQUFFLDJDQUEyQyxFQUFFLENBQUM7S0FDbEUsS0FBSyxDQUFDLHNCQUFzQixFQUFFO0lBQzdCLE9BQU8sRUFBRSx1Q0FBdUM7Q0FDakQsQ0FBQyxDQUFBO0FBRVMsUUFBQSxjQUFjLEdBQUcsT0FBQztLQUM1QixNQUFNLEVBQUU7S0FDUixJQUFJLEVBQUU7S0FDTixHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsT0FBTyxFQUFFLDRCQUE0QixFQUFFLENBQUM7S0FDakQsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSwyQ0FBMkMsRUFBRSxDQUFDO0tBQ2pFLEtBQUssQ0FBQyxtQkFBbUIsRUFBRTtJQUMxQixPQUFPLEVBQUUsNEVBQTRFO0NBQ3RGLENBQUMsQ0FBQTtBQUVTLFFBQUEsYUFBYSxHQUFHLE9BQUM7S0FDM0IsTUFBTSxFQUFFO0tBQ1IsSUFBSSxFQUFFO0tBQ04sR0FBRyxDQUFDLEVBQUUsT0FBTyxFQUFFLCtCQUErQixFQUFFLENBQUM7S0FDakQsR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLE9BQU8sRUFBRSwyQ0FBMkMsRUFBRSxDQUFDLENBQUE7QUFFeEQsUUFBQSxzQkFBc0IsR0FBRyxPQUFDLENBQUMsTUFBTSxDQUFDO0lBQzdDLFFBQVEsRUFBRSxzQkFBYztJQUN4QixNQUFNLEVBQUUsb0JBQVk7SUFDcEIsT0FBTyxFQUFFLHFCQUFhO0lBQ3RCLE9BQU8sRUFBRSxxQkFBYSxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsRUFBRTtJQUM1QyxLQUFLLEVBQUUsT0FBQztTQUNMLEtBQUssQ0FBQyxzQkFBYyxDQUFDO1NBQ3JCLEdBQUcsQ0FBQyxFQUFFLEVBQUU7UUFDUCxPQUFPLEVBQUUsMkRBQTJEO0tBQ3JFLENBQUM7U0FDRCxRQUFRLEVBQUU7Q0FDZCxDQUFDLENBQUEiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFwxNjY2M1xcRGVza3RvcFxcdHVoZWdcXHBhY2thZ2VzXFxuYXJyYXRpdmUtZG9tYWluXFxzcmNcXGR0b1xcY3JlYXRlLWFpLXNldHRpbmdzLmR0by50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhcHBzL2JhY2tlbmQvYXBwcy9uZXh1cy1lbmdpbmUvc3JjL3NldHRpbmdzL2R0by9jcmVhdGUtYWktc2V0dGluZ3MuZHRvLnRzXG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJ1xuXG5leHBvcnQgY29uc3QgYWxsb3dlZFByb3ZpZGVycyA9IFtcbiAgJ0RlZXBTZWVrJyxcbiAgJ01vb25zaG90JyxcbiAgJ09wZW5BSScsXG4gICdHcm9xJyxcbiAgJ09sbGFtYScsXG4gICdDdXN0b21PcGVuQUlDb21wYXRpYmxlJyxcbl0gYXMgY29uc3RcblxuZXhwb3J0IGNvbnN0IHByb3ZpZGVyU2NoZW1hID0gei5lbnVtKGFsbG93ZWRQcm92aWRlcnMsIHtcbiAgbWVzc2FnZTogJ1Vuc3VwcG9ydGVkIHByb3ZpZGVyLiBQbGVhc2Ugc2VsZWN0IGEga25vd24gcHJvdmlkZXIgb3IgQ3VzdG9tT3BlbkFJQ29tcGF0aWJsZS4nLFxufSlcblxuZXhwb3J0IGNvbnN0IGFwaUtleVNjaGVtYSA9IHpcbiAgLnN0cmluZygpXG4gIC50cmltKClcbiAgLm1pbigxNiwgeyBtZXNzYWdlOiAnQVBJIGtleSBtdXN0IGJlIGF0IGxlYXN0IDE2IGNoYXJhY3RlcnMgbG9uZy4nIH0pXG4gIC5tYXgoMjAwLCB7IG1lc3NhZ2U6ICdBUEkga2V5IG11c3QgYmUgMjAwIGNoYXJhY3RlcnMgb3IgZmV3ZXIuJyB9KVxuICAucmVnZXgoL15bQS1aYS16MC05X1xcLS4rPTovXSskLywge1xuICAgIG1lc3NhZ2U6ICdBUEkga2V5IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycy4nLFxuICB9KVxuXG5leHBvcnQgY29uc3QgbW9kZWxJZFNjaGVtYSA9IHpcbiAgLnN0cmluZygpXG4gIC50cmltKClcbiAgLm1pbigxLCB7IG1lc3NhZ2U6ICdNb2RlbCBJRCBpcyByZXF1aXJlZC4nIH0pXG4gIC5tYXgoMTIwLCB7IG1lc3NhZ2U6ICdNb2RlbCBJRCBtdXN0IGJlIDEyMCBjaGFyYWN0ZXJzIG9yIGZld2VyLicgfSlcbiAgLnJlZ2V4KC9eW0EtWmEtejAtOS5fXFwtOi9dKyQvLCB7XG4gICAgbWVzc2FnZTogJ01vZGVsIElEIGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycy4nLFxuICB9KVxuXG5leHBvcnQgY29uc3Qgcm9sZU5hbWVTY2hlbWEgPSB6XG4gIC5zdHJpbmcoKVxuICAudHJpbSgpXG4gIC5taW4oMSwgeyBtZXNzYWdlOiAnUm9sZSBuYW1lIGNhbm5vdCBiZSBlbXB0eS4nIH0pXG4gIC5tYXgoNDAsIHsgbWVzc2FnZTogJ1JvbGUgbmFtZSBtdXN0IGJlIDQwIGNoYXJhY3RlcnMgb3IgZmV3ZXIuJyB9KVxuICAucmVnZXgoL15bQS1aYS16MC05Ol8tXSskLywge1xuICAgIG1lc3NhZ2U6ICdSb2xlIG5hbWUgY2FuIG9ubHkgaW5jbHVkZSBsZXR0ZXJzLCBudW1iZXJzLCBjb2xvbiwgdW5kZXJzY29yZSwgb3IgaHlwaGVuLicsXG4gIH0pXG5cbmV4cG9ydCBjb25zdCBiYXNlVXJsU2NoZW1hID0gelxuICAuc3RyaW5nKClcbiAgLnRyaW0oKVxuICAudXJsKHsgbWVzc2FnZTogJ0Jhc2UgVVJMIG11c3QgYmUgYSB2YWxpZCBVUkwuJyB9KVxuICAubWF4KDMwMCwgeyBtZXNzYWdlOiAnQmFzZSBVUkwgbXVzdCBiZSAzMDAgY2hhcmFjdGVycyBvciBmZXdlci4nIH0pXG5cbmV4cG9ydCBjb25zdCBjcmVhdGVBaVNldHRpbmdzU2NoZW1hID0gei5vYmplY3Qoe1xuICBwcm92aWRlcjogcHJvdmlkZXJTY2hlbWEsXG4gIGFwaUtleTogYXBpS2V5U2NoZW1hLFxuICBtb2RlbElkOiBtb2RlbElkU2NoZW1hLFxuICBiYXNlVXJsOiBiYXNlVXJsU2NoZW1hLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgcm9sZXM6IHpcbiAgICAuYXJyYXkocm9sZU5hbWVTY2hlbWEpXG4gICAgLm1heCgyMCwge1xuICAgICAgbWVzc2FnZTogJ05vIG1vcmUgdGhhbiAyMCByb2xlcyBjYW4gYmUgYXNzaWduZWQgdG8gYSBjb25maWd1cmF0aW9uLicsXG4gICAgfSlcbiAgICAub3B0aW9uYWwoKSxcbn0pXG5cbmV4cG9ydCB0eXBlIENyZWF0ZUFpU2V0dGluZ3NEdG8gPSB6LmluZmVyPHR5cGVvZiBjcmVhdGVBaVNldHRpbmdzU2NoZW1hPlxuIl0sInZlcnNpb24iOjN9