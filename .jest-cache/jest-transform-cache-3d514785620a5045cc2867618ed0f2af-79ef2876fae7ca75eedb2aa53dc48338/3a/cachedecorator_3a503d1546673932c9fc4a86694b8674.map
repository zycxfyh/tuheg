{"file":"C:\\Users\\16663\\Desktop\\tuheg\\packages\\common-backend\\src\\cache\\cache.decorator.ts","mappings":";AAAA,6DAA6D;AAC7D,qBAAqB;;;AAErB,2CAA4C;AAE5C;;;GAGG;AACU,QAAA,SAAS,GAAG,WAAW,CAAA;AAEpC;;;GAGG;AACU,QAAA,SAAS,GAAG,WAAW,CAAA;AAepC;;;;;;;;;;;;GAYG;AACI,MAAM,KAAK,GAAG,CAAC,UAAiC,EAAE,EAAE,EAAE;IAC3D,OAAO,CAAC,MAAe,EAAE,WAAmB,EAAE,UAA8B,EAAE,EAAE;QAC9E,IAAA,oBAAW,EAAC,iBAAS,EAAE,OAAO,CAAC,GAAG,IAAI,WAAW,CAAC,CAAC,MAAgB,EAAE,WAAW,EAAE,UAAU,CAAC,CAAA;QAC7F,IAAA,oBAAW,EAAC,iBAAS,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC,MAAgB,EAAE,WAAW,EAAE,UAAU,CAAC,CAAA;QAC9E,IAAA,oBAAW,EAAC,cAAc,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC,MAAgB,EAAE,WAAW,EAAE,UAAU,CAAC,CAAA;IACxF,CAAC,CAAA;AACH,CAAC,CAAA;AANY,QAAA,KAAK,SAMjB","names":[],"sources":["C:\\Users\\16663\\Desktop\\tuheg\\packages\\common-backend\\src\\cache\\cache.decorator.ts"],"sourcesContent":["// 文件路径: packages/common-backend/src/cache/cache.decorator.ts\n// 核心理念: 缓存装饰器，简化缓存使用\n\nimport { SetMetadata } from '@nestjs/common'\n\n/**\n * @constant CACHE_KEY\n * @description 缓存键元数据键\n */\nexport const CACHE_KEY = 'cache:key'\n\n/**\n * @constant CACHE_TTL\n * @description 缓存 TTL 元数据键\n */\nexport const CACHE_TTL = 'cache:ttl'\n\n/**\n * @interface CacheOptions\n * @description 缓存装饰器选项\n */\nexport interface CacheDecoratorOptions {\n  /** 缓存键（支持参数占位符，如 ':id'） */\n  key?: string\n  /** TTL（秒） */\n  ttl?: number\n  /** 缓存键前缀 */\n  prefix?: string\n}\n\n/**\n * @decorator Cache\n * @description 缓存装饰器\n *\n * @example\n * ```typescript\n * @Cache({ key: 'user::id', ttl: 3600 })\n * @Get(':id')\n * async findOne(@Param('id') id: string) {\n *   return this.service.findOne(id);\n * }\n * ```\n */\nexport const Cache = (options: CacheDecoratorOptions = {}) => {\n  return (target: unknown, propertyKey: string, descriptor: PropertyDescriptor) => {\n    SetMetadata(CACHE_KEY, options.key || propertyKey)(target as object, propertyKey, descriptor)\n    SetMetadata(CACHE_TTL, options.ttl)(target as object, propertyKey, descriptor)\n    SetMetadata('cache:prefix', options.prefix)(target as object, propertyKey, descriptor)\n  }\n}\n"],"version":3}