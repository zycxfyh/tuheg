{"file":"C:\\Users\\16663\\Desktop\\tuheg\\packages\\common-backend\\src\\utils\\error-utils.ts","mappings":";AAAA,yDAAyD;AACzD,6BAA6B;;AAmB7B,0CAwBC;AAQD,sCAKC;AASD,sCAKC;AApED;;;;;;;;;;;;;;;;GAgBG;AACH,SAAgB,eAAe,CAC7B,KAAc,EACd,cAAc,GAAG,2BAA2B;IAE5C,4BAA4B;IAC5B,IAAI,KAAK,YAAY,KAAK,EAAE,CAAC;QAC3B,OAAO,KAAK,CAAC,OAAO,CAAA;IACtB,CAAC;IAED,cAAc;IACd,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE,CAAC;QAC9B,OAAO,KAAK,CAAA;IACd,CAAC;IAED,qBAAqB;IACrB,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,SAAS,IAAI,KAAK,EAAE,CAAC;QAC7D,MAAM,OAAO,GAAI,KAA8B,CAAC,OAAO,CAAA;QACvD,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE,CAAC;YAChC,OAAO,OAAO,CAAA;QAChB,CAAC;IACH,CAAC;IAED,aAAa;IACb,OAAO,cAAc,CAAA;AACvB,CAAC;AAED;;;;;GAKG;AACH,SAAgB,aAAa,CAAC,KAAc;IAC1C,IAAI,KAAK,YAAY,KAAK,EAAE,CAAC;QAC3B,OAAO,KAAK,CAAC,KAAK,CAAA;IACpB,CAAC;IACD,OAAO,SAAS,CAAA;AAClB,CAAC;AAED;;;;;;GAMG;AACH,SAAgB,aAAa,CAC3B,KAAc,EACd,UAAqC;IAErC,OAAO,KAAK,YAAY,UAAU,CAAA;AACpC,CAAC","names":[],"sources":["C:\\Users\\16663\\Desktop\\tuheg\\packages\\common-backend\\src\\utils\\error-utils.ts"],"sourcesContent":["// 文件路径: packages/common-backend/src/utils/error-utils.ts\r\n// 描述: 错误处理工具函数，提供统一的错误消息提取逻辑\r\n\r\n/**\r\n * 从未知类型的错误对象中提取错误消息\r\n * \r\n * @param error - 未知类型的错误对象\r\n * @param defaultMessage - 默认错误消息（当无法提取消息时使用）\r\n * @returns 错误消息字符串\r\n * \r\n * @example\r\n * ```typescript\r\n * try {\r\n *   throw new Error('Something went wrong')\r\n * } catch (error) {\r\n *   const message = getErrorMessage(error, 'Unknown error')\r\n *   console.log(message) // 'Something went wrong'\r\n * }\r\n * ```\r\n */\r\nexport function getErrorMessage(\r\n  error: unknown,\r\n  defaultMessage = 'An unknown error occurred'\r\n): string {\r\n  // 如果是 Error 实例，直接返回 message\r\n  if (error instanceof Error) {\r\n    return error.message\r\n  }\r\n  \r\n  // 如果是字符串，直接返回\r\n  if (typeof error === 'string') {\r\n    return error\r\n  }\r\n  \r\n  // 如果是对象且有 message 属性\r\n  if (error && typeof error === 'object' && 'message' in error) {\r\n    const message = (error as { message: unknown }).message\r\n    if (typeof message === 'string') {\r\n      return message\r\n    }\r\n  }\r\n  \r\n  // 其他情况返回默认消息\r\n  return defaultMessage\r\n}\r\n\r\n/**\r\n * 从未知类型的错误对象中提取堆栈跟踪\r\n * \r\n * @param error - 未知类型的错误对象\r\n * @returns 堆栈跟踪字符串或 undefined\r\n */\r\nexport function getErrorStack(error: unknown): string | undefined {\r\n  if (error instanceof Error) {\r\n    return error.stack\r\n  }\r\n  return undefined\r\n}\r\n\r\n/**\r\n * 检查错误是否为特定类型\r\n * \r\n * @param error - 未知类型的错误对象\r\n * @param errorClass - 错误类的构造函数\r\n * @returns 是否为指定类型的错误\r\n */\r\nexport function isErrorOfType<T extends Error>(\r\n  error: unknown,\r\n  errorClass: new (...args: any[]) => T\r\n): error is T {\r\n  return error instanceof errorClass\r\n}\r\n\r\n"],"version":3}