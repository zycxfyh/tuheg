#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# è¿è¡Œå¥åº·æ£€æŸ¥
echo "ğŸ¥ Health check..."
node scripts/health-check.js || exit 1

# è¿è¡Œä¸¥æ ¼linting
echo "ğŸ”§ Strict linting..."
pnpm run lint:strict || exit 1

# è¿è¡Œæ ¼å¼æ£€æŸ¥
echo "ğŸ“ Format check..."
pnpm run format:check || exit 1

# è¿è¡Œä¸¥æ ¼TypeScriptæ£€æŸ¥
echo "ğŸ”· TypeScript strict check..."
pnpm run type-check:strict || exit 1

# è¿è¡Œå¿«é€Ÿå¤±è´¥æµ‹è¯•
echo "ğŸ§ª Fail-fast tests..."
pnpm run test:fail-fast || exit 1

# è¿è¡Œå®‰å…¨å®¡è®¡
echo "ğŸ”’ Security audit..."
pnpm audit --audit-level high || exit 1

echo "âœ… All pre-commit checks passed!"