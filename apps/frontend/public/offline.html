<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç¦»çº¿æ¨¡å¼ - åˆ›ä¸–æ˜Ÿç¯</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #ffffff;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .offline-container {
      text-align: center;
      max-width: 500px;
      padding: 40px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }

    .offline-icon {
      font-size: 4rem;
      margin-bottom: 20px;
      opacity: 0.8;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 16px;
      background: linear-gradient(45deg, #00d4ff, #09c);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    p {
      font-size: 1.1rem;
      line-height: 1.6;
      margin-bottom: 30px;
      opacity: 0.9;
    }

    .retry-btn {
      background: linear-gradient(45deg, #00d4ff, #09c);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 25px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 20px;
    }

    .retry-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0, 212, 255, 0.3);
    }

    .features {
      margin-top: 40px;
      text-align: left;
    }

    .features h3 {
      font-size: 1.2rem;
      margin-bottom: 16px;
      color: #00d4ff;
    }

    .feature-list {
      list-style: none;
      padding: 0;
    }

    .feature-list li {
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
    }

    .feature-list li:last-child {
      border-bottom: none;
    }

    .feature-list li:before {
      content: "âœ¨";
      margin-right: 12px;
      font-size: 1.1rem;
    }

    .status {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(0, 0, 0, 0.8);
      color: #00d4ff;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-family: monospace;
    }

    @media (max-width: 600px) {
      .offline-container {
        padding: 30px 20px;
      }

      h1 {
        font-size: 1.5rem;
      }

      .offline-icon {
        font-size: 3rem;
      }
    }
  </style>
</head>
<body>
  <div class="offline-container">
    <div class="offline-icon">ğŸŒŸ</div>
    <h1>ç½‘ç»œè¿æ¥å·²æ–­å¼€</h1>
    <p>
      çœ‹èµ·æ¥æ‚¨æš‚æ—¶å¤±å»äº†ç½‘ç»œè¿æ¥ã€‚ä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼åˆ›ä¸–æ˜Ÿç¯çš„å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½å¯ä»¥åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ä½¿ç”¨ã€‚
    </p>

    <button class="retry-btn" onclick="window.location.reload()">
      ğŸ”„ é‡æ–°è¿æ¥
    </button>

    <div class="features">
      <h3>ç¦»çº¿å¯ç”¨åŠŸèƒ½ï¼š</h3>
      <ul class="feature-list">
        <li>æŸ¥çœ‹å·²ç¼“å­˜çš„å™äº‹ä½œå“</li>
        <li>ç¼–è¾‘æœ¬åœ°ä¿å­˜çš„è‰ç¨¿</li>
        <li>ä½¿ç”¨å·²ä¸‹è½½çš„æ’ä»¶</li>
        <li>æµè§ˆæœ¬åœ°å¸®åŠ©æ–‡æ¡£</li>
        <li>è®¿é—®æœ€è¿‘çš„å†å²è®°å½•</li>
      </ul>
    </div>
  </div>

  <div class="status" id="connection-status">
    æ­£åœ¨æ£€æµ‹ç½‘ç»œè¿æ¥...
  </div>

  <script>
    // æ£€æµ‹ç½‘ç»œè¿æ¥çŠ¶æ€
    function updateConnectionStatus() {
      const statusElement = document.getElementById('connection-status')

      if (navigator.onLine) {
        statusElement.textContent = 'ğŸŸ¢ ç½‘ç»œå·²è¿æ¥'
        statusElement.style.color = '#4caf50'
      } else {
        statusElement.textContent = 'ğŸ”´ ç½‘ç»œå·²æ–­å¼€'
        statusElement.style.color = '#f44336'
      }
    }

    // ç›‘å¬ç½‘ç»œçŠ¶æ€å˜åŒ–
    window.addEventListener('online', updateConnectionStatus)
    window.addEventListener('offline', updateConnectionStatus)

    // åˆå§‹æ£€æµ‹
    updateConnectionStatus()

    // å®šæœŸæ£€æŸ¥è¿æ¥
    setInterval(() => {
      if (navigator.onLine) {
        // å°è¯•pingæœåŠ¡å™¨
        fetch('/api/health', {
          method: 'HEAD',
          cache: 'no-cache'
        })
        .then(() => {
          document.getElementById('connection-status').textContent = 'ğŸŸ¢ æœåŠ¡å™¨è¿æ¥æ­£å¸¸'
        })
        .catch(() => {
          document.getElementById('connection-status').textContent = 'ğŸŸ¡ æœ¬åœ°ç½‘ç»œæ­£å¸¸ï¼ŒæœåŠ¡å™¨æ— å“åº”'
        })
      }
    }, 30000) // æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡

    // æ³¨å†ŒService Workeræ›´æ–°ç›‘å¬
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.addEventListener('message', (event) => {
        if (event.data && event.data.type === 'UPDATE_AVAILABLE') {
          const updateBtn = document.createElement('button')
          updateBtn.textContent = 'ğŸ“¦ æ›´æ–°åº”ç”¨'
          updateBtn.className = 'retry-btn'
          updateBtn.style.marginLeft = '10px'
          updateBtn.onclick = () => window.location.reload()

          const container = document.querySelector('.offline-container p')
          container.appendChild(updateBtn)
        }
      })
    }

    // æ·»åŠ ä¸€äº›äº¤äº’æ•ˆæœ
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.querySelector('.offline-container')

      // æ·»åŠ é¼ æ ‡æ‚¬åœæ•ˆæœ
      container.addEventListener('mouseenter', () => {
        container.style.transform = 'translateY(-5px)'
        container.style.transition = 'transform 0.3s ease'
      })

      container.addEventListener('mouseleave', () => {
        container.style.transform = 'translateY(0)'
      })

      // æ·»åŠ é”®ç›˜å¿«æ·é”®
      document.addEventListener('keydown', (event) => {
        if (event.key === 'r' || event.key === 'R') {
          window.location.reload()
        }
        if (event.key === 'Escape') {
          // å¯ä»¥æ·»åŠ å…¶ä»–å¿«æ·æ“ä½œ
        }
      })
    })
  </script>
</body>
</html>
