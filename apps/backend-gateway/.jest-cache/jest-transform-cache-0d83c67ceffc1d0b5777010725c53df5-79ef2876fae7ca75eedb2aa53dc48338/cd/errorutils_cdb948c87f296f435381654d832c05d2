697b79d77236a11f0b1f3407e278fcba
"use strict";
// 文件路径: packages/common-backend/src/utils/error-utils.ts
// 描述: 错误处理工具函数，提供统一的错误消息提取逻辑
Object.defineProperty(exports, "__esModule", { value: true });
exports.getErrorMessage = getErrorMessage;
exports.getErrorStack = getErrorStack;
exports.isErrorOfType = isErrorOfType;
/**
 * 从未知类型的错误对象中提取错误消息
 *
 * @param error - 未知类型的错误对象
 * @param defaultMessage - 默认错误消息（当无法提取消息时使用）
 * @returns 错误消息字符串
 *
 * @example
 * ```typescript
 * try {
 *   throw new Error('Something went wrong')
 * } catch (error) {
 *   const message = getErrorMessage(error, 'Unknown error')
 *   console.log(message) // 'Something went wrong'
 * }
 * ```
 */
function getErrorMessage(error, defaultMessage = 'An unknown error occurred') {
    // 如果是 Error 实例，直接返回 message
    if (error instanceof Error) {
        return error.message;
    }
    // 如果是字符串，直接返回
    if (typeof error === 'string') {
        return error;
    }
    // 如果是对象且有 message 属性
    if (error && typeof error === 'object' && 'message' in error) {
        const message = error.message;
        if (typeof message === 'string') {
            return message;
        }
    }
    // 其他情况返回默认消息
    return defaultMessage;
}
/**
 * 从未知类型的错误对象中提取堆栈跟踪
 *
 * @param error - 未知类型的错误对象
 * @returns 堆栈跟踪字符串或 undefined
 */
function getErrorStack(error) {
    if (error instanceof Error) {
        return error.stack;
    }
    return undefined;
}
/**
 * 检查错误是否为特定类型
 *
 * @param error - 未知类型的错误对象
 * @param errorClass - 错误类的构造函数
 * @returns 是否为指定类型的错误
 */
function isErrorOfType(error, errorClass) {
    return error instanceof errorClass;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFwxNjY2M1xcRGVza3RvcFxcdHVoZWdcXHBhY2thZ2VzXFxjb21tb24tYmFja2VuZFxcc3JjXFx1dGlsc1xcZXJyb3ItdXRpbHMudHMiLCJtYXBwaW5ncyI6IjtBQUFBLHlEQUF5RDtBQUN6RCw2QkFBNkI7O0FBbUI3QiwwQ0F3QkM7QUFRRCxzQ0FLQztBQVNELHNDQUtDO0FBcEVEOzs7Ozs7Ozs7Ozs7Ozs7O0dBZ0JHO0FBQ0gsU0FBZ0IsZUFBZSxDQUM3QixLQUFjLEVBQ2QsY0FBYyxHQUFHLDJCQUEyQjtJQUU1Qyw0QkFBNEI7SUFDNUIsSUFBSSxLQUFLLFlBQVksS0FBSyxFQUFFLENBQUM7UUFDM0IsT0FBTyxLQUFLLENBQUMsT0FBTyxDQUFBO0lBQ3RCLENBQUM7SUFFRCxjQUFjO0lBQ2QsSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLEVBQUUsQ0FBQztRQUM5QixPQUFPLEtBQUssQ0FBQTtJQUNkLENBQUM7SUFFRCxxQkFBcUI7SUFDckIsSUFBSSxLQUFLLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxJQUFJLFNBQVMsSUFBSSxLQUFLLEVBQUUsQ0FBQztRQUM3RCxNQUFNLE9BQU8sR0FBSSxLQUE4QixDQUFDLE9BQU8sQ0FBQTtRQUN2RCxJQUFJLE9BQU8sT0FBTyxLQUFLLFFBQVEsRUFBRSxDQUFDO1lBQ2hDLE9BQU8sT0FBTyxDQUFBO1FBQ2hCLENBQUM7SUFDSCxDQUFDO0lBRUQsYUFBYTtJQUNiLE9BQU8sY0FBYyxDQUFBO0FBQ3ZCLENBQUM7QUFFRDs7Ozs7R0FLRztBQUNILFNBQWdCLGFBQWEsQ0FBQyxLQUFjO0lBQzFDLElBQUksS0FBSyxZQUFZLEtBQUssRUFBRSxDQUFDO1FBQzNCLE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQTtJQUNwQixDQUFDO0lBQ0QsT0FBTyxTQUFTLENBQUE7QUFDbEIsQ0FBQztBQUVEOzs7Ozs7R0FNRztBQUNILFNBQWdCLGFBQWEsQ0FDM0IsS0FBYyxFQUNkLFVBQXFDO0lBRXJDLE9BQU8sS0FBSyxZQUFZLFVBQVUsQ0FBQTtBQUNwQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcMTY2NjNcXERlc2t0b3BcXHR1aGVnXFxwYWNrYWdlc1xcY29tbW9uLWJhY2tlbmRcXHNyY1xcdXRpbHNcXGVycm9yLXV0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIOaWh+S7tui3r+W+hDogcGFja2FnZXMvY29tbW9uLWJhY2tlbmQvc3JjL3V0aWxzL2Vycm9yLXV0aWxzLnRzXG4vLyDmj4/ov7A6IOmUmeivr+WkhOeQhuW3peWFt+WHveaVsO+8jOaPkOS+m+e7n+S4gOeahOmUmeivr+a2iOaBr+aPkOWPlumAu+i+kVxuXG4vKipcbiAqIOS7juacquefpeexu+Wei+eahOmUmeivr+WvueixoeS4reaPkOWPlumUmeivr+a2iOaBr1xuICpcbiAqIEBwYXJhbSBlcnJvciAtIOacquefpeexu+Wei+eahOmUmeivr+WvueixoVxuICogQHBhcmFtIGRlZmF1bHRNZXNzYWdlIC0g6buY6K6k6ZSZ6K+v5raI5oGv77yI5b2T5peg5rOV5o+Q5Y+W5raI5oGv5pe25L2/55So77yJXG4gKiBAcmV0dXJucyDplJnor6/mtojmga/lrZfnrKbkuLJcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogdHJ5IHtcbiAqICAgdGhyb3cgbmV3IEVycm9yKCdTb21ldGhpbmcgd2VudCB3cm9uZycpXG4gKiB9IGNhdGNoIChlcnJvcikge1xuICogICBjb25zdCBtZXNzYWdlID0gZ2V0RXJyb3JNZXNzYWdlKGVycm9yLCAnVW5rbm93biBlcnJvcicpXG4gKiAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpIC8vICdTb21ldGhpbmcgd2VudCB3cm9uZydcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXJyb3JNZXNzYWdlKFxuICBlcnJvcjogdW5rbm93bixcbiAgZGVmYXVsdE1lc3NhZ2UgPSAnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCdcbik6IHN0cmluZyB7XG4gIC8vIOWmguaenOaYryBFcnJvciDlrp7kvovvvIznm7TmjqXov5Tlm54gbWVzc2FnZVxuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgIHJldHVybiBlcnJvci5tZXNzYWdlXG4gIH1cblxuICAvLyDlpoLmnpzmmK/lrZfnrKbkuLLvvIznm7TmjqXov5Tlm55cbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZXJyb3JcbiAgfVxuXG4gIC8vIOWmguaenOaYr+WvueixoeS4lOaciSBtZXNzYWdlIOWxnuaAp1xuICBpZiAoZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiAnbWVzc2FnZScgaW4gZXJyb3IpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gKGVycm9yIGFzIHsgbWVzc2FnZTogdW5rbm93biB9KS5tZXNzYWdlXG4gICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIG1lc3NhZ2VcbiAgICB9XG4gIH1cblxuICAvLyDlhbbku5bmg4XlhrXov5Tlm57pu5jorqTmtojmga9cbiAgcmV0dXJuIGRlZmF1bHRNZXNzYWdlXG59XG5cbi8qKlxuICog5LuO5pyq55+l57G75Z6L55qE6ZSZ6K+v5a+56LGh5Lit5o+Q5Y+W5aCG5qCI6Lef6LiqXG4gKlxuICogQHBhcmFtIGVycm9yIC0g5pyq55+l57G75Z6L55qE6ZSZ6K+v5a+56LGhXG4gKiBAcmV0dXJucyDloIbmoIjot5/ouKrlrZfnrKbkuLLmiJYgdW5kZWZpbmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcnJvclN0YWNrKGVycm9yOiB1bmtub3duKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICByZXR1cm4gZXJyb3Iuc3RhY2tcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkXG59XG5cbi8qKlxuICog5qOA5p+l6ZSZ6K+v5piv5ZCm5Li654m55a6a57G75Z6LXG4gKlxuICogQHBhcmFtIGVycm9yIC0g5pyq55+l57G75Z6L55qE6ZSZ6K+v5a+56LGhXG4gKiBAcGFyYW0gZXJyb3JDbGFzcyAtIOmUmeivr+exu+eahOaehOmAoOWHveaVsFxuICogQHJldHVybnMg5piv5ZCm5Li65oyH5a6a57G75Z6L55qE6ZSZ6K+vXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Vycm9yT2ZUeXBlPFQgZXh0ZW5kcyBFcnJvcj4oXG4gIGVycm9yOiB1bmtub3duLFxuICBlcnJvckNsYXNzOiBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBUXG4pOiBlcnJvciBpcyBUIHtcbiAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgZXJyb3JDbGFzc1xufVxuIl0sInZlcnNpb24iOjN9