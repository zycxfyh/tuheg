{"file":"C:\\Users\\16663\\Desktop\\tuheg\\apps\\backend-gateway\\src\\auth\\auth.controller.ts","mappings":";AAAA,yDAAyD;;;;;;;;;;;;;;;AAEzD,2CAAkG;AAClG,iDAA4C;AAC5C,yDAAyD;AACzD,0DAAyD;AAIzD,+CAA6C;AAG7C,qDAAmD;AACnD,4DAAsD;AAG/C,IAAM,cAAc,GAApB,MAAM,cAAc;IACI;IAA7B,YAA6B,WAAwB;QAAxB,gBAAW,GAAX,WAAW,CAAa;IAAG,CAAC;IAG5C,AAAN,KAAK,CAAC,QAAQ,CAA8C,WAAwB;QACzF,OAAO,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAA;IAC/C,CAAC;IAKY,AAAN,KAAK,CAAC,KAAK,CAA2C,QAAkB;QAC7E,OAAO,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAA;IACzC,CAAC;IAIM,UAAU,CAAQ,GAAY;QACnC,OAAO,GAAG,CAAC,IAAI,CAAA;IACjB,CAAC;CACF,CAAA;AApBY,wCAAc;AAIZ;IADZ,IAAA,aAAI,EAAC,UAAU,CAAC;IACM,WAAA,IAAA,aAAI,EAAC,IAAI,kCAAiB,CAAC,6BAAc,CAAC,CAAC,CAAA;;;;8CAEjE;AAKY;IAHZ,IAAA,oBAAQ,EAAC,EAAE,OAAO,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,GAAG,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC,SAAS;;IAC1D,IAAA,iBAAQ,EAAC,mBAAU,CAAC,EAAE,CAAC;IACvB,IAAA,aAAI,EAAC,OAAO,CAAC;IACM,WAAA,IAAA,aAAI,EAAC,IAAI,kCAAiB,CAAC,uBAAW,CAAC,CAAC,CAAA;;;;2CAE3D;AAIM;IAFN,IAAA,kBAAS,EAAC,6BAAY,CAAC;IACvB,IAAA,YAAG,EAAC,SAAS,CAAC;IACI,WAAA,IAAA,YAAG,GAAE,CAAA;;;;gDAEvB;yBAnBU,cAAc;IAD1B,IAAA,mBAAU,EAAC,MAAM,CAAC;;GACN,cAAc,CAoB1B","names":[],"sources":["C:\\Users\\16663\\Desktop\\tuheg\\apps\\backend-gateway\\src\\auth\\auth.controller.ts"],"sourcesContent":["// 文件路径: apps/backend-gateway/src/auth/auth.controller.ts\n\nimport { Body, Controller, Get, HttpCode, HttpStatus, Post, Req, UseGuards } from '@nestjs/common'\nimport { Throttle } from '@nestjs/throttler'\n// [核心修正] 从 @tuheg/common-backend 导入共享的 ZodValidationPipe\nimport { ZodValidationPipe } from '@tuheg/common-backend'\nimport type { Request } from 'express'\nimport type { AuthService } from './auth.service'\nimport type { LoginDto } from './dto/login.dto'\nimport { loginSchema } from './dto/login.dto'\n// 导入DTO类型和Zod schema\nimport type { RegisterDto } from './dto/register.dto'\nimport { registerSchema } from './dto/register.dto'\nimport { JwtAuthGuard } from './guards/jwt-auth.guard'\n\n@Controller('auth')\nexport class AuthController {\n  constructor(private readonly authService: AuthService) {}\n\n  @Post('register')\n  public async register(@Body(new ZodValidationPipe(registerSchema)) registerDto: RegisterDto) {\n    return this.authService.register(registerDto)\n  }\n\n  @Throttle({ default: { limit: 5, ttl: 300000 } }) // 5次/5分钟\n  @HttpCode(HttpStatus.OK)\n  @Post('login')\n  public async login(@Body(new ZodValidationPipe(loginSchema)) loginDto: LoginDto) {\n    return this.authService.login(loginDto)\n  }\n\n  @UseGuards(JwtAuthGuard)\n  @Get('profile')\n  public getProfile(@Req() req: Request) {\n    return req.user\n  }\n}\n"],"version":3}